(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46a60e15"],{"13d5":function(e,t,a){"use strict";var n=a("23e7"),s=a("d58f").left,o=a("a640"),l=a("1212"),r=a("9adc"),i=!r&&l>79&&l<83,c=i||!o("reduce");n({target:"Array",proto:!0,forced:c},{reduce:function(e){var t=arguments.length;return s(this,e,t,t>1?arguments[1]:void 0)}})},"4ec9":function(e,t,a){"use strict";a("6f48")},"4fad":function(e,t,a){"use strict";var n=a("d039"),s=a("861d"),o=a("c6b6"),l=a("d86b"),r=Object.isExtensible,i=n((function(){r(1)}));e.exports=i||l?function(e){return!!s(e)&&((!l||"ArrayBuffer"!==o(e))&&(!r||r(e)))}:r},"4fadc":function(e,t,a){"use strict";var n=a("23e7"),s=a("6f53").entries;n({target:"Object",stat:!0},{entries:function(e){return s(e)}})},6566:function(e,t,a){"use strict";var n=a("7c73"),s=a("edd0"),o=a("6964"),l=a("0366"),r=a("19aa"),i=a("7234"),c=a("2266"),u=a("c6d2"),d=a("4754"),f=a("2626"),m=a("83ab"),h=a("f183").fastKey,b=a("69f3"),p=b.set,g=b.getterFor;e.exports={getConstructor:function(e,t,a,u){var d=e((function(e,s){r(e,f),p(e,{type:t,index:n(null),first:null,last:null,size:0}),m||(e.size=0),i(s)||c(s,e[u],{that:e,AS_ENTRIES:a})})),f=d.prototype,b=g(t),v=function(e,t,a){var n,s,o=b(e),l=y(e,t);return l?l.value=a:(o.last=l={index:s=h(t,!0),key:t,value:a,previous:n=o.last,next:null,removed:!1},o.first||(o.first=l),n&&(n.next=l),m?o.size++:e.size++,"F"!==s&&(o.index[s]=l)),e},y=function(e,t){var a,n=b(e),s=h(t);if("F"!==s)return n.index[s];for(a=n.first;a;a=a.next)if(a.key===t)return a};return o(f,{clear:function(){var e=this,t=b(e),a=t.first;while(a)a.removed=!0,a.previous&&(a.previous=a.previous.next=null),a=a.next;t.first=t.last=null,t.index=n(null),m?t.size=0:e.size=0},delete:function(e){var t=this,a=b(t),n=y(t,e);if(n){var s=n.next,o=n.previous;delete a.index[n.index],n.removed=!0,o&&(o.next=s),s&&(s.previous=o),a.first===n&&(a.first=s),a.last===n&&(a.last=o),m?a.size--:t.size--}return!!n},forEach:function(e){var t,a=b(this),n=l(e,arguments.length>1?arguments[1]:void 0);while(t=t?t.next:a.first){n(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!y(this,e)}}),o(f,a?{get:function(e){var t=y(this,e);return t&&t.value},set:function(e,t){return v(this,0===e?0:e,t)}}:{add:function(e){return v(this,e=0===e?0:e,e)}}),m&&s(f,"size",{configurable:!0,get:function(){return b(this).size}}),d},setStrong:function(e,t,a){var n=t+" Iterator",s=g(t),o=g(n);u(e,t,(function(e,t){p(this,{type:n,target:e,state:s(e),kind:t,last:null})}),(function(){var e=o(this),t=e.kind,a=e.last;while(a&&a.removed)a=a.previous;return e.target&&(e.last=a=a?a.next:e.state.first)?d("keys"===t?a.key:"values"===t?a.value:[a.key,a.value],!1):(e.target=null,d(void 0,!0))}),a?"entries":"values",!a,!0),f(t)}}},"6d61":function(e,t,a){"use strict";var n=a("23e7"),s=a("cfe9"),o=a("e330"),l=a("94ca"),r=a("cb2d"),i=a("f183"),c=a("2266"),u=a("19aa"),d=a("1626"),f=a("7234"),m=a("861d"),h=a("d039"),b=a("1c7e"),p=a("d44e"),g=a("7156");e.exports=function(e,t,a){var v=-1!==e.indexOf("Map"),y=-1!==e.indexOf("Weak"),w=v?"set":"add",_=s[e],k=_&&_.prototype,S=_,j={},O=function(e){var t=o(k[e]);r(k,e,"add"===e?function(e){return t(this,0===e?0:e),this}:"delete"===e?function(e){return!(y&&!m(e))&&t(this,0===e?0:e)}:"get"===e?function(e){return y&&!m(e)?void 0:t(this,0===e?0:e)}:"has"===e?function(e){return!(y&&!m(e))&&t(this,0===e?0:e)}:function(e,a){return t(this,0===e?0:e,a),this})},L=l(e,!d(_)||!(y||k.forEach&&!h((function(){(new _).entries().next()}))));if(L)S=a.getConstructor(t,e,v,w),i.enable();else if(l(e,!0)){var x=new S,V=x[w](y?{}:-0,1)!==x,N=h((function(){x.has(1)})),C=b((function(e){new _(e)})),z=!y&&h((function(){var e=new _,t=5;while(t--)e[w](t,t);return!e.has(-0)}));C||(S=t((function(e,t){u(e,k);var a=g(new _,e,S);return f(t)||c(t,a[w],{that:a,AS_ENTRIES:v}),a})),S.prototype=k,k.constructor=S),(N||z)&&(O("delete"),O("has"),v&&O("get")),(z||V)&&O(w),y&&k.clear&&delete k.clear}return j[e]=S,n({global:!0,constructor:!0,forced:S!==_},j),p(S,e),y||a.setStrong(S,e,v),S}},"6f48":function(e,t,a){"use strict";var n=a("6d61"),s=a("6566");n("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),s)},"6f53":function(e,t,a){"use strict";var n=a("83ab"),s=a("d039"),o=a("e330"),l=a("e163"),r=a("df75"),i=a("fc6a"),c=a("d1e7").f,u=o(c),d=o([].push),f=n&&s((function(){var e=Object.create(null);return e[2]=2,!u(e,2)})),m=function(e){return function(t){var a,s=i(t),o=r(s),c=f&&null===l(s),m=o.length,h=0,b=[];while(m>h)a=o[h++],n&&!(c?a in s:u(s,a))||d(b,e?[a,s[a]]:s[a]);return b}};e.exports={entries:m(!0),values:m(!1)}},"7cf8":function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return o}));var n=a("c98b");function s(){return Object(n["b"])({url:"/monitor/metrics/node",method:"get"})}function o(e){return Object(n["b"])({url:"/monitor/metrics/pod/"+e,method:"get"})}},9485:function(e,t,a){"use strict";var n=a("23e7"),s=a("2266"),o=a("59ed"),l=a("825a"),r=a("46c4"),i=TypeError;n({target:"Iterator",proto:!0,real:!0},{reduce:function(e){l(this),o(e);var t=r(this),a=arguments.length<2,n=a?void 0:arguments[1],c=0;if(s(t,(function(t){a?(a=!1,n=t):n=e(n,t,c),c++}),{IS_RECORD:!0}),a)throw new i("Reduce of empty iterator with no initial value");return n}})},"9bee":function(e,t,a){"use strict";a.r(t);a("d81d"),a("13d5"),a("fb6a"),a("b0c0"),a("e9f5"),a("ab43"),a("9485"),a("d3b7"),a("ac1f"),a("5319");var n=function(){var e=this,t=e._self._c;return t("d2-container",[t("el-dialog",{attrs:{title:"添加/修改Labels",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",[t("el-form-item",{attrs:{label:"Key","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off",disabled:e.disableKey},model:{value:e.currentLabelKey,callback:function(t){e.currentLabelKey=t},expression:"currentLabelKey"}})],1),t("el-form-item",{attrs:{label:"Value","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.currentLabelValue,callback:function(t){e.currentLabelValue=t},expression:"currentLabelValue"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.patchLabels(e.currentLabelName)}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"添加/修改Annotations",visible:e.dialogFormVisibleAnnotations},on:{"update:visible":function(t){e.dialogFormVisibleAnnotations=t}}},[t("el-form",[t("el-form-item",{attrs:{label:"Key","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off",disabled:e.disableKey},model:{value:e.currentATKey,callback:function(t){e.currentATKey=t},expression:"currentATKey"}})],1),t("el-form-item",{attrs:{label:"Value","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.currentATValue,callback:function(t){e.currentATValue=t},expression:"currentATValue"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisibleAnnotations=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.patchAnnotations(e.currentLabelName)}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:e.kinds,center:"true",visible:e.dialogVisible,width:"90%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-row",{staticStyle:{"margin-bottom":"10px"}},[t("el-col",{attrs:{span:24}},[t("el-collapse",{attrs:{accordion:""}},[t("el-collapse-item",{attrs:{title:"基础数据",name:"1"}},[t("d2-highlight",{staticStyle:{"margin-bottom":"10px"},attrs:{code:e.jsonDataStr}})],1)],1)],1)],1),t("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:e.containertitle,name:"first"}},[t("el-table",{attrs:{data:e.containers,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[t("el-table-column",{attrs:{align:"center",sortable:"",label:"Status"},scopedSlots:e._u([{key:"default",fn:function(a){return[void 0!==a.row.state.running?t("el-tag",{attrs:{size:"mini",type:"success"}},[e._v("Running")]):void 0!==a.row.state.terminated?t("el-tag",{attrs:{size:"mini",type:"warning"}},[e._v("Terminated")]):t("el-tag",{attrs:{size:"mini",type:"danger"}},[e._v(e._s(a.row.state))])]}}])}),t("el-table-column",{attrs:{label:"Ready",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[e.row.ready?t("div",[t("i",{staticClass:"el-icon-check"})]):t("div",[t("i",{staticClass:"el-icon-close"})])]}}])}),t("el-table-column",{attrs:{label:"Name"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}])}),t("el-table-column",{attrs:{label:"Image",width:"400"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.image))])]}}])}),t("el-table-column",{attrs:{label:"InitContainer",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.init?t("div",[t("i",{staticClass:"el-icon-check",attrs:{type:"success"}})]):t("div",[e._v(" - ")])]}}])}),t("el-table-column",{attrs:{label:"Restart",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.restartCount)+" ")]}}])}),t("el-table-column",{attrs:{label:"Started",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.started?t("div",[t("i",{staticClass:"el-icon-check"})]):t("div",[e._v(" - ")])]}}])}),""!==e.namespace?t("el-table-column",{attrs:{label:"CPU消耗",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[void 0!==a.row.metrics?t("span",[e._v(e._s(parseInt(a.row.metrics.usage.cpu.replace("n",""),10)/1e6)+" m")]):t("span",[e._v("-")])]}}],null,!1,1015264759)}):e._e(),""!==e.namespace?t("el-table-column",{attrs:{label:"内存消耗",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[void 0!==a.row.metrics?t("span",[e._v(e._s(parseInt(a.row.metrics.usage.memory.replace("Ki",""),10)/1e3)+" Mb")]):t("span",[e._v("-")])]}}],null,!1,3618495150)}):e._e(),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.showLogsstatus(a.row.name)}}},[e._v("日志")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.showsshstatus(a.row.name)}}},[e._v("SSH")])]}}])})],1)],1),t("el-tab-pane",{attrs:{label:e.labelTitle,name:"labels"}},[t("el-table",{attrs:{data:e.labels,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[t("el-table-column",{attrs:{label:"Key",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.key)+" ")]}}])}),t("el-table-column",{attrs:{label:"Value",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.value)+" ")]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.editlabels(a.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.deletelabels(a.row)}}},[e._v("删除")])]}}])})],1),t("div",{staticStyle:{"margin-top":"20px"}},[t("el-button",{attrs:{type:"success"},on:{click:e.addlabel}},[e._v("添加")])],1)],1),t("el-tab-pane",{attrs:{label:e.annotationsTitle,name:"annotations"}},[t("el-table",{attrs:{data:e.annotations,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[t("el-table-column",{attrs:{label:"Key",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.key)+" ")]}}])}),t("el-table-column",{attrs:{label:"Value",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.value)+" ")]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.editAnnotations(a.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.deleteAnnotations(a.row)}}},[e._v("删除")])]}}])})],1),t("div",{staticStyle:{"margin-top":"20px"}},[t("el-button",{attrs:{type:"success"},on:{click:e.addAnnotations}},[e._v("添加")])],1)],1),t("el-tab-pane",{attrs:{label:"状态",name:"状态"}},[t("el-table",{attrs:{data:void 0===e.jsonData.status?[]:e.jsonData.status.conditions,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[t("el-table-column",{attrs:{label:"Condition",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.type)+" ")]}}])}),t("el-table-column",{attrs:{label:"Status",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.status)+" ")]}}])}),t("el-table-column",{attrs:{label:"Updated",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.lastTransitionTime)+" ")]}}])}),t("el-table-column",{attrs:{label:"Message",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.message)+" ")]}}])})],1)],1),0!==e.selectEvents.length?t("el-tab-pane",{attrs:{label:e.eventtitle,name:"事件"}},[t("el-table",{attrs:{data:e.selectEvents,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[t("el-table-column",{attrs:{label:"Reason",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.reason)+" ")]}}],null,!1,2694853209)}),t("el-table-column",{attrs:{label:"Updated",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.metadata.creationTimestamp)+" ")]}}],null,!1,2030677305)}),t("el-table-column",{attrs:{label:"Message",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.message)+" ")]}}],null,!1,3002100278)})],1)],1):e._e(),t("el-tab-pane",{attrs:{label:"相关资源 "+(e.ownerresources.length+e.resources.length),name:"相关资源"}},[t("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"10px"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("关联References "+e._s(e.ownerresources.length))])]),t("el-table",{attrs:{data:e.ownerresources,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[t("el-table-column",{attrs:{label:"Name",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}])}),t("el-table-column",{attrs:{label:"Kind",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.kind)+" ")]}}])}),t("el-table-column",{attrs:{label:"Controller",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.controller)+" ")]}}])}),t("el-table-column",{attrs:{label:"是否集联删除",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[e.row.blockOwnerDeletion?t("div",[t("i",{staticClass:"el-icon-check"})]):t("div",[t("i",{staticClass:"el-icon-close"})])]}}])}),t("el-table-column",{attrs:{label:"Namespace",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.namespace)+" ")]}}])})],1)],1),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("引用资源 "+e._s(e.resources.length))])]),t("el-table",{attrs:{data:e.resources,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[t("el-table-column",{attrs:{label:"Name",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}])}),t("el-table-column",{attrs:{label:"Kind",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.kind)+" ")]}}])}),t("el-table-column",{attrs:{label:"Type",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.type)+" ")]}}])}),t("el-table-column",{attrs:{label:"Namespace",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.namespace)+" ")]}}])})],1)],1)],1),t("el-tab-pane",{attrs:{label:"监控",name:"grafana"}},[t("vue-json-editor",{attrs:{mode:"tree",lang:"zh",expandedOnStart:!0,showBtns:!1},model:{value:e.metricsC,callback:function(t){e.metricsC=t},expression:"metricsC"}}),t("iframe",{attrs:{src:e.grafanaurl,width:"100%",height:"1600",frameborder:"0"}})],1),t("el-tab-pane",{attrs:{label:"YAML",name:"second"}},[t("vue-json-editor",{attrs:{showBtns:!0,mode:"tree",lang:"zh",expandedOnStart:!0},on:{"json-change":e.onJsonChange,"json-save":e.onJsonSave},model:{value:e.jsonData,callback:function(t){e.jsonData=t},expression:"jsonData"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],1),t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择Pods进行精确查询"},on:{change:e.changepods,clear:e.clears},model:{value:e.podValue,callback:function(t){e.podValue=t},expression:"podValue"}},e._l(e.list,(function(e){return t("el-option",{key:e.metadata.name,attrs:{label:e.metadata.name,value:e.metadata.name}})})),1),t("el-button",{on:{click:e.fetchData}},[e._v("刷新")]),e.isrefresh?t("el-button",{on:{click:e.closeRefresh}},[e._v("停止自动刷新")]):t("el-button",{on:{click:e.autoRefresh}},[e._v("自动刷新")]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{"margin-top":"10px"},attrs:{data:e.list.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[t("el-table-column",{attrs:{align:"center",sortable:"",label:"Status",prop:"status.phase",width:"95"},scopedSlots:e._u([{key:"default",fn:function(a){return["Running"===a.row.status.phase?t("el-tag",{attrs:{size:"mini",type:"success"}},[e._v(e._s(a.row.status.phase))]):"Succeeded"===a.row.status.phase?t("el-tag",{attrs:{size:"mini",type:"warning"}},[e._v(e._s(a.row.status.phase))]):t("el-tag",{attrs:{size:"mini",type:"danger"}},[e._v(e._s(a.row.status.phase))])]}}])}),t("el-table-column",{attrs:{label:"Name"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.openit(a.row)}}},[e._v(e._s(a.row.metadata.name))])]}}])}),t("el-table-column",{attrs:{label:"Image",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(a.row.spec.containers[0].image)+" "),a.row.spec.containers.length>1?t("div",[t("br"),t("el-button",{attrs:{type:"text"}},[e._v("+"+e._s(a.row.spec.containers.length)+" more")])],1):e._e()]}}])}),t("el-table-column",{attrs:{label:"Namespace",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.metadata.namespace))])]}}])}),t("el-table-column",{attrs:{label:"Ready",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(void 0===a.row.status.containerStatuses?"-":a.row.status.containerStatuses.map((function(e){return!0===e.ready?1:0})).reduce((function(e,t,a,n){return e+t})))+"/"+e._s(a.row.spec.containers.length))])]}}])}),t("el-table-column",{attrs:{label:"Restart",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(void 0===t.row.status.containerStatuses?"-":t.row.status.containerStatuses[0].restartCount)+" ")]}}])}),t("el-table-column",{attrs:{"class-name":"status-col",label:"IP",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"primary",size:"mini"}},[e._v(e._s(a.row.status.podIP))])]}}])}),t("el-table-column",{attrs:{label:"Node",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"warning",size:"mini"}},[e._v(e._s(a.row.status.hostIP))])]}}])}),""!==e.namespace?t("el-table-column",{attrs:{label:"CPU消耗",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v(e._s(a.row.cpus/1e6)+" m")])]}}],null,!1,2925159310)}):e._e(),""!==e.namespace?t("el-table-column",{attrs:{label:"内存消耗",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v(e._s(a.row.mems/1e3)+" Mb")])]}}],null,!1,907413663)}):e._e(),t("el-table-column",{attrs:{align:"center",prop:"metadata.creationTimestamp",sortable:"",label:"Age",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"success",size:"mini"}},[e._v(e._s(e.timeFn(a.row.metadata.creationTimestamp)))])]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-select",{attrs:{clearable:"",placeholder:"容器日志"},on:{focus:function(t){return e.getC(a.row)},change:function(t){return e.showLogs2(a.row,e.podValue)}},model:{value:e.podValue,callback:function(t){e.podValue=t},expression:"podValue"}},e._l(e.currentNameList,(function(e){return t("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1),t("el-select",{attrs:{clearable:"",placeholder:"SSH容器"},on:{change:function(t){return e.showssh(a.row,e.sshValue)}},model:{value:e.sshValue,callback:function(t){e.sshValue=t},expression:"sshValue"}},e._l(a.row.spec.containers,(function(e){return t("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.deletepod(a.row)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"block",staticStyle:{"margin-top":"15px"}},[t("el-pagination",{attrs:{align:"center","current-page":e.currentPage,"page-sizes":[1,5,10,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.list.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},s=[],o=a("b85c"),l=a("ade3"),r=(a("14d9"),a("a434"),a("7d54"),a("e9c4"),a("4ec9"),a("4fadc"),a("b64b"),a("3ca3"),a("159b"),a("ddb0"),a("ad8f")),i=a("45a3"),c=a("c276"),u=a("7cf8"),d={components:{vueJsonEditor:i["a"]},filters:{statusFilter:function(e){var t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},data:function(){var e;return e={activeName:"first",list:null,listLoading:!0,kinds:"",dialogVisible:!1,jsonData:"",jsonDataStr:"",value:"",namespaces:"",podValue:"",currentList:"",currentPage:1,total:20,pageSize:10,namespace:""},Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(e,"podValue",""),"sshValue",""),"currentNameList",[]),"containers",[]),"selecetNs",""),"selectName",""),"selectCon",[]),"events",[]),"selectEvents",[]),"eventtitle",""),Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(e,"containertitle",""),"resources",[]),"ownerresources",[]),"timer",null),"labelTitle",""),"dialogFormVisible",!1),"dialogFormVisibleAnnotations",!1),"formLabelWidth","120px"),"currentLabelKey",""),"currentLabelValue",""),Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(e,"currentLabelName",""),"currentATKey",""),"currentATValue",""),"labels",[]),"annotations",[]),"annotationsTitle",""),"disableKey",!0),"metrics",[]),"isrefresh",!1),"metricsC","")},computed:{grafanaurl:function(){return"/monitor/grafana/d/6581e46e4e5c7ba40a07646395ef7b23/kubernetes-compute-resources-pod?orgId=1&refresh=10s&var-datasource=prometheus&var-namespace="+this.namespace+"&var-pod="+this.currentLabelName+"&from=now-30m&to=now&theme=light&kiosk"}},created:function(){this.fetchData(),this.timer?clearInterval(this.timer):this.timer=setInterval(this.fetchData,3e4)},methods:Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])({closeRefresh:function(){clearInterval(this.timer),this.isrefresh=!1},autoRefresh:function(){this.isrefresh=!0,this.timer=setInterval(this.fetchData,3e3)},editlabels:function(e){this.dialogFormVisible=!0,console.log("editlabels",e),this.currentLabelKey=e["key"],this.currentLabelValue=e["value"],this.disableKey=!0},editAnnotations:function(e){this.dialogFormVisibleAnnotations=!0,console.log("editlabels",e),this.currentATKey=e["key"],this.currentATValue=e["value"],this.disableKey=!0},addlabel:function(){this.currentLabelKey="",this.currentLabelValue="",this.dialogFormVisible=!0,this.disableKey=!1},addAnnotations:function(){this.currentATKey="",this.disableKey=!1,this.currentATValue="",this.dialogFormVisibleAnnotations=!0},parseLabels:function(e){if(console.log("parseLabels",e),void 0!==e.labels){var t=new Map(Object.entries(e.labels));this.labels=[];var a,n=Object(o["a"])(t.keys());try{for(n.s();!(a=n.n()).done;){var s=a.value,l={key:s,value:t.get(s)};this.labels.push(l)}}catch(d){n.e(d)}finally{n.f()}}if(void 0!==e.annotations){var r=new Map(Object.entries(e.annotations));this.annotations=[];var i,c=Object(o["a"])(r.keys());try{for(c.s();!(i=c.n()).done;){var u=i.value;l={key:u,value:r.get(u)};this.annotations.push(l)}}catch(d){c.e(d)}finally{c.f()}}console.log("labels",this.labels,this.annotations)},deletelabels:function(e){var t=this;console.log(this.currentLabelName,e),this.listLoading=!0;var a=this.jsonData;delete a["metadata"]["labels"][e["key"]];var n={group:"",version:"v1",resource:"pods",namespace:this.selecetNs,name:this.currentLabelName,data:a};Object(r["d"])(n).then((function(a){console.log("delete labels",a),t.listLoading=!1,t.dialogFormVisible=!1,t.labels.forEach((function(a,n){a["key"]==e["key"]&&t.labels.splice(n,1)})),t.fetchData()}))},deleteAnnotations:function(e){var t=this;console.log(this.currentLabelName,e),this.listLoading=!0;var a=this.jsonData;delete a["metadata"]["annotations"][e["key"]];var n={group:"",version:"v1",resource:"pods",namespace:this.selecetNs,name:this.currentLabelName,data:a};Object(r["d"])(n).then((function(a){console.log("delete labels",a),t.listLoading=!1,t.dialogFormVisibleAnnotations=!1,t.labels.forEach((function(a,n){a["key"]==e["key"]&&t.labels.splice(n,1)})),t.fetchData()}))},patchLabels:function(e){var t=this;console.log(e),this.listLoading=!0;var a={};a[this.currentLabelKey]=this.currentLabelValue;var n={group:"",version:"v1",resource:"pods",namespace:this.selecetNs,name:e,patchdatastrate:{metadata:{labels:a}}};Object(r["c"])(n).then((function(e){console.log("patch resp",e),t.listLoading=!1,t.dialogFormVisible=!1,t.labels.forEach((function(e,a){e["key"]==t.currentLabelKey&&t.labels.splice(a,1)})),t.fetchData()}))},patchAnnotations:function(e){var t=this;console.log(e),this.listLoading=!0;var a={};a[this.currentATKey]=this.currentATValue;var n={group:"",version:"v1",resource:"pods",namespace:this.selecetNs,name:e,patchdatastrate:{metadata:{annotations:a}}};Object(r["c"])(n).then((function(e){console.log("patch resp",e),t.listLoading=!1,t.dialogFormVisibleAnnotations=!1,t.labels.forEach((function(e,a){e["key"]==t.currentATKey&&t.labels.splice(a,1)})),t.fetchData()}))},handleClick:function(e,t){console.log(e,t)},showLogs2:function(e,t){var a="/ws/logs/html/"+e.metadata.namespace+"/"+e.metadata.name+"/"+t;window.open(a,e.metadata.namespace+"-"+e.metadata.name,"height=600,width=1200,top=0,left=200,fullscreen=yes,scrollbars=0,location=no"),this.podValue=""},showLogsstatus:function(e){var t="/ws/logs/html/"+this.selecetNs+"/"+this.selectName+"/"+e;window.open(t,this.selecetNs+"-"+this.selectName,"height=600,width=1200,top=0,left=200,fullscreen=no,scrollbars=0,location=no")},showssh:function(e,t){var a="/ws/ssh/html/"+e.metadata.namespace+"/"+e.metadata.name+"/"+t;window.open(a,e.metadata.namespace+"-"+e.metadata.name,"height=600,width=1000,top=0,left=200,fullscreen=no,scrollbars=0,location=no"),this.sshValue=""},showsshstatus:function(e){var t="/ws/ssh/html/"+this.selecetNs+"/"+this.selectName+"/"+e;window.open(t,this.selecetNs+"-"+this.selectName,"height=600,width=1000,top=0,left=200,fullscreen=no,scrollbars=0,location=no"),this.sshValue=""},getC:function(e){var t=this;this.currentNameList=[],e.spec.containers.length>0&&e.spec.containers.forEach((function(e){t.currentNameList.push(e)})),e.spec.initContainers.length>0&&e.spec.initContainers.forEach((function(e){t.currentNameList.push(e)})),console.log(this.currentNameList)},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.currentPage=1,this.pageSize=e},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e},getNs:function(){var e=this;this.namespace=c["a"].cookies.get("namespace"),void 0!==this.namespace&&Object(u["b"])(this.namespace).then((function(t){console.log("podlllllll",t),e.metrics=t.data.items}))},clears:function(){this.dialogVisible=!1,this.jsonData=""}},"clears",(function(){this.dialogVisible=!1,this.jsonData=""})),"fetchData",(function(){var e=this;this.listLoading=!0,this.getNs();var t={group:"",version:"v1",resource:"pods",namespace:this.namespace};Object(r["f"])(t).then((function(t){console.log("apiserver",t),e.list=[],e.total=t.data.items.length,e.listLoading=!1,t.data.items.forEach((function(t,a){e.metrics.forEach((function(e){if(t.metadata.name===e.metadata.name){var a=0,n=0;e.containers.forEach((function(e){console.log("mmmmmmmcpus",e,n,e.usage.cpu,e.usage.memory),a+=parseInt(e.usage.cpu.replace("n",""),10),n+=parseInt(e.usage.memory.replace("Ki",""),10),console.log("cpus",a,n)})),t["cpus"]=a,t["mems"]=n,t.status.containerStatuses.forEach((function(a,n){e.containers.forEach((function(e){a.name===e.name&&(t.status.containerStatuses[n]["metrics"]=e)}))}))}})),e.list.push(t),""!==e.jsonData&&t.metadata.name===e.jsonData.metadata.name&&(e.jsonData=t,e.parseLabels(t.metadata))}))}));var a={group:"",version:"v1",resource:"events",namespace:this.namespace};Object(r["f"])(a).then((function(t){console.log("events",t),e.events=t.data.items}))})),"changens",(function(e){var t=this;this.listLoading=!0;var a={group:"",version:"v1",resource:"pods",namespace:e};Object(r["f"])(a).then((function(e){console.log("apiserver",e),t.list=e.data.items,t.total=t.list.length,t.listLoading=!1,t.list.forEach((function(e,a){""!==t.jsonData&&e.metadata.name===t.jsonData.metadata.name&&(t.jsonData=e,t.parseLabels(e.metadata))}))}))})),"deletepod",(function(e){var t=this;this.listLoading=!0;var a={group:"",version:"v1",resource:"pods",namespace:e.metadata.namespace,name:e.metadata.name};Object(r["a"])(a).then((function(e){console.log("apidelete",e),t.listLoading=!1})),this.fetchData()})),"changepods",(function(e){var t=this;this.podValue=e;var a=JSON.parse(JSON.stringify(this.list));this.currentList=a,this.list=[],this.currentList.forEach((function(a){a.metadata.name===e&&t.list.push(a)})),this.total=this.list.length})),"clears",(function(){this.changens(this.value)})),"openit",(function(e){var t=this;console.log(e),this.selecetNs=e.metadata.namespace,this.selectName=e.metadata.name,this.jsonData=e,this.currentLabelName=e.metadata.name,this.metricsC=e["metrics"],console.log("mmmmmetrics",this.metricsC),this.parseLabels(e.metadata),this.jsonDataStr={"命名空间":e.metadata.namespace,"开始时间":e.metadata.creationTimestamp,"容器IP":e.status.podIP,"节点IP":e.status.hostIP,"标签":e.metadata.labels,"注释":e.metadata.annotations},this.jsonDataStr=JSON.stringify(this.jsonDataStr,null,2),this.containers=[],void 0!==e.status.containerStatuses&&e.status.containerStatuses.length>0&&e.status.containerStatuses.forEach((function(e){t.containers.push(e)})),void 0!==e.status.initContainerStatuses&&e.status.initContainerStatuses.length>0&&e.status.initContainerStatuses.forEach((function(e){e["init"]=!0,t.containers.push(e)})),this.containertitle="容器 "+this.containers.length,this.selectEvents=[],this.events.forEach((function(a){a.involvedObject.name===e.metadata.name&&t.selectEvents.push(a)})),this.eventtitle="事件 "+this.selectEvents.length,this.kinds="["+e.kind+"] "+e.metadata.name,this.resources=[{type:"spec",kind:"ServiceAccount",name:e.spec.serviceAccount,namespace:e.metadata.namespace}],this.ownerresources=[],void 0!=e.metadata.ownerReferences&&e.metadata.ownerReferences.forEach((function(e){t.ownerresources.push(e)})),void 0!=e.spec.containers&&e.spec.containers.forEach((function(a){void 0!=a.env&&a.env.forEach((function(a){if(void 0!=a.valueFrom)if(void 0!=a.valueFrom.secretKeyRef){var n={type:"env",kind:"secret",name:a.valueFrom.secretKeyRef.name,namespace:e.metadata.namespace};t.resources.push(n)}else if(void 0!=a.valueFrom.configMapKeyRef){n={type:"env",kind:"secret",name:a.valueFrom.configMapKeyRef.name,namespace:e.metadata.namespace};t.resources.push(n)}}))})),void 0!=e.spec.volumes&&e.spec.volumes.forEach((function(a){if(void 0!=a.secret){var n={type:"volume",kind:"secret",name:a.secret.secretName,namespace:e.metadata.namespace};t.resources.push(n)}else if(void 0!=a.configMap){n={type:"volume",kind:"configMap",name:a.configMap.name,namespace:e.metadata.namespace};t.resources.push(n)}})),this.dialogVisible=!0,void 0!==e.metadata.labels?this.labelTitle="标签 "+Object.keys(e.metadata.labels).length:this.labelTitle="标签 0",void 0!==e.metadata.annotations?this.annotationsTitle="注释 "+Object.keys(e.metadata.annotations).length:this.annotationsTitle="注释 0"})),"timeFn",(function(e){var t=new Date,a=(e=new Date(e),t.getTime()-e),n=Math.floor(a/864e5),s=a%864e5,o=Math.floor(s/36e5),l=s%36e5,r=Math.floor(l/6e4),i=l%6e4,c=Math.round(i/1e3),u="";return 0!==n&&(u+=n+" 天 "),0!==o&&(u+=o+" 小时 "),0!==r&&(u+=r+" 分钟 "),0!==c&&(u+=c+" 秒"),u})),"onJsonChange",(function(e){console.log("value: change",e)})),"onJsonSave",(function(e){var t=this;console.log("value save:",e);var a={group:"",version:"v1",resource:"pods",namespace:e.metadata.namespace,name:e.metadata.name,data:e};Object(r["d"])(a).then((function(e){console.log("resp",e),t.fetchData(),t.dialogVisible=!1}))}))},f=d,m=a("2877"),h=Object(m["a"])(f,n,s,!1,null,null,null);t["default"]=h.exports},bb2f:function(e,t,a){"use strict";var n=a("d039");e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},d58f:function(e,t,a){"use strict";var n=a("59ed"),s=a("7b0b"),o=a("44ad"),l=a("07fa"),r=TypeError,i="Reduce of empty array with no initial value",c=function(e){return function(t,a,c,u){var d=s(t),f=o(d),m=l(d);if(n(a),0===m&&c<2)throw new r(i);var h=e?m-1:0,b=e?-1:1;if(c<2)while(1){if(h in f){u=f[h],h+=b;break}if(h+=b,e?h<0:m<=h)throw new r(i)}for(;e?h>=0:m>h;h+=b)h in f&&(u=a(u,f[h],h,d));return u}};e.exports={left:c(!1),right:c(!0)}},d86b:function(e,t,a){"use strict";var n=a("d039");e.exports=n((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},f183:function(e,t,a){"use strict";var n=a("23e7"),s=a("e330"),o=a("d012"),l=a("861d"),r=a("1a2d"),i=a("9bf2").f,c=a("241c"),u=a("057f"),d=a("4fad"),f=a("90e3"),m=a("bb2f"),h=!1,b=f("meta"),p=0,g=function(e){i(e,b,{value:{objectID:"O"+p++,weakData:{}}})},v=function(e,t){if(!l(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,b)){if(!d(e))return"F";if(!t)return"E";g(e)}return e[b].objectID},y=function(e,t){if(!r(e,b)){if(!d(e))return!0;if(!t)return!1;g(e)}return e[b].weakData},w=function(e){return m&&h&&d(e)&&!r(e,b)&&g(e),e},_=function(){k.enable=function(){},h=!0;var e=c.f,t=s([].splice),a={};a[b]=1,e(a).length&&(c.f=function(a){for(var n=e(a),s=0,o=n.length;s<o;s++)if(n[s]===b){t(n,s,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:u.f}))},k=e.exports={enable:_,fastKey:v,getWeakData:y,onFreeze:w};o[b]=!0}}]);