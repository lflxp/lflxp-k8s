(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e2494ba"],{"2d5b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"添加/修改Labels",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",[t("el-form-item",{attrs:{label:"Key","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off",disabled:e.disableKey},model:{value:e.currentLabelKey,callback:function(t){e.currentLabelKey=t},expression:"currentLabelKey"}})],1),t("el-form-item",{attrs:{label:"Value","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.currentLabelValue,callback:function(t){e.currentLabelValue=t},expression:"currentLabelValue"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.patchLabels(e.currentLabelName)}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"添加/修改Annotations",visible:e.dialogFormVisibleAnnotations},on:{"update:visible":function(t){e.dialogFormVisibleAnnotations=t}}},[t("el-form",[t("el-form-item",{attrs:{label:"Key","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off",disabled:e.disableKey},model:{value:e.currentATKey,callback:function(t){e.currentATKey=t},expression:"currentATKey"}})],1),t("el-form-item",{attrs:{label:"Value","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.currentATValue,callback:function(t){e.currentATValue=t},expression:"currentATValue"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisibleAnnotations=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.patchAnnotations(e.currentLabelName)}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:e.kinds,visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:e.labelTitle,name:"labels"}},[t("el-table",{attrs:{data:e.labels,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[t("el-table-column",{attrs:{label:"Key",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.key)+" ")]}}])}),t("el-table-column",{attrs:{label:"Value",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.value)+" ")]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.editlabels(a.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.deletelabels(a.row)}}},[e._v("删除")])]}}])})],1),t("div",{staticStyle:{"margin-top":"20px"}},[t("el-button",{attrs:{type:"success"},on:{click:e.addlabel}},[e._v("添加")])],1)],1),t("el-tab-pane",{attrs:{label:e.annotationsTitle,name:"annotations"}},[t("el-table",{attrs:{data:e.annotations,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[t("el-table-column",{attrs:{label:"Key",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.key)+" ")]}}])}),t("el-table-column",{attrs:{label:"Value",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.value)+" ")]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.editAnnotations(a.row)}}},[e._v("修改")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.deleteAnnotations(a.row)}}},[e._v("删除")])]}}])})],1),t("div",{staticStyle:{"margin-top":"20px"}},[t("el-button",{attrs:{type:"success"},on:{click:e.addAnnotations}},[e._v("添加")])],1)],1),t("el-tab-pane",{attrs:{label:"YAML",name:"fourth"}},[t("vue-json-editor",{attrs:{showBtns:!0,mode:"tree",lang:"zh",expandedOnStart:!0},on:{"json-change":e.onJsonChange,"json-save":e.onJsonSave},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],1)],1)},i=[],o=a("b85c"),s=a("ade3"),r=(a("14d9"),a("a434"),a("b0c0"),a("e9f5"),a("7d54"),a("4ec9"),a("4fadc"),a("b64b"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("ad8f")),l=a("45a3"),u={name:"d2-container-frame",components:{vueJsonEditor:l["a"]},props:{data:{type:Object,required:!0},group:{type:String,required:!0,default:""},version:{type:String,required:!0,default:"v1"},resource:{type:String,required:!0,default:"deployments"},namespace:{type:String,required:!0,default:""},show:{type:Boolean,require:!0,default:!1}},data:function(){return Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({dialogFormVisible:!1,dialogFormVisibleAnnotations:!1,formLabelWidth:"120px",currentLabelKey:"",currentLabelValue:"",currentATKey:"",currentATValue:"",labelsData:[],annotationsData:[],disableKey:!0},"formLabelWidth","120px"),"activeName","labels"),"jsonData",""),"dialogVisible",this.show)},mounted:function(){console.log("k8s-label-annotations enabled",this.data)},watch:{show:function(e){this.dialogVisible=e}},computed:{namespace:function(){return this.data.metadata.namespace},kinds:function(){return console.log("kinds",this.data),"["+this.data.kind+"] "+this.data.metadata.name},currentLabelName:function(){return this.data.metadata.name},labelTitle:function(){var e="";return e=void 0!==this.data.metadata.labels?"标签 "+Object.keys(this.data.metadata.labels).length:"标签 0",e},annotationsTitle:function(){var e="";return e=void 0!==this.data.metadata.annotations?"注释"+Object.keys(this.data.metadata.annotations).length:"注释 0",e},labels:{get:function(){var e=[];if(void 0!==this.data.metadata.labels){var t,a=new Map(Object.entries(this.data.metadata.labels)),n=Object(o["a"])(a.keys());try{for(n.s();!(t=n.n()).done;){var i=t.value,s={key:i,value:a.get(i)};e.push(s)}}catch(r){n.e(r)}finally{n.f()}}return e},set:function(e){this.labels=e}},annotations:{get:function(){console.log("annotations");var e=[];if(void 0!==this.data.metadata.annotations){var t,a=new Map(Object.entries(this.data.metadata.annotations)),n=Object(o["a"])(a.keys());try{for(n.s();!(t=n.n()).done;){var i=t.value,s={key:i,value:a.get(i)};e.push(s)}}catch(r){n.e(r)}finally{n.f()}}return e},set:function(e){this.annotationsData=e}}},methods:{editlabels:function(e){this.dialogFormVisible=!0,console.log("editlabels",e),this.currentLabelKey=e["key"],this.currentLabelValue=e["value"],this.disableKey=!0},editAnnotations:function(e){this.dialogFormVisibleAnnotations=!0,console.log("editlabels",e),this.currentATKey=e["key"],this.currentATValue=e["value"],this.disableKey=!0},addlabel:function(){this.currentLabelKey="",this.currentLabelValue="",this.dialogFormVisible=!0,this.disableKey=!1},addAnnotations:function(){this.currentATKey="",this.disableKey=!1,this.currentATValue="",this.dialogFormVisibleAnnotations=!0},parseLabels:function(e){if(console.log("parseLabels",e),this.dialogVisible=!0,void 0!==e.labels){var t=new Map(Object.entries(e.labels));this.labels=[];var a,n=Object(o["a"])(t.keys());try{for(n.s();!(a=n.n()).done;){var i=a.value,s={key:i,value:t.get(i)};this.labels.push(s)}}catch(d){n.e(d)}finally{n.f()}}if(void 0!==e.annotations){var r=new Map(Object.entries(e.annotations));this.annotations=[];var l,u=Object(o["a"])(r.keys());try{for(u.s();!(l=u.n()).done;){var c=l.value;s={key:c,value:r.get(c)};this.annotations.push(s)}}catch(d){u.e(d)}finally{u.f()}}console.log("labels",this.labels,this.annotations)},deletelabels:function(e){var t=this;console.log(this.currentLabelName,e),this.listLoading=!0;var a=this.data;delete a["metadata"]["labels"][e["key"]];var n={group:this.group,version:this.version,resource:this.resource,namespace:this.namespace,name:this.currentLabelName,data:a};Object(r["d"])(n).then((function(a){console.log("delete labels",a),t.listLoading=!1,t.dialogFormVisible=!1,t.labels.forEach((function(a,n){a["key"]==e["key"]&&t.labels.splice(n,1)})),t.$notify({title:"成功",message:"成功删除Labels "+e,type:"success"})}))},deleteAnnotations:function(e){var t=this;console.log(this.currentLabelName,e),this.listLoading=!0;var a=this.data;delete a["metadata"]["annotations"][e["key"]];var n={group:this.group,version:this.version,resource:this.resource,namespace:this.namespace,name:this.currentLabelName,data:a};Object(r["d"])(n).then((function(a){console.log("delete labels",a),t.listLoading=!1,t.dialogFormVisibleAnnotations=!1,t.labels.forEach((function(a,n){a["key"]==e["key"]&&t.labels.splice(n,1)})),t.$notify({title:"成功",message:"成功删除Annotations "+e,type:"success"})}))},patchLabels:function(e){var t=this;console.log(e),this.listLoading=!0;var a={};a[this.currentLabelKey]=this.currentLabelValue;var n={group:this.group,version:this.version,resource:this.resource,namespace:this.namespace,name:e,patchdatastrate:{metadata:{labels:a}}};Object(r["c"])(n).then((function(e){console.log("patch resp",e),t.listLoading=!1,t.dialogFormVisible=!1,t.labels.forEach((function(e,a){e["key"]==t.currentLabelKey&&t.labels.splice(a,1)})),t.$notify({title:"成功",message:"成功新增/修改Labels "+a,type:"success"})}))},patchAnnotations:function(e){var t=this;console.log(e),this.listLoading=!0;var a={};a[this.currentATKey]=this.currentATValue;var n={group:this.group,version:this.version,resource:this.resource,namespace:this.namespace,name:e,patchdatastrate:{metadata:{annotations:a}}};Object(r["c"])(n).then((function(e){console.log("patch resp",e),t.listLoading=!1,t.dialogFormVisibleAnnotations=!1,t.labels.forEach((function(e,a){e["key"]==t.currentATKey&&t.labels.splice(a,1)})),t.$notify({title:"成功",message:"成功新增/修改Annotations "+a,type:"success"})}))},onJsonChange:function(e){console.log("value: change",e)},onJsonSave:function(e){console.log("value save:",e);var t={group:this.group,version:this.version,resource:this.resource,namespace:this.namespace,name:e.metadata.name,data:e};Object(r["d"])(t).then((function(e){console.log("resp",e)}))}}},c=u,d=(a("a711"),a("2877")),f=Object(d["a"])(c,n,i,!1,null,"5a28a0b9",null);t["default"]=f.exports},"4ec9":function(e,t,a){"use strict";a("6f48")},"4fad":function(e,t,a){"use strict";var n=a("d039"),i=a("861d"),o=a("c6b6"),s=a("d86b"),r=Object.isExtensible,l=n((function(){r(1)}));e.exports=l||s?function(e){return!!i(e)&&((!s||"ArrayBuffer"!==o(e))&&(!r||r(e)))}:r},"4fadc":function(e,t,a){"use strict";var n=a("23e7"),i=a("6f53").entries;n({target:"Object",stat:!0},{entries:function(e){return i(e)}})},5842:function(e,t,a){},6566:function(e,t,a){"use strict";var n=a("7c73"),i=a("edd0"),o=a("6964"),s=a("0366"),r=a("19aa"),l=a("7234"),u=a("2266"),c=a("c6d2"),d=a("4754"),f=a("2626"),b=a("83ab"),h=a("f183").fastKey,v=a("69f3"),p=v.set,m=v.getterFor;e.exports={getConstructor:function(e,t,a,c){var d=e((function(e,i){r(e,f),p(e,{type:t,index:n(null),first:null,last:null,size:0}),b||(e.size=0),l(i)||u(i,e[c],{that:e,AS_ENTRIES:a})})),f=d.prototype,v=m(t),g=function(e,t,a){var n,i,o=v(e),s=y(e,t);return s?s.value=a:(o.last=s={index:i=h(t,!0),key:t,value:a,previous:n=o.last,next:null,removed:!1},o.first||(o.first=s),n&&(n.next=s),b?o.size++:e.size++,"F"!==i&&(o.index[i]=s)),e},y=function(e,t){var a,n=v(e),i=h(t);if("F"!==i)return n.index[i];for(a=n.first;a;a=a.next)if(a.key===t)return a};return o(f,{clear:function(){var e=this,t=v(e),a=t.first;while(a)a.removed=!0,a.previous&&(a.previous=a.previous.next=null),a=a.next;t.first=t.last=null,t.index=n(null),b?t.size=0:e.size=0},delete:function(e){var t=this,a=v(t),n=y(t,e);if(n){var i=n.next,o=n.previous;delete a.index[n.index],n.removed=!0,o&&(o.next=i),i&&(i.previous=o),a.first===n&&(a.first=i),a.last===n&&(a.last=o),b?a.size--:t.size--}return!!n},forEach:function(e){var t,a=v(this),n=s(e,arguments.length>1?arguments[1]:void 0);while(t=t?t.next:a.first){n(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!y(this,e)}}),o(f,a?{get:function(e){var t=y(this,e);return t&&t.value},set:function(e,t){return g(this,0===e?0:e,t)}}:{add:function(e){return g(this,e=0===e?0:e,e)}}),b&&i(f,"size",{configurable:!0,get:function(){return v(this).size}}),d},setStrong:function(e,t,a){var n=t+" Iterator",i=m(t),o=m(n);c(e,t,(function(e,t){p(this,{type:n,target:e,state:i(e),kind:t,last:null})}),(function(){var e=o(this),t=e.kind,a=e.last;while(a&&a.removed)a=a.previous;return e.target&&(e.last=a=a?a.next:e.state.first)?d("keys"===t?a.key:"values"===t?a.value:[a.key,a.value],!1):(e.target=null,d(void 0,!0))}),a?"entries":"values",!a,!0),f(t)}}},"6d61":function(e,t,a){"use strict";var n=a("23e7"),i=a("cfe9"),o=a("e330"),s=a("94ca"),r=a("cb2d"),l=a("f183"),u=a("2266"),c=a("19aa"),d=a("1626"),f=a("7234"),b=a("861d"),h=a("d039"),v=a("1c7e"),p=a("d44e"),m=a("7156");e.exports=function(e,t,a){var g=-1!==e.indexOf("Map"),y=-1!==e.indexOf("Weak"),k=g?"set":"add",L=i[e],w=L&&L.prototype,x=L,V={},A=function(e){var t=o(w[e]);r(w,e,"add"===e?function(e){return t(this,0===e?0:e),this}:"delete"===e?function(e){return!(y&&!b(e))&&t(this,0===e?0:e)}:"get"===e?function(e){return y&&!b(e)?void 0:t(this,0===e?0:e)}:"has"===e?function(e){return!(y&&!b(e))&&t(this,0===e?0:e)}:function(e,a){return t(this,0===e?0:e,a),this})},j=s(e,!d(L)||!(y||w.forEach&&!h((function(){(new L).entries().next()}))));if(j)x=a.getConstructor(t,e,g,k),l.enable();else if(s(e,!0)){var O=new x,_=O[k](y?{}:-0,1)!==O,K=h((function(){O.has(1)})),S=v((function(e){new L(e)})),F=!y&&h((function(){var e=new L,t=5;while(t--)e[k](t,t);return!e.has(-0)}));S||(x=t((function(e,t){c(e,w);var a=m(new L,e,x);return f(t)||u(t,a[k],{that:a,AS_ENTRIES:g}),a})),x.prototype=w,w.constructor=x),(K||F)&&(A("delete"),A("has"),g&&A("get")),(F||_)&&A(k),y&&w.clear&&delete w.clear}return V[e]=x,n({global:!0,constructor:!0,forced:x!==L},V),p(x,e),y||a.setStrong(x,e,g),x}},"6f48":function(e,t,a){"use strict";var n=a("6d61"),i=a("6566");n("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},"6f53":function(e,t,a){"use strict";var n=a("83ab"),i=a("d039"),o=a("e330"),s=a("e163"),r=a("df75"),l=a("fc6a"),u=a("d1e7").f,c=o(u),d=o([].push),f=n&&i((function(){var e=Object.create(null);return e[2]=2,!c(e,2)})),b=function(e){return function(t){var a,i=l(t),o=r(i),u=f&&null===s(i),b=o.length,h=0,v=[];while(b>h)a=o[h++],n&&!(u?a in i:c(i,a))||d(v,e?[a,i[a]]:i[a]);return v}};e.exports={entries:b(!0),values:b(!1)}},a711:function(e,t,a){"use strict";a("5842")},bb2f:function(e,t,a){"use strict";var n=a("d039");e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},d86b:function(e,t,a){"use strict";var n=a("d039");e.exports=n((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},f183:function(e,t,a){"use strict";var n=a("23e7"),i=a("e330"),o=a("d012"),s=a("861d"),r=a("1a2d"),l=a("9bf2").f,u=a("241c"),c=a("057f"),d=a("4fad"),f=a("90e3"),b=a("bb2f"),h=!1,v=f("meta"),p=0,m=function(e){l(e,v,{value:{objectID:"O"+p++,weakData:{}}})},g=function(e,t){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,v)){if(!d(e))return"F";if(!t)return"E";m(e)}return e[v].objectID},y=function(e,t){if(!r(e,v)){if(!d(e))return!0;if(!t)return!1;m(e)}return e[v].weakData},k=function(e){return b&&h&&d(e)&&!r(e,v)&&m(e),e},L=function(){w.enable=function(){},h=!0;var e=u.f,t=i([].splice),a={};a[v]=1,e(a).length&&(u.f=function(a){for(var n=e(a),i=0,o=n.length;i<o;i++)if(n[i]===v){t(n,i,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:c.f}))},w=e.exports={enable:L,fastKey:g,getWeakData:y,onFreeze:k};o[v]=!0}}]);