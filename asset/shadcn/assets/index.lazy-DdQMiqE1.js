import{ax as Ps,m as $e,r as m,j as e,d as y,ay as Is,az as Ds,aA as Me,C as S,aB as M,aC as T,aD as k,aE as P,a7 as W,I as G,aF as K,B as b,Q as fe,R as Ve,V as ge,W as q,X as R,Y,z as l,aj as re,ak as oe,al as de,am as ce,an as me,Z as Os,_ as H,D as Je,E as ze,J as Ue,K as Le,ag as _s,ah as As,ai as Es,s as Fs,a9 as $s,aa as Vs,ab as Js,ac as zs,ad as Te,ae as ke,af as Us,b as Ls,t as Hs,$ as Gs,a0 as Ks,a1 as qs,a2 as Bs,a3 as Ws,F as Ys,e as Xs,f as Qs,g as Zs,h as Rs,i as ea,a4 as sa,a8 as aa,a5 as w,ao as na,ap as ta,aq as ia,ar as la,as as ra,at as oa,au as da,aG as ae,aH as X,aI as He,aJ as Ge,aK as Ke,aL as F,aM as ne,aN as te,aO as $,aP as qe,aQ as ca,aR as ma,aS as xa,aT as ha,aU as ua,aV as Q,aW as pa,aX as ja,aY as fa,aZ as ga,a_ as va,a$ as Na,b0 as ba,b1 as Ca,b2 as ya,b3 as Sa,b4 as wa,b5 as Ma,b6 as Ta,b7 as ka,b8 as Pa,H as Ia,p as Da,T as Oa,q as _a,M as Aa,c as Ea}from"./index-XYqRjLsj.js";import{C as Pe}from"./checkbox-BwBlNEju.js";import{S as Be,a as We,b as Ye,c as Xe,d as Z}from"./select-CttTkpZY.js";import{I as Fa,a as $a,d as Va,c as Ja,b as za,e as Ua}from"./IconStopwatch-BqUkNWrX.js";import{A as Ie,a as De,C as La,E as Ha,D as Ga,b as Ka,c as qa,d as Ba,e as Wa,M as Ya,P as Xa,f as Qa,g as Za}from"./react-icons.esm-BQXzbcxC.js";import{u as Ra,I as en,C as sn}from"./confirm-dialog-tW03vGP4.js";import{u as an,T as V,a as J,b as v,c as p,f as Oe,d as z,e as x,g as nn,h as tn,i as ln,j as rn,k as on,l as dn,m as cn}from"./table-C080KiNt.js";import{P as mn,a as xn,b as hn}from"./popover-Ckc3erj7.js";import{I as un}from"./IconPlus-CEEmdtlk.js";import{T as he}from"./textarea-BYFyzWzW.js";import{J as Qe,D as ve,a as Ne,R as pn}from"./main-D0vpv5cZ.js";import{R as jn,a as _e,b as fn}from"./resizable-BqRr3LMW.js";import"./index-Ch72r8b2.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=Ps("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ae=$e("outline","trending-down","IconTrendingDown",[["path",{d:"M3 7l6 6l4 -4l8 8",key:"svg-0"}],["path",{d:"M21 10l0 7l-7 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var B=$e("outline","trending-up","IconTrendingUp",[["path",{d:"M3 17l6 -6l4 4l8 -8",key:"svg-0"}],["path",{d:"M14 7l7 0l0 7",key:"svg-1"}]]);const gn={light:"",dark:".dark"},Ze=m.createContext(null);function Re(){const s=m.useContext(Ze);if(!s)throw new Error("useChart must be used within a <ChartContainer />");return s}const es=m.forwardRef(({id:s,className:n,children:a,config:t,...i},o)=>{const c=m.useId(),r=`chart-${s||c.replace(/:/g,"")}`;return e.jsx(Ze.Provider,{value:{config:t},children:e.jsxs("div",{"data-chart":r,ref:o,className:y("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",n),...i,children:[e.jsx(vn,{id:r,config:t}),e.jsx(Is,{children:a})]})})});es.displayName="Chart";const vn=({id:s,config:n})=>{const a=Object.entries(n).filter(([,t])=>t.theme||t.color);return a.length?e.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(gn).map(([t,i])=>`
${i} [data-chart=${s}] {
${a.map(([o,c])=>{var d;const r=((d=c.theme)==null?void 0:d[t])||c.color;return r?`  --color-${o}: ${r};`:null}).join(`
`)}
}
`).join(`
`)}}):null},Nn=m.forwardRef(({active:s,payload:n,className:a,indicator:t="dot",hideLabel:i=!1,hideIndicator:o=!1,label:c,labelFormatter:r,labelClassName:d,formatter:h,color:f,nameKey:j,labelKey:u},N)=>{const{config:C}=Re(),L=m.useMemo(()=>{var A;if(i||!(n!=null&&n.length))return null;const[g]=n,U=`${u||(g==null?void 0:g.dataKey)||(g==null?void 0:g.name)||"value"}`,_=ue(C,g,U),I=!u&&typeof c=="string"?((A=C[c])==null?void 0:A.label)||c:_==null?void 0:_.label;return r?e.jsx("div",{className:y("font-medium",d),children:r(I,n)}):I?e.jsx("div",{className:y("font-medium",d),children:I}):null},[c,r,n,i,d,C,u]);if(!s||!(n!=null&&n.length))return null;const O=n.length===1&&t!=="dot";return e.jsxs("div",{ref:N,className:y("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",a),children:[O?null:L,e.jsx("div",{className:"grid gap-1.5",children:n.map((g,U)=>{const _=`${j||g.name||g.dataKey||"value"}`,I=ue(C,g,_),A=f||g.payload.fill||g.color;return e.jsx("div",{className:y("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",t==="dot"&&"items-center"),children:h&&(g==null?void 0:g.value)!==void 0&&g.name?h(g.value,g.name,g,U,g.payload):e.jsxs(e.Fragment,{children:[I!=null&&I.icon?e.jsx(I.icon,{}):!o&&e.jsx("div",{className:y("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":t==="dot","w-1":t==="line","w-0 border-[1.5px] border-dashed bg-transparent":t==="dashed","my-0.5":O&&t==="dashed"}),style:{"--color-bg":A,"--color-border":A}}),e.jsxs("div",{className:y("flex flex-1 justify-between leading-none",O?"items-end":"items-center"),children:[e.jsxs("div",{className:"grid gap-1.5",children:[O?L:null,e.jsx("span",{className:"text-muted-foreground",children:(I==null?void 0:I.label)||g.name})]}),g.value&&e.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:g.value.toLocaleString()})]})]})},g.dataKey)})})]})});Nn.displayName="ChartTooltip";const bn=m.forwardRef(({className:s,hideIcon:n=!1,payload:a,verticalAlign:t="bottom",nameKey:i},o)=>{const{config:c}=Re();return a!=null&&a.length?e.jsx("div",{ref:o,className:y("flex items-center justify-center gap-4",t==="top"?"pb-3":"pt-3",s),children:a.map(r=>{const d=`${i||r.dataKey||"value"}`,h=ue(c,r,d);return e.jsxs("div",{className:y("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[h!=null&&h.icon&&!n?e.jsx(h.icon,{}):e.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:r.color}}),h==null?void 0:h.label]},r.value)})}):null});bn.displayName="ChartLegend";function ue(s,n,a){if(typeof n!="object"||n===null)return;const t="payload"in n&&typeof n.payload=="object"&&n.payload!==null?n.payload:void 0;let i=a;return a in n&&typeof n[a]=="string"?i=n[a]:t&&a in t&&typeof t[a]=="string"&&(i=t[a]),i in s?s[i]:s[a]}const Cn=[{value:"Running",label:"Running"},{value:"Succeeded",label:"Succeeded"},{value:"Unknown",label:"Unknown"},{value:"Failed",label:"Failed"},{value:"Pending",label:"Pending"}],yn=[{value:"Running",label:"Running",icon:Fa},{value:"Succeeded",label:"Succeeded",icon:$a},{value:"Unknown",label:"Unknown",icon:Va},{value:"Failed",label:"Failed",icon:Ja},{value:"Pending",label:"Pending",icon:za}],ss=new Map([["Running","bg-teal-100/30 text-teal-900 dark:text-teal-200 border-teal-200"],["Failed","bg-neutral-300/40 border-neutral-300"],["Unknown","bg-sky-200/40 text-sky-900 dark:text-sky-100 border-sky-300"],["Successed","bg-destructive/10 dark:bg-destructive/50 text-destructive dark:text-primary border-destructive/10"],["Pending","bg-purple-200/40 text-purple-900 dark:text-purple-100 border-purple-300"]]),Sn=[{month:"January",desktop:186,mobile:80},{month:"February",desktop:305,mobile:200},{month:"March",desktop:237,mobile:120},{month:"April",desktop:73,mobile:190},{month:"May",desktop:209,mobile:130},{month:"June",desktop:214,mobile:140}],wn={desktop:{label:"Desktop",color:"#2563eb"},mobile:{label:"Mobile",color:"#60a5fa"}};function Mn(){return e.jsxs(e.Fragment,{children:[e.jsx(es,{config:wn,className:"min-h-[200px] w-full",children:e.jsxs(Ds,{accessibilityLayer:!0,data:Sn,children:[e.jsx(Me,{dataKey:"desktop",fill:"var(--color-desktop)",radius:4}),e.jsx(Me,{dataKey:"mobile",fill:"var(--color-mobile)",radius:4})]})}),e.jsxs(S,{className:"h-full border rounded-md",children:[e.jsxs(M,{children:[e.jsx(T,{children:"Create project"}),e.jsx(k,{children:"Deploy your new project in one-click."})]}),e.jsx(P,{children:e.jsx("form",{children:e.jsxs("div",{className:"grid w-full items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col space-y-1.5",children:[e.jsx(W,{htmlFor:"name",children:"Name"}),e.jsx(G,{id:"name",placeholder:"Name of your project"})]}),e.jsxs("div",{className:"flex flex-col space-y-1.5",children:[e.jsx(W,{htmlFor:"framework",children:"Framework"}),e.jsxs(Be,{children:[e.jsx(We,{id:"framework",children:e.jsx(Ye,{placeholder:"Select"})}),e.jsxs(Xe,{position:"popper",children:[e.jsx(Z,{value:"next",children:"Next.js"}),e.jsx(Z,{value:"sveltekit",children:"SvelteKit"}),e.jsx(Z,{value:"astro",children:"Astro"}),e.jsx(Z,{value:"nuxt",children:"Nuxt.js"})]})]})]})]})})}),e.jsxs(K,{className:"flex justify-between",children:[e.jsx(b,{variant:"outline",children:"Cancel"}),e.jsx(b,{children:"Deploy"})]})]})]})}const Tn={apiVersion:"v1",kind:"Pod",metadata:{annotations:{"cni.projectcalico.org/containerID":"6952a74e0b1c95f958e0e40eb2c8a8d93430112f2fc1860f2e81aa4d439d48e2","cni.projectcalico.org/podIP":"10.42.153.106/32","cni.projectcalico.org/podIPs":"10.42.153.106/32"},creationTimestamp:"2025-03-25T14:09:59Z",generateName:"demo-7fdf7d479b-",labels:{aa:"bbcd","app.kubernetes.io/instance":"demo","app.kubernetes.io/managed-by":"Helm","app.kubernetes.io/name":"demo","app.kubernetes.io/version":"1.16.0","helm.sh/chart":"demo-0.1.0","pod-template-hash":"7fdf7d479b"},name:"demo-7fdf7d479b-g52kv",namespace:"default"},spec:{containers:[{image:"nginx:1.16.0",imagePullPolicy:"IfNotPresent",livenessProbe:{failureThreshold:3,httpGet:{path:"/",port:"http",scheme:"HTTP"},periodSeconds:10,successThreshold:1,timeoutSeconds:1},name:"demo",ports:[{containerPort:80,name:"http",protocol:"TCP"}],readinessProbe:{failureThreshold:3,httpGet:{path:"/",port:"http",scheme:"HTTP"},periodSeconds:10,successThreshold:1,timeoutSeconds:1}}],tolerations:[{effect:"NoExecute",key:"node.kubernetes.io/not-ready",operator:"Exists",tolerationSeconds:300},{effect:"NoExecute",key:"node.kubernetes.io/unreachable",operator:"Exists",tolerationSeconds:300}]}};function E({column:s,title:n,className:a}){return s.getCanSort()?e.jsx("div",{className:y("flex items-center space-x-2",a),children:e.jsxs(fe,{children:[e.jsx(Ve,{asChild:!0,children:e.jsxs(b,{variant:"ghost",size:"sm",className:"-ml-3 h-8 data-[state=open]:bg-accent",children:[e.jsx("span",{children:n}),s.getIsSorted()==="desc"?e.jsx(Ie,{className:"ml-2 h-4 w-4"}):s.getIsSorted()==="asc"?e.jsx(De,{className:"ml-2 h-4 w-4"}):e.jsx(La,{className:"ml-2 h-4 w-4"})]})}),e.jsxs(ge,{align:"start",children:[e.jsxs(q,{onClick:()=>s.toggleSorting(!1),children:[e.jsx(De,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Asc"]}),e.jsxs(q,{onClick:()=>s.toggleSorting(!0),children:[e.jsx(Ie,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Desc"]}),s.getCanHide()&&e.jsxs(e.Fragment,{children:[e.jsx(R,{}),e.jsxs(q,{onClick:()=>s.toggleVisibility(!1),children:[e.jsx(Ha,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Hide"]})]})]})]})}):e.jsx("div",{className:y(a),children:n})}const as=Y.createContext(null);function kn({children:s}){const[n,a]=Ra(null),[t,i]=m.useState(null),[o,c]=m.useState(void 0);return e.jsx(as,{value:{open:n,setOpen:a,currentRow:t,setCurrentRow:i,containerName:o,setContainerName:c},children:s})}const se=()=>{const s=Y.useContext(as);if(!s)throw new Error("useTasks has to be used within <PodsContext>");return s};l.object({apiVersion:l.string(),kind:l.string().regex(/^Pod$/),metadata:l.object({name:l.string(),namespace:l.string().optional(),labels:l.record(l.string(),l.string()).optional(),annotations:l.record(l.string(),l.string()).optional(),uid:l.string(),creationTimestamp:l.string().optional(),ownerReferences:l.array(l.object({apiVersion:l.string(),kind:l.string(),name:l.string(),uid:l.string(),controller:l.boolean().optional(),blockOwnerDeletion:l.boolean().optional()})).optional()}),spec:l.object({containers:l.array(l.object({name:l.string(),image:l.string(),ports:l.array(l.object({containerPort:l.number()})).optional()})),restartPolicy:l.enum(["Always","OnFailure","Never"]).optional(),terminationGracePeriodSeconds:l.number().optional()}),status:l.object({phase:l.enum(["Pending","Running","Succeeded","Failed","Unknown"]).optional(),conditions:l.array(l.object({type:l.string(),status:l.string(),lastProbeTime:l.string().nullable().optional(),lastTransitionTime:l.string().optional(),reason:l.string().optional()})).optional(),hostIP:l.string().optional(),podIP:l.string().optional(),startTime:l.string().optional(),qosClass:l.string().optional(),containerStatuses:l.array(l.object({name:l.string(),ready:l.boolean(),restartCount:l.number(),image:l.string(),imageID:l.string(),containerID:l.string().optional()})).optional()}).optional()});const Pn=l.object({id:l.number(),hostip:l.string(),name:l.string(),namespace:l.string(),podip:l.string(),restart:l.number(),status:l.string(),statuss:l.object({phase:l.enum(["Pending","Running","Succeeded","Failed","Unknown"]).optional(),conditions:l.array(l.object({type:l.string(),status:l.string(),lastProbeTime:l.string().nullable().optional(),lastTransitionTime:l.string().optional(),reason:l.string().optional()})).optional(),hostIP:l.string().optional(),podIP:l.string().optional(),startTime:l.string().optional(),qosClass:l.string().optional(),containerStatuses:l.array(l.object({name:l.string(),ready:l.boolean(),restartCount:l.number(),image:l.string(),imageID:l.string(),containerID:l.string().optional()})).optional()}).optional(),createtime:l.string(),containerStatuses:l.array(l.object({name:l.string(),ready:l.boolean(),restartCount:l.number(),image:l.string(),imageID:l.string(),containerID:l.string().optional()})).optional(),controller:l.array(l.object({apiVersion:l.string(),blockOwnerDeletion:l.boolean().optional(),controller:l.boolean().optional(),name:l.string(),kind:l.string(),uid:l.string()})).optional(),raw:l.any()});function In({row:s}){var c;const n=Pn.parse(s.original),a=[...new Set((c=n.containerStatuses)==null?void 0:c.map(r=>r.name))].map(r=>({label:r,value:r})),{setOpen:t,setCurrentRow:i,setContainerName:o}=se();return e.jsxs(fe,{modal:!1,children:[e.jsx(Ve,{asChild:!0,children:e.jsxs(b,{variant:"ghost",className:"flex h-8 w-8 p-0 data-[state=open]:bg-muted",children:[e.jsx(Ga,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(ge,{align:"end",className:"w-[160px]",children:[e.jsx(q,{onClick:()=>{i(n),t("update")},children:"编辑"}),e.jsx(R,{}),e.jsxs(re,{children:[e.jsx(oe,{children:"日志"}),e.jsx(de,{children:e.jsx(ce,{value:n.name,children:a.map(r=>e.jsx(me,{onClick:()=>{i(n),o(r.value),t("terminal")},value:r.value,children:r.label},r.value))})})]}),e.jsxs(re,{children:[e.jsx(oe,{children:"终端"}),e.jsx(de,{children:e.jsx(ce,{value:n.name,children:a.map(r=>e.jsx(me,{onClick:()=>{i(n),o(r.value),t("ssh")},value:r.value,children:r.label},r.value))})})]}),e.jsx(q,{disabled:!0,children:"Make a copy"}),e.jsx(q,{disabled:!0,children:"Favorite"}),e.jsx(R,{}),e.jsxs(re,{children:[e.jsx(oe,{children:"Labels"}),e.jsx(de,{children:e.jsx(ce,{value:n.name,children:Cn.map(r=>e.jsx(me,{value:r.value,children:r.label},r.value))})})]}),e.jsx(R,{}),e.jsxs(q,{onClick:()=>{i(n),t("delete")},children:["刪除",e.jsx(Os,{children:e.jsx(en,{size:16})})]})]})]})}const Dn=[{id:"select",header:({table:s})=>e.jsx(Pe,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:n=>s.toggleAllPageRowsSelected(!!n),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:s})=>e.jsx(Pe,{checked:s.getIsSelected(),onCheckedChange:n=>s.toggleSelected(!!n),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"id",header:({column:s})=>e.jsx(E,{column:s,title:"Id"}),cell:({row:s})=>e.jsx("div",{className:"w-fit",children:s.getValue("id")}),enableSorting:!0,enableHiding:!0},{accessorKey:"status",header:({column:s})=>e.jsx(E,{column:s,title:"状态"}),cell:({row:s})=>{if(!yn.find(t=>t.value===s.getValue("status")))return null;const a=ss.get(s.getValue("status"));return e.jsx("div",{className:"flex space-x-2",children:e.jsx(H,{variant:"outline",className:y("capitalize",a),children:s.getValue("status")})})},filterFn:(s,n,a)=>a.includes(s.getValue(n))},{accessorKey:"name",header:({column:s})=>e.jsx(E,{column:s,title:"名称"}),cell:({row:s})=>{const{setOpen:n,setCurrentRow:a}=se(),t=()=>{n("detail"),a(s.original)};return e.jsx("div",{children:e.jsx("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap hover:overflow-visible hover:text-blue-600 cursor-pointer",onClick:t,children:s.getValue("name")})})},enableSorting:!1,enableHiding:!1},{accessorKey:"namespace",header:({column:s})=>e.jsx(E,{column:s,title:"命名空间"}),cell:({row:s})=>e.jsx("div",{className:"w-fit",children:s.getValue("namespace")})},{accessorKey:"images",header:({column:s})=>e.jsx(E,{column:s,title:"镜像"}),cell:({row:s})=>{const a=(s.original.containerStatuses||[]).map(t=>t.image);return a.length===0?e.jsx("div",{children:"-"}):e.jsxs("div",{className:"flex items-center",children:[e.jsx(Je,{children:e.jsxs(ze,{children:[e.jsx(Ue,{children:e.jsx("div",{className:"max-w-[200px] truncate",children:a[0]})}),e.jsx(Le,{className:"max-w-[400px] whitespace-pre-wrap",children:a.map((t,i)=>e.jsx("div",{children:t},i))})]})}),a.length>1&&e.jsxs("span",{className:"ml-1 text-xs text-muted-foreground",children:["+",a.length-1," more"]})]})},enableHiding:!0},{accessorKey:"ready",header:({column:s})=>e.jsx(E,{column:s,title:"就绪容器"}),cell:({row:s})=>{var i,o;const n=((i=s.original.containerStatuses)==null?void 0:i.length)||0,a=((o=s.original.containerStatuses)==null?void 0:o.filter(c=>c.ready).length)||0,t=()=>{const c=[];for(let r=0;r<a;r++)c.push(e.jsx("span",{className:"bg-green-500 w-3 h-3 inline-block mr-1"},r));for(let r=0;r<n-a;r++)c.push(e.jsx("span",{className:"bg-gray-300 w-3 h-3 inline-block mr-1"},r+a));return c};return e.jsx("div",{className:"w-fit",children:t()})}},{accessorKey:"restart",header:({column:s})=>e.jsx(E,{column:s,title:"重启次数"}),cell:({row:s})=>e.jsx("div",{className:"w-fit",children:s.getValue("restart")})},{id:"controller",header:({column:s})=>e.jsx(E,{column:s,title:"控制器"}),cell:({row:s})=>{var n,a;return e.jsx("div",{className:"w-fit",children:(a=(n=s.original.raw.metadata.ownerReferences)==null?void 0:n[0])==null?void 0:a.kind})}},{id:"qos",header:({column:s})=>e.jsx(E,{column:s,title:"QoS"}),cell:({row:s})=>{var n;return e.jsx("div",{className:"w-fit",children:(n=s.original.raw.status)==null?void 0:n.qosClass})}},{accessorKey:"podip",header:({column:s})=>e.jsx(E,{column:s,title:"容器IP"}),cell:({row:s})=>e.jsx("div",{className:"w-fit",children:s.getValue("podip")})},{accessorKey:"hostip",header:({column:s})=>e.jsx(E,{column:s,title:"主机IP"}),cell:({row:s})=>e.jsx("div",{className:"w-fit",children:s.getValue("hostip")})},{accessorKey:"createtime",header:({column:s})=>e.jsx(E,{column:s,title:"运行时间"}),cell:({row:s})=>{const n=h=>{const j=Date.now()-h,u=24*3600*1e3,N=3600*1e3,C=60*1e3,L=Math.floor(j/u),O=j%u,g=Math.floor(O/N),U=O%N,_=Math.floor(U/C),I=U%C,A=Math.round(I/1e3);return{days:L,hours:g,minutes:_,seconds:A}},a=(h,f,j,u)=>{let N="";return h>0&&(N+=`${h}d `),f>0&&(N+=`${f}h `),j>0&&(N+=`${j}m `),u>0&&(N+=`${u}s`),N},t=new Date(s.getValue("createtime")).getTime(),{days:i,hours:o,minutes:c,seconds:r}=n(t),d=a(i,o,c,r);return e.jsx("div",{className:"w-fit",children:d})}},{id:"actions",cell:({row:s})=>e.jsx(In,{row:s})}];function On({table:s}){return e.jsxs("div",{className:"flex items-center justify-between overflow-clip px-2",style:{overflowClipMargin:1},children:[e.jsxs("div",{className:"hidden flex-1 text-sm text-muted-foreground sm:block",children:[s.getFilteredSelectedRowModel().rows.length," of"," ",s.getFilteredRowModel().rows.length," row(s) selected."]}),e.jsxs("div",{className:"flex items-center sm:space-x-6 lg:space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"hidden text-sm font-medium sm:block",children:"Rows per page"}),e.jsxs(Be,{value:`${s.getState().pagination.pageSize}`,onValueChange:n=>{s.setPageSize(Number(n))},children:[e.jsx(We,{className:"h-8 w-[70px]",children:e.jsx(Ye,{placeholder:s.getState().pagination.pageSize})}),e.jsx(Xe,{side:"top",children:[5,10,20,30,40,50].map(n=>e.jsx(Z,{value:`${n}`,children:n},n))})]})]}),e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",s.getState().pagination.pageIndex+1," of"," ",s.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(b,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(0),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(Ka,{className:"h-4 w-4"})]}),e.jsxs(b,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.previousPage(),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(qa,{className:"h-4 w-4"})]}),e.jsxs(b,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.nextPage(),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(Ba,{className:"h-4 w-4"})]}),e.jsxs(b,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(s.getPageCount()-1),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(Wa,{className:"h-4 w-4"})]})]})]})]})}function _n({table:s}){return e.jsxs(fe,{modal:!1,children:[e.jsx(_s,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",className:"ml-auto hidden h-8 lg:flex",children:[e.jsx(Ya,{className:"mr-2 h-4 w-4"}),"View"]})}),e.jsxs(ge,{align:"end",className:"w-[150px]",children:[e.jsx(As,{children:"Toggle columns"}),e.jsx(R,{}),s.getAllColumns().filter(n=>typeof n.accessorFn<"u"&&n.getCanHide()).map(n=>e.jsx(Es,{className:"capitalize",checked:n.getIsVisible(),onCheckedChange:a=>n.toggleVisibility(!!a),children:n.id},n.id))]})]})}function xe({column:s,title:n,options:a}){const t=s==null?void 0:s.getFacetedUniqueValues(),i=new Set(s==null?void 0:s.getFilterValue());return e.jsxs(mn,{children:[e.jsx(xn,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:[e.jsx(Xa,{className:"mr-2 h-4 w-4"}),n,(i==null?void 0:i.size)>0&&e.jsxs(e.Fragment,{children:[e.jsx(Fs,{orientation:"vertical",className:"mx-2 h-4"}),e.jsx(H,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:i.size}),e.jsx("div",{className:"hidden space-x-1 lg:flex",children:i.size>2?e.jsxs(H,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[i.size," selected"]}):a.filter(o=>i.has(o.value)).map(o=>e.jsx(H,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:o.label},o.value))})]})]})}),e.jsx(hn,{className:"w-[200px] p-0",align:"start",children:e.jsxs($s,{children:[e.jsx(Vs,{placeholder:n}),e.jsxs(Js,{children:[e.jsx(zs,{children:"No results found."}),e.jsx(Te,{children:a.map(o=>{const c=i.has(o.value);return e.jsxs(ke,{onSelect:()=>{c?i.delete(o.value):i.add(o.value);const r=Array.from(i);s==null||s.setFilterValue(r.length?r:void 0)},children:[e.jsx("div",{className:y("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",c?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(Qa,{className:y("h-4 w-4")})}),o.icon&&e.jsx(o.icon,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:o.label}),(t==null?void 0:t.get(o.value))&&e.jsx("span",{className:"ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs",children:t.get(o.value)})]},o.value)})}),i.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(Us,{}),e.jsx(Te,{children:e.jsx(ke,{onSelect:()=>s==null?void 0:s.setFilterValue(void 0),className:"justify-center text-center",children:"Clear filters"})})]})]})]})})]})}const An=({fetchData:s})=>{const{setOpen:n}=se();return e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{variant:"outline",className:"space-x-1",onClick:()=>n("import"),children:[e.jsx("span",{children:"Import"})," ",e.jsx(Ua,{size:18})]}),e.jsxs(b,{className:"space-x-1",variant:"outline",onClick:()=>n("create"),children:[e.jsx("span",{children:"Create"})," ",e.jsx(un,{size:18})]}),e.jsx(b,{onClick:s,variant:"outline",children:"刷新"})]})};function En({table:s,originalData:n,fetchData:a}){var r;const t=s.getState().columnFilters.length>0,i=[...new Set(n.map(d=>d.namespace))].map(d=>({value:d,label:d})),o=[...new Set(n.map(d=>d.hostip))].map(d=>({value:d,label:d})),c=[...new Set(n.map(d=>d.status))].map(d=>({value:d,label:d}));return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-1 flex-col-reverse items-start gap-y-2 sm:flex-row sm:items-center sm:space-x-2",children:[e.jsx(G,{placeholder:"Filter tasks...",value:((r=s.getColumn("name"))==null?void 0:r.getFilterValue())??"",onChange:d=>{var h;return(h=s.getColumn("name"))==null?void 0:h.setFilterValue(d.target.value)},className:"h-8 w-[150px] lg:w-[250px]"}),e.jsxs("div",{className:"flex gap-x-2",children:[s.getColumn("status")&&e.jsx(xe,{column:s.getColumn("status"),title:"状态筛选",options:c}),s.getColumn("namespace")&&e.jsx(xe,{column:s.getColumn("namespace"),title:"命名空间筛选",options:i}),s.getColumn("hostip")&&e.jsx(xe,{column:s.getColumn("hostip"),title:"主机IP筛选",options:o})]}),t&&e.jsxs(b,{variant:"ghost",onClick:()=>s.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Reset",e.jsx(Za,{className:"ml-2 h-4 w-4"})]})]}),e.jsx(_n,{table:s}),e.jsx(An,{fetchData:a})]})}function Fn({columns:s,data:n,fetchData:a}){var u;const[t,i]=m.useState({}),[o,c]=m.useState({}),[r,d]=m.useState([]),[h,f]=m.useState([]),j=an({data:n,columns:s,state:{sorting:h,columnVisibility:o,rowSelection:t,columnFilters:r},enableRowSelection:!0,onRowSelectionChange:i,onSortingChange:f,onColumnFiltersChange:d,onColumnVisibilityChange:c,getCoreRowModel:dn(),getFilteredRowModel:on(),getPaginationRowModel:rn(),getSortedRowModel:ln(),getFacetedRowModel:tn(),getFacetedUniqueValues:nn()});return e.jsxs("div",{className:"space-y-4",children:[e.jsx(En,{table:j,originalData:n,fetchData:a}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(V,{children:[e.jsx(J,{children:j.getHeaderGroups().map(N=>e.jsx(v,{children:N.headers.map(C=>e.jsx(p,{colSpan:C.colSpan,children:C.isPlaceholder?null:Oe(C.column.columnDef.header,C.getContext())},C.id))},N.id))}),e.jsx(z,{children:(u=j.getRowModel().rows)!=null&&u.length?j.getRowModel().rows.map(N=>e.jsx(v,{"data-state":N.getIsSelected()&&"selected",children:N.getVisibleCells().map(C=>e.jsx(x,{children:Oe(C.column.columnDef.cell,C.getContext())},C.id))},N.id)):e.jsx(v,{children:e.jsx(x,{colSpan:s.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsx(On,{table:j})]})}const $n=l.object({file:l.instanceof(FileList).refine(s=>s.length>0,{message:"Please upload a file"}).refine(s=>{var n;return["text/csv"].includes((n=s==null?void 0:s[0])==null?void 0:n.type)},"Please upload csv format.")});function Vn({open:s,onOpenChange:n}){const a=Ls({resolver:Hs($n),defaultValues:{file:void 0}}),t=a.register("file"),i=()=>{const o=a.getValues("file");if(o&&o[0]){const c={name:o[0].name,size:o[0].size,type:o[0].type};w({title:"You have imported the following file:",description:e.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:e.jsx("code",{className:"text-white",children:JSON.stringify(c,null,2)})})})}n(!1)};return e.jsx(Gs,{open:s,onOpenChange:o=>{n(o),a.reset()},children:e.jsxs(Ks,{className:"gap-2 sm:max-w-sm",children:[e.jsxs(qs,{className:"text-left",children:[e.jsx(Bs,{children:"Import Tasks"}),e.jsx(Ws,{children:"Import tasks quickly from a CSV file."})]}),e.jsx(Ys,{...a,children:e.jsx("form",{id:"task-import-form",onSubmit:a.handleSubmit(i),children:e.jsx(Xs,{control:a.control,name:"file",render:()=>e.jsxs(Qs,{className:"mb-2 space-y-1",children:[e.jsx(Zs,{children:"File"}),e.jsx(Rs,{children:e.jsx(G,{type:"file",...t,className:"h-8"})}),e.jsx(ea,{})]})})})}),e.jsxs(sa,{className:"gap-2 sm:gap-0",children:[e.jsx(aa,{asChild:!0,children:e.jsx(b,{variant:"outline",children:"Close"})}),e.jsx(b,{type:"submit",form:"task-import-form",children:"Import"})]})]})})}function Ee({open:s,onOpenChange:n,currentRow:a}){const t=!!a,[i,o]=m.useState(""),[c,r]=m.useState(""),[d,h]=m.useState(!1);m.useEffect(()=>{a!=null&&a.raw&&o(JSON.stringify(a.raw,null,2)),r(JSON.stringify(Tn,null,2))},[a]);const f=()=>{try{if(!(a!=null&&a.namespace)||!(a!=null&&a.name)){w({title:"更新失败",description:"缺少必要的Pod信息",variant:"destructive"});return}const u={group:"",version:"v1",resource:"pods",namespace:a.namespace,name:a.name,data:JSON.parse(i)};fetch("/api/gvr",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then(N=>{if(!N.ok)throw new Error("更新失败");return N.json()}).then(N=>{w({title:"更新成功",description:"Pod配置已更新"}),n(!1)}).catch(N=>{w({title:"更新失败",description:"请检查网络连接或联系管理员",variant:"destructive"})})}catch{w({title:"JSON格式错误",description:"请检查JSON格式是否正确",variant:"destructive"})}},j=()=>{try{const u=JSON.parse(c);u.metadata.name===""&&w({title:"缺少必要条件",description:"metdata.name 不能为空"});const N={group:"",version:"v1",resource:"pods",namespace:u.metadata.namespace===""?"default":u.metadata.namespace,name:u.metadata.name,data:u};fetch("/api/gvr",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)}).then(C=>{if(!C.ok)throw new Error("新增失败");return C.json()}).then(C=>{w({title:"新增成功",description:"Pod配置已新增"}),n(!1)}).catch(C=>{w({title:"新增失败",description:"请检查网络连接或联系管理员",variant:"destructive"})})}catch{w({title:"JSON格式错误",description:"请检查JSON格式是否正确",variant:"destructive"})}};return e.jsx(na,{open:s,onOpenChange:u=>{n(u)},children:e.jsxs(ta,{side:"right",className:"w-[50%] sm:max-w-[90%] flex flex-col overflow-y-auto",children:[e.jsxs(ia,{className:"text-left",children:[e.jsxs(la,{children:[t?"更新":"创建"," Pod"]}),e.jsx(ra,{children:t?"更新Pod配置信息":"创建新的Pod配置"})]}),t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(b,{variant:"outline",onClick:()=>h(!d),children:d?"切换到视图模式":"切换到编辑模式"})}),d?e.jsx(he,{value:i,onChange:u=>o(u.target.value),className:"flex-1 font-mono resize-none",placeholder:"请输入JSON数据..."}):e.jsx(Qe,{src:(a==null?void 0:a.raw)||{},enableClipboard:!0,displayDataTypes:!1,name:!1})]}):e.jsx(he,{value:c,onChange:u=>{r(u.target.value)},className:"flex-1 font-mono resize-none",placeholder:"请输入Pod配置..."}),e.jsxs(oa,{className:"gap-2 mt-4",children:[e.jsx(da,{asChild:!0,children:e.jsx(b,{variant:"outline",children:"关闭"})}),t?d&&e.jsx(b,{form:"tasks-form",onClick:f,children:"更新配置"}):e.jsx(b,{form:"tasks-form",onClick:j,children:"新建"})]})]})})}function Jn({open:s,onOpenChange:n,podName:a,namespace:t,containerName:i}){const o=`/ws/logs/html/${t}/${a}/${i}`;return e.jsx(ve,{open:s,onOpenChange:n,children:e.jsx(Ne,{className:"h-[80vh] mt-0",children:e.jsx("div",{className:"w-full h-full",children:e.jsx("iframe",{src:o,className:"w-full h-full rounded-md border",style:{minHeight:"500px"}})})})})}function zn({open:s,onOpenChange:n,podName:a,namespace:t,containerName:i}){const o=`/ws/ssh/html/${t}/${a}/${i}`;return e.jsx(ve,{open:s,onOpenChange:n,children:e.jsx(Ne,{className:"h-[80vh] mt-0",children:e.jsx("div",{className:"w-full h-full",children:e.jsx("iframe",{src:o,className:"w-full h-full rounded-md",style:{minHeight:"500px"}})})})})}function Un(){return e.jsxs("div",{className:"*:data-[slot=card]:from-primary/5 *:data-[slot=card]:to-card dark:*:data-[slot=card]:bg-card grid grid-cols-1 gap-4 px-4 *:data-[slot=card]:bg-gradient-to-t *:data-[slot=card]:shadow-xs lg:px-6 @xl/main:grid-cols-2 @5xl/main:grid-cols-4",children:[e.jsxs(S,{className:"@container/card",children:[e.jsxs(M,{children:[e.jsx(k,{children:"Total Revenue"}),e.jsx(T,{className:"text-2xl font-semibold tabular-nums @[250px]/card:text-3xl",children:"$1,250.00"}),e.jsx(ae,{children:e.jsxs(H,{variant:"outline",children:[e.jsx(B,{}),"+12.5%"]})})]}),e.jsxs(K,{className:"flex-col items-start gap-1.5 text-sm",children:[e.jsxs("div",{className:"line-clamp-1 flex gap-2 font-medium",children:["Trending up this month ",e.jsx(B,{className:"size-4"})]}),e.jsx("div",{className:"text-muted-foreground",children:"Visitors for the last 6 months"})]})]}),e.jsxs(S,{className:"@container/card",children:[e.jsxs(M,{children:[e.jsx(k,{children:"New Customers"}),e.jsx(T,{className:"text-2xl font-semibold tabular-nums @[250px]/card:text-3xl",children:"1,234"}),e.jsx(ae,{children:e.jsxs(H,{variant:"outline",children:[e.jsx(Ae,{}),"-20%"]})})]}),e.jsxs(K,{className:"flex-col items-start gap-1.5 text-sm",children:[e.jsxs("div",{className:"line-clamp-1 flex gap-2 font-medium",children:["Down 20% this period ",e.jsx(Ae,{className:"size-4"})]}),e.jsx("div",{className:"text-muted-foreground",children:"Acquisition needs attention"})]})]}),e.jsxs(S,{className:"@container/card",children:[e.jsxs(M,{children:[e.jsx(k,{children:"Active Accounts"}),e.jsx(T,{className:"text-2xl font-semibold tabular-nums @[250px]/card:text-3xl",children:"45,678"}),e.jsx(ae,{children:e.jsxs(H,{variant:"outline",children:[e.jsx(B,{}),"+12.5%"]})})]}),e.jsxs(K,{className:"flex-col items-start gap-1.5 text-sm",children:[e.jsxs("div",{className:"line-clamp-1 flex gap-2 font-medium",children:["Strong user retention ",e.jsx(B,{className:"size-4"})]}),e.jsx("div",{className:"text-muted-foreground",children:"Engagement exceed targets"})]})]}),e.jsxs(S,{className:"@container/card",children:[e.jsxs(M,{children:[e.jsx(k,{children:"Growth Rate"}),e.jsx(T,{className:"text-2xl font-semibold tabular-nums @[250px]/card:text-3xl",children:"4.5%"}),e.jsx(ae,{children:e.jsxs(H,{variant:"outline",children:[e.jsx(B,{}),"+4.5%"]})})]}),e.jsxs(K,{className:"flex-col items-start gap-1.5 text-sm",children:[e.jsxs("div",{className:"line-clamp-1 flex gap-2 font-medium",children:["Steady performance increase ",e.jsx(B,{className:"size-4"})]}),e.jsx("div",{className:"text-muted-foreground",children:"Meets growth projections"})]})]})]})}const Fe=s=>s.running?"Running":s.waiting?"Waiting":s.terminated?"Terminated":s.successed?"Successed":s.failed?"Failed":s.pending?"Pending":"Unknown";function Ln({currentRow:s}){const{setOpen:n,setCurrentRow:a,setContainerName:t}=se(),i=m.useMemo(()=>{if(!s||!s.raw||!s.raw.status)return[];const o=s.raw.status.containerStatuses||[],c=s.raw.status.initContainerStatuses||[];return c.forEach(d=>{d.initContainer=!0}),[...o,...c].map((d,h)=>e.jsxs(v,{children:[e.jsx(x,{children:e.jsx("div",{className:"flex space-x-2",children:e.jsx(H,{variant:"outline",className:y("capitalize",ss.get(Fe(d.state))),children:Fe(d.state)})})}),e.jsx(x,{className:"font-medium",children:d.name}),e.jsx(x,{className:"font-medium",children:d.ready?e.jsx(X,{className:"h-4 w-4 text-green-500"}):e.jsx(ee,{className:"h-4 w-4 text-gray-400"})}),e.jsx(x,{className:"font-medium",children:d.image}),e.jsx(x,{className:"font-medium",children:d.initContainer?e.jsx(X,{className:"h-4 w-4 text-green-500"}):e.jsx(ee,{className:"h-4 w-4 text-gray-400"})}),e.jsx(x,{className:"font-medium",children:d.restartCount}),e.jsx(x,{className:"font-medium",children:d.started?"True":"False"}),e.jsx(x,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(b,{variant:"secondary",size:"sm",onClick:()=>{a(s),t(d.name),n("terminal")},children:"日志"}),e.jsx(b,{variant:"secondary",size:"sm",onClick:()=>{a(s),t(d.name),n("ssh")},children:"SSH"})]})})]},`${d.name}-${h}`))},[s]);return e.jsxs(S,{children:[e.jsxs(M,{children:[e.jsx(T,{children:s==null?void 0:s.raw.metadata.name}),e.jsxs(k,{children:["命名空间：",s==null?void 0:s.raw.metadata.namespace]})]}),e.jsx(P,{className:"space-y-2",children:e.jsxs(V,{children:[e.jsx(cn,{children:"容器详情"}),e.jsx(J,{children:e.jsxs(v,{children:[e.jsx(p,{className:"w-[100px]",children:"Status"}),e.jsx(p,{children:"Name"}),e.jsx(p,{children:"Ready"}),e.jsx(p,{children:"Image"}),e.jsx(p,{children:"InitContainer"}),e.jsx(p,{children:"Restart"}),e.jsx(p,{children:"Started"}),e.jsx(p,{children:"操作"})]})}),e.jsx(z,{children:i})]})})]})}function Hn({currentRow:s}){const n=m.useMemo(()=>!s||!s.raw||!s.raw.metadata.labels?[]:Object.entries(s.raw.metadata.labels).map(([a,t])=>e.jsxs(v,{children:[e.jsx(x,{className:"font-medium",children:a}),e.jsx(x,{children:t})]},a)),[s]);return e.jsxs(S,{children:[e.jsxs(M,{children:[e.jsx(T,{children:s==null?void 0:s.raw.metadata.name}),e.jsxs(k,{children:["命名空间：",s==null?void 0:s.raw.metadata.namespace]})]}),e.jsx(P,{className:"space-y-2",children:e.jsxs(V,{children:[e.jsx(J,{children:e.jsxs(v,{children:[e.jsx(p,{className:"w-[50%]",children:"键"}),e.jsx(p,{className:"w-[50%]",children:"值"})]})}),e.jsx(z,{children:n})]})})]})}function Gn({currentRow:s}){const n=m.useMemo(()=>!s||!s.raw||!s.raw.metadata.annotations?[]:Object.entries(s.raw.metadata.annotations).map(([a,t])=>e.jsxs(v,{children:[e.jsx(x,{className:"font-medium",children:a}),e.jsx(x,{children:t})]},a)),[s]);return e.jsxs(S,{children:[e.jsxs(M,{children:[e.jsx(T,{children:s==null?void 0:s.raw.metadata.name}),e.jsxs(k,{children:["命名空间：",s==null?void 0:s.raw.metadata.namespace]})]}),e.jsx(P,{className:"space-y-2",children:e.jsxs(V,{children:[e.jsx(J,{children:e.jsxs(v,{children:[e.jsx(p,{className:"w-[50%]",children:"键"}),e.jsx(p,{className:"w-[50%]",children:"值"})]})}),e.jsx(z,{children:n})]})})]})}function Kn({currentRow:s}){const n=m.useMemo(()=>!s||!s.raw||!s.raw.status||!s.raw.status.conditions?[]:Object.entries(s.raw.status.conditions).map((a,t)=>e.jsxs(v,{children:[e.jsx(x,{className:"font-medium",children:a[1].type}),e.jsx(x,{children:a[1].status==="True"?e.jsx(X,{className:"h-4 w-4 text-green-500"}):e.jsx(ee,{className:"h-4 w-4 text-gray-400"})}),e.jsx(x,{children:a[1].lastTransitionTime})]},t)),[s]);return e.jsxs(S,{children:[e.jsxs(M,{children:[e.jsx(T,{children:s==null?void 0:s.raw.metadata.name}),e.jsxs(k,{children:["命名空间：",s==null?void 0:s.raw.metadata.namespace]})]}),e.jsx(P,{className:"space-y-2",children:e.jsxs(V,{children:[e.jsx(J,{children:e.jsxs(v,{children:[e.jsx(p,{className:"w-[30%]",children:"Condition"}),e.jsx(p,{className:"w-[30%]",children:"Status"}),e.jsx(p,{className:"w-[40%]",children:"Timestamp"})]})}),e.jsx(z,{children:n})]})})]})}function qn({currentRow:s}){const n=m.useMemo(()=>!s||!s.raw||!s.raw.status?[]:Object.entries(s.raw.status).map(([a,t])=>e.jsxs(v,{children:[e.jsx(x,{className:"font-medium",children:a}),e.jsx(x,{children:JSON.stringify(t)})]},a)),[s]);return e.jsxs(e.Fragment,{children:[e.jsxs(S,{children:[e.jsxs(M,{children:[e.jsx(T,{children:s==null?void 0:s.raw.metadata.name}),e.jsxs(k,{children:["命名空间：",s==null?void 0:s.raw.metadata.namespace]})]}),e.jsx(P,{className:"space-y-2",children:e.jsxs(V,{children:[e.jsx(J,{children:e.jsxs(v,{children:[e.jsx(p,{className:"w-[100px]",children:"属性"}),e.jsx(p,{children:"值"})]})}),e.jsxs(z,{children:[s&&Object.entries(s.raw.metadata).map(([a,t])=>e.jsxs(v,{children:[e.jsx(x,{className:"font-medium",children:a}),e.jsx(x,{children:JSON.stringify(t)})]},a)),n,s&&Object.entries(s.raw.spec).map(([a,t])=>a!=="containers"&&e.jsxs(v,{children:[e.jsx(x,{className:"font-medium",children:a}),e.jsx(x,{children:JSON.stringify(t)})]},a))]})]})})]}),e.jsxs(S,{className:"mt-4",children:[e.jsxs(M,{children:[e.jsx(T,{children:"Container信息"}),e.jsx(k,{children:"Container原始信息展示"})]}),e.jsx(P,{className:"space-y-2",children:e.jsxs(V,{children:[e.jsx(J,{children:e.jsxs(v,{children:[e.jsx(p,{className:"w-[100px]",children:"属性"}),e.jsx(p,{className:"w-[auto]",children:"值"})]})}),e.jsx(z,{children:s&&s.raw.spec.containers.map((a,t)=>Object.entries(a).map(([i,o])=>e.jsxs(v,{children:[e.jsx(x,{className:"font-medium",children:i}),e.jsx(x,{children:e.jsx(Je,{children:e.jsxs(ze,{children:[e.jsx(Ue,{children:e.jsx("div",{className:"whitespace-pre-wrap break-all",children:JSON.stringify(o)})}),e.jsx(Le,{className:"whitespace-pre-wrap break-all",children:JSON.stringify(o)})]})})})]},`${t}-${i}`)))})]})})]})]})}const Bn=s=>s.emptyDir?"emptyDir":s.persistentVolumeClaim?"persistenVolumeClaim":s.configMap?"configMap":s.secret?"secret":s.projected?"projected":"Unknown";function Wn({currentRow:s}){var t;const n=m.useMemo(()=>!s||!s.raw||!s.raw.metadata.ownerReferences?[]:Object.entries(s.raw.metadata.ownerReferences).map((i,o)=>e.jsxs(v,{children:[e.jsx(x,{className:"font-medium",children:i[1].name}),e.jsx(x,{className:"font-medium",children:i[1].kind}),e.jsx(x,{children:i[1].controller?e.jsx(X,{className:"h-4 w-4 text-green-500"}):e.jsx(ee,{className:"h-4 w-4 text-gray-400"})}),e.jsx(x,{children:i[1].blockOwnerDeletion?e.jsx(X,{className:"h-4 w-4 text-green-500"}):e.jsx(ee,{className:"h-4 w-4 text-gray-400"})})]},o)),[s]),a=m.useMemo(()=>!s||!s.raw||!s.raw.spec.volumes?[]:Object.entries(s.raw.spec.volumes).map((i,o)=>e.jsxs(v,{children:[e.jsx(x,{className:"font-medium",children:i[1].name}),e.jsx(x,{className:"font-medium",children:Bn(i[1])}),e.jsx(x,{className:"font-medium",children:JSON.stringify(i[1],null,2)})]},o)),[s]);return e.jsxs(e.Fragment,{children:[e.jsxs(S,{children:[e.jsxs(M,{children:[e.jsxs(T,{children:["关联References ",(t=s==null?void 0:s.raw.metadata.ownerReferences)==null?void 0:t.length]}),e.jsx(k,{children:"OwnerReferences"})]}),e.jsx(P,{className:"space-y-2",children:(s==null?void 0:s.raw.metadata.ownerReferences)&&e.jsx("div",{className:"mb-2",children:e.jsxs(V,{children:[e.jsx(J,{children:e.jsxs(v,{children:[e.jsx(p,{children:"Name"}),e.jsx(p,{children:"Kind"}),e.jsx(p,{children:"Controller"}),e.jsx(p,{children:"是否集联删除"})]})}),e.jsx(z,{children:n})]})})})]}),e.jsxs(S,{className:"mt-4",children:[e.jsxs(M,{children:[e.jsxs(T,{children:["引用资源 ",s==null?void 0:s.raw.spec.volumes.length]}),e.jsx(k,{children:"磁盘卷配置"})]}),e.jsx(P,{className:"space-y-2",children:(s==null?void 0:s.raw.spec.volumes)&&e.jsx("div",{className:"mb-2",children:e.jsxs(V,{children:[e.jsx(J,{children:e.jsxs(v,{children:[e.jsx(p,{children:"Name"}),e.jsx(p,{children:"Kind"}),e.jsx(p,{children:"Detail"})]})}),e.jsx(z,{children:a})]})})})]}),e.jsx(qn,{currentRow:s})]})}function Yn({currentRow:s}){const n=m.useMemo(()=>{if(!s||!s.raw||!s.raw.spec.affinity)return[];const t=s.raw.spec.affinity,i=[];return t.nodeAffinity&&(t.nodeAffinity.requiredDuringSchedulingIgnoredDuringExecution&&i.push(e.jsxs(v,{children:[e.jsx(x,{className:"font-medium",children:"节点亲和性"}),e.jsx(x,{className:"font-medium",children:"硬亲和性"}),e.jsx(x,{children:JSON.stringify(t.nodeAffinity.requiredDuringSchedulingIgnoredDuringExecution,null,2)})]},"node-affinity-required")),t.nodeAffinity.preferredDuringSchedulingIgnoredDuringExecution&&i.push(e.jsxs(v,{children:[e.jsx(x,{className:"font-medium",children:"节点亲和性"}),e.jsx(x,{className:"font-medium",children:"软亲和性"}),e.jsx(x,{children:JSON.stringify(t.nodeAffinity.preferredDuringSchedulingIgnoredDuringExecution,null,2)})]},"node-affinity-preferred"))),t.podAffinity&&(t.podAffinity.requiredDuringSchedulingIgnoredDuringExecution&&i.push(e.jsxs(v,{children:[e.jsx(x,{className:"font-medium",children:"Pod亲和性"}),e.jsx(x,{className:"font-medium",children:"硬亲和性"}),e.jsx(x,{children:JSON.stringify(t.podAffinity.requiredDuringSchedulingIgnoredDuringExecution,null,2)})]},"pod-affinity-required")),t.podAffinity.preferredDuringSchedulingIgnoredDuringExecution&&i.push(e.jsxs(v,{children:[e.jsx(x,{className:"font-medium",children:"Pod亲和性"}),e.jsx(x,{className:"font-medium",children:"软亲和性"}),e.jsx(x,{children:JSON.stringify(t.podAffinity.preferredDuringSchedulingIgnoredDuringExecution,null,2)})]},"pod-affinity-preferred"))),t.podAntiAffinity&&(t.podAntiAffinity.requiredDuringSchedulingIgnoredDuringExecution&&i.push(e.jsxs(v,{children:[e.jsx(x,{className:"font-medium",children:"Pod反亲和性"}),e.jsx(x,{className:"font-medium",children:"硬反亲和性"}),e.jsx(x,{children:JSON.stringify(t.podAntiAffinity.requiredDuringSchedulingIgnoredDuringExecution,null,2)})]},"pod-anti-affinity-required")),t.podAntiAffinity.preferredDuringSchedulingIgnoredDuringExecution&&i.push(e.jsxs(v,{children:[e.jsx(x,{className:"font-medium",children:"Pod反亲和性"}),e.jsx(x,{className:"font-medium",children:"软反亲和性"}),e.jsx(x,{children:JSON.stringify(t.podAntiAffinity.preferredDuringSchedulingIgnoredDuringExecution,null,2)})]},"pod-anti-affinity-preferred"))),i},[s]),a=m.useMemo(()=>!s||!s.raw||!s.raw.spec.tolerations?[]:s.raw.spec.tolerations.map((t,i)=>e.jsxs(v,{children:[e.jsx(x,{className:"font-medium",children:t.key||"-"}),e.jsx(x,{className:"font-medium",children:t.operator||"-"}),e.jsx(x,{className:"font-medium",children:t.value||"-"}),e.jsx(x,{className:"font-medium",children:t.effect||"-"}),e.jsx(x,{className:"font-medium",children:t.tolerationSeconds?t.tolerationSeconds:"无限期"})]},i)),[s]);return e.jsxs(e.Fragment,{children:[(s==null?void 0:s.raw.spec.affinity)&&e.jsxs(S,{children:[e.jsxs(M,{children:[e.jsx(T,{children:s==null?void 0:s.raw.metadata.name}),e.jsxs(k,{children:["命名空间：",s==null?void 0:s.raw.metadata.namespace]})]}),e.jsx(P,{className:"space-y-2",children:e.jsxs("div",{className:"mb-2",children:[e.jsx("h3",{className:"text-lg text-left font-semibold",children:"亲和性配置"}),e.jsxs(V,{children:[e.jsx(J,{children:e.jsxs(v,{children:[e.jsx(p,{children:"类型"}),e.jsx(p,{children:"亲和性类型"}),e.jsx(p,{children:"配置详情"})]})}),e.jsx(z,{children:n})]})]})})]}),e.jsxs(S,{className:"mt-4",children:[e.jsxs(M,{children:[e.jsx(T,{children:s==null?void 0:s.raw.metadata.name}),e.jsxs(k,{children:["命名空间：",s==null?void 0:s.raw.metadata.namespace]})]}),e.jsx(P,{className:"space-y-2",children:(s==null?void 0:s.raw.spec.tolerations)&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("h3",{className:"text-lg text-left font-semibold",children:["容忍度配置 ",s==null?void 0:s.raw.spec.tolerations.length]}),e.jsxs(V,{children:[e.jsx(J,{children:e.jsxs(v,{children:[e.jsx(p,{children:"Key"}),e.jsx(p,{children:"Operator"}),e.jsx(p,{children:"Value"}),e.jsx(p,{children:"Effect"}),e.jsx(p,{children:"容忍时间(秒)"})]})}),e.jsx(z,{children:a})]})]})})]})]})}function Xn({currentRow:s}){const[n,a]=m.useState([]),t=async()=>{var r,d,h,f;try{const j=await He.post("/api/gvr/list",{group:"",version:"v1",resource:"events",listoptions:{fieldSelector:`involvedObject.name=${(d=(r=s==null?void 0:s.raw)==null?void 0:r.metadata)==null?void 0:d.name},involvedObject.namespace=${(f=(h=s==null?void 0:s.raw)==null?void 0:h.metadata)==null?void 0:f.namespace}`,limit:1e3,sortBy:"lastTimestamp",sortOrder:"desc"}});a(j.data.items)}catch(j){w({title:"请求接口出错",description:e.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:e.jsx("code",{className:"text-white",children:JSON.stringify(j,null,2)})})})}},i=r=>{const h=Date.now()-r,f=24*3600*1e3,j=3600*1e3,u=60*1e3,N=Math.floor(h/f),C=h%f,L=Math.floor(C/j),O=C%j,g=Math.floor(O/u),U=O%u,_=Math.round(U/1e3);return{days:N,hours:L,minutes:g,seconds:_}},o=(r,d,h,f)=>{let j="";return r>0&&(j+=`${r}d `),d>0&&(j+=`${d}h `),h>0&&(j+=`${h}m `),f>0&&(j+=`${f}s`),j},c=r=>{const d=new Date(r).getTime(),{days:h,hours:f,minutes:j,seconds:u}=i(d);return o(h,f,j,u)};return m.useEffect(()=>{t()},[]),e.jsxs(S,{children:[n.length>0&&e.jsx(M,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(T,{children:n[0].involvedObject.name}),e.jsxs(k,{children:["命名空间：",n[0].involvedObject.namespace]})]}),e.jsxs(b,{variant:"outline",size:"sm",onClick:t,children:[e.jsx(pn,{className:"h-4 w-4 mr-2"}),"刷新"]})]})}),e.jsx(P,{className:"space-y-2",children:e.jsxs(V,{children:[e.jsx(J,{children:e.jsxs(v,{children:[e.jsx(p,{className:"w-[40px]",children:"Kind"}),e.jsx(p,{className:"w-[100px]",children:"Reason"}),e.jsx(p,{className:"w-[500px]",children:"Message"}),e.jsx(p,{className:"w-[80px]",children:"Source"}),e.jsx(p,{className:"w-[80px]",children:"Type"}),e.jsx(p,{className:"w-[80px]",children:"Age"})]})}),e.jsx(z,{children:n.length>0&&n.map((r,d)=>e.jsxs(v,{children:[e.jsx(x,{children:r.involvedObject.kind}),e.jsx(x,{children:r.reason}),e.jsx(x,{className:"whitespace-pre-wrap break-all max-w-[300px]",children:r.message}),e.jsx(x,{children:r.source.component}),e.jsx(x,{children:r.type}),e.jsx(x,{children:e.jsx("div",{className:"w-fit",children:c(r.lastTimestamp)})})]},d))})]})})]})}function Qn({open:s,onOpenChange:n,currentRow:a}){var d,h,f,j,u,N,C,L,O,g,U,_,I;const[t,i]=m.useState(!1),[o,c]=m.useState("");m.useEffect(()=>{a!=null&&a.raw&&c(JSON.stringify(a.raw,null,2))},[a]);const r=()=>{var A,Ce,ye,Se;try{const we={group:"",version:"v1",resource:"pods",namespace:(Ce=(A=a==null?void 0:a.raw)==null?void 0:A.metadata)==null?void 0:Ce.namespace,name:(Se=(ye=a==null?void 0:a.raw)==null?void 0:ye.metadata)==null?void 0:Se.name,data:t?JSON.parse(o):a==null?void 0:a.raw};fetch("/api/gvr",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(we)}).then(le=>le.json()).then(le=>{w({title:"更新成功",description:"Pod配置已更新"})}).catch(le=>{w({title:"更新失败",description:"请检查网络连接或联系管理员",variant:"destructive"})})}catch{w({title:"JSON格式错误",description:"请检查JSON格式是否正确",variant:"destructive"})}};return e.jsx(ve,{open:s,onOpenChange:n,children:e.jsx(Ne,{children:e.jsxs(Ge,{defaultValue:"container",className:"w-full",children:[e.jsxs(Ke,{className:"grid w-full grid-cols-9 gap-2",children:[e.jsxs(F,{value:"container",children:["容器",e.jsx(ne,{className:"h-5 w-5 ml-1",children:e.jsx(te,{className:"text-xs",children:((f=(h=(d=a==null?void 0:a.raw)==null?void 0:d.status)==null?void 0:h.containerStatuses)==null?void 0:f.length)||0+((N=(u=(j=a==null?void 0:a.raw)==null?void 0:j.status)==null?void 0:u.initContainerStatuses)==null?void 0:N.length)||0})})]}),e.jsxs(F,{value:"label",children:["标签",e.jsx(ne,{className:"h-5 w-5 ml-1",children:e.jsx(te,{className:"text-xs",children:(L=(C=a==null?void 0:a.raw)==null?void 0:C.metadata)!=null&&L.labels?Object.keys(a.raw.metadata.labels).length:0})})]}),e.jsxs(F,{value:"annotation",children:["注释",e.jsx(ne,{className:"h-5 w-5 ml-1",children:e.jsx(te,{className:"text-xs",children:(g=(O=a==null?void 0:a.raw)==null?void 0:O.metadata)!=null&&g.annotations?Object.keys(a.raw.metadata.annotations).length:0})})]}),e.jsxs(F,{value:"status",children:["状态",e.jsx(ne,{className:"h-5 w-5 ml-1",children:e.jsx(te,{className:"text-xs",children:(_=(U=a==null?void 0:a.raw)==null?void 0:U.metadata)!=null&&_.annotations?Object.keys((I=a.raw.status)==null?void 0:I.conditions).length:0})})]}),e.jsx(F,{value:"diaodu",children:"调度"}),e.jsx(F,{value:"event",children:"事件"}),e.jsx(F,{value:"relative",children:"相关资源"}),e.jsx(F,{value:"monitor",children:"监控"}),e.jsx(F,{value:"jsondata",children:"查看或编辑"})]}),e.jsx($,{value:"container",className:"h-[80vh] overflow-y-auto",children:e.jsx(Ln,{currentRow:a})}),e.jsx($,{value:"label",className:"h-[80vh] overflow-y-auto",children:e.jsx(Hn,{currentRow:a})}),e.jsx($,{value:"annotation",className:"h-[80vh] overflow-y-auto",children:e.jsx(Gn,{currentRow:a})}),e.jsx($,{value:"status",className:"h-[80vh] overflow-y-auto",children:e.jsx(Kn,{currentRow:a})}),e.jsx($,{value:"relative",className:"h-[80vh] overflow-y-auto",children:e.jsx(Wn,{currentRow:a})}),e.jsx($,{value:"diaodu",className:"h-[80vh] overflow-y-auto",children:e.jsx(Yn,{currentRow:a})}),e.jsx($,{value:"event",className:"h-[80vh] overflow-y-auto",children:e.jsx(Xn,{currentRow:a})}),e.jsx($,{value:"monitor",className:"h-[80vh] overflow-y-auto",children:e.jsxs("div",{className:"h-[80vh] grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"rounded-md",children:e.jsx(S,{className:"h-full border rounded-md overflow-y-auto",children:e.jsx(Mn,{})})}),e.jsx("div",{className:"rounded-md",children:e.jsx(Un,{})}),e.jsx("div",{className:"rounded-md h-full overflow-y-auto overflow-x-auto bg-gray-800 border border-gray-600",children:e.jsx("pre",{className:"text-white whitespace-pre-wrap h-full p-4",children:e.jsx("code",{children:a?JSON.stringify(a.raw,null,2):"currentRow is undefined or null"})})})]})}),e.jsx($,{value:"jsondata",className:"h-[80vh] overflow-y-auto",children:e.jsxs(S,{children:[e.jsxs(M,{children:[e.jsx(T,{children:a==null?void 0:a.raw.metadata.name}),e.jsxs(k,{children:["命名空间：",a==null?void 0:a.raw.metadata.namespace]})]}),e.jsxs(P,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-end mb-4",children:[t&&e.jsx(b,{variant:"ghost",onClick:r,children:"更新"}),e.jsx(b,{variant:"outline",onClick:()=>i(!t),children:t?"切换到视图模式":"切换到编辑模式"})]}),t?e.jsx(he,{value:o,onChange:A=>c(A.target.value),className:"min-h-[500px] font-mono",placeholder:"请输入JSON数据..."}):e.jsx(Qe,{src:(a==null?void 0:a.raw)||{},enableClipboard:!0,displayDataTypes:!1,name:!1})]})]})})]})})})}function Zn(){const{open:s,setOpen:n,currentRow:a,setCurrentRow:t,containerName:i,setContainerName:o}=se(),c=()=>{try{if(!(a!=null&&a.namespace)||!(a!=null&&a.name)){w({title:"更新失败",description:"缺少必要的Pod信息",variant:"destructive"});return}const r={group:"",version:"v1",resource:"pods",namespace:a==null?void 0:a.namespace,name:a==null?void 0:a.name};fetch("/api/gvr",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(d=>{if(!d.ok)throw new Error("刪除失败");return d.json()}).then(d=>{w({title:"刪除成功",description:"Pod配置已刪除"})}).catch(d=>{w({title:"刪除失败",description:"请检查网络连接或联系管理员",variant:"destructive"})})}catch{w({title:"JSON格式错误",description:"请检查JSON格式是否正确",variant:"destructive"})}};return e.jsxs(e.Fragment,{children:[e.jsx(Ee,{open:s==="create",onOpenChange:()=>n("create")},"task-create"),e.jsx(Vn,{open:s==="import",onOpenChange:()=>n("import")},"tasks-import"),a&&e.jsxs(e.Fragment,{children:[e.jsx(Ee,{open:s==="update",onOpenChange:()=>{n("update"),setTimeout(()=>{t(null)},500)},currentRow:a},`task-update-${a.id}`),e.jsx(Jn,{open:s==="terminal",onOpenChange:()=>{n(null),o(void 0),setTimeout(()=>{t(null)},500)},podName:a.name,namespace:a.namespace,containerName:i},`pod-terminal-${a.name}`),e.jsx(Qn,{open:s==="detail",onOpenChange:()=>{n(null),setTimeout(()=>{t(null)},500)},currentRow:a},`pod-detail-${a.name}`),e.jsx(zn,{open:s==="ssh",onOpenChange:()=>{n(null),o(void 0),setTimeout(()=>{t(null)},500)},podName:a.name,namespace:a.namespace,containerName:i},`pod-ssh-${a.name}`),e.jsx(sn,{destructive:!0,open:s==="delete",onOpenChange:()=>{n("delete"),setTimeout(()=>{t(null)},500)},handleConfirm:()=>{n(null),setTimeout(()=>{t(null)},500),c()},name:a.name,namespace:a.namespace,className:"max-w-md",title:`Delete Pod: ${a.namespace}/${a.name} ?`,desc:e.jsxs(e.Fragment,{children:["You are about to delete a Pod with the Name"," ",e.jsxs("strong",{children:[a.namespace,"/",a.name]}),". ",e.jsx("br",{}),"This action cannot be undone."]}),confirmText:"Delete"},"task-delete")]})]})}const ns=m.createContext(null),Rn=({children:s})=>{const[n,a]=Y.useState(null),[t,i]=Y.useState(null),[o,c]=Y.useState(void 0),[r,d]=Y.useState([]);return e.jsx(ns.Provider,{value:{open:n,setOpen:a,currentRow:t,setCurrentRow:i,containerName:o,setContainerName:c,list:r,setList:d},children:s})},et=()=>{const s=m.useContext(ns);if(!s)throw new Error("useTerminal has to be used within <TerminalProvider>");return s};var be="ContextMenu",[st,Kt]=ma(be,[qe]),D=qe(),[at,ts]=st(be),is=s=>{const{__scopeContextMenu:n,children:a,onOpenChange:t,dir:i,modal:o=!0}=s,[c,r]=m.useState(!1),d=D(n),h=ca(t),f=m.useCallback(j=>{r(j),h(j)},[h]);return e.jsx(at,{scope:n,open:c,onOpenChange:f,modal:o,children:e.jsx(xa,{...d,dir:i,open:c,onOpenChange:f,modal:o,children:a})})};is.displayName=be;var ls="ContextMenuTrigger",rs=m.forwardRef((s,n)=>{const{__scopeContextMenu:a,disabled:t=!1,...i}=s,o=ts(ls,a),c=D(a),r=m.useRef({x:0,y:0}),d=m.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...r.current})}),h=m.useRef(0),f=m.useCallback(()=>window.clearTimeout(h.current),[]),j=u=>{r.current={x:u.clientX,y:u.clientY},o.onOpenChange(!0)};return m.useEffect(()=>f,[f]),m.useEffect(()=>void(t&&f()),[t,f]),e.jsxs(e.Fragment,{children:[e.jsx(ha,{...c,virtualRef:d}),e.jsx(ua.span,{"data-state":o.open?"open":"closed","data-disabled":t?"":void 0,...i,ref:n,style:{WebkitTouchCallout:"none",...s.style},onContextMenu:t?s.onContextMenu:Q(s.onContextMenu,u=>{f(),j(u),u.preventDefault()}),onPointerDown:t?s.onPointerDown:Q(s.onPointerDown,ie(u=>{f(),h.current=window.setTimeout(()=>j(u),700)})),onPointerMove:t?s.onPointerMove:Q(s.onPointerMove,ie(f)),onPointerCancel:t?s.onPointerCancel:Q(s.onPointerCancel,ie(f)),onPointerUp:t?s.onPointerUp:Q(s.onPointerUp,ie(f))})]})});rs.displayName=ls;var nt="ContextMenuPortal",os=s=>{const{__scopeContextMenu:n,...a}=s,t=D(n);return e.jsx(pa,{...t,...a})};os.displayName=nt;var ds="ContextMenuContent",cs=m.forwardRef((s,n)=>{const{__scopeContextMenu:a,...t}=s,i=ts(ds,a),o=D(a),c=m.useRef(!1);return e.jsx(ja,{...o,...t,ref:n,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:r=>{var d;(d=s.onCloseAutoFocus)==null||d.call(s,r),!r.defaultPrevented&&c.current&&r.preventDefault(),c.current=!1},onInteractOutside:r=>{var d;(d=s.onInteractOutside)==null||d.call(s,r),!r.defaultPrevented&&!i.modal&&(c.current=!0)},style:{...s.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});cs.displayName=ds;var tt="ContextMenuGroup",it=m.forwardRef((s,n)=>{const{__scopeContextMenu:a,...t}=s,i=D(a);return e.jsx(ga,{...i,...t,ref:n})});it.displayName=tt;var lt="ContextMenuLabel",ms=m.forwardRef((s,n)=>{const{__scopeContextMenu:a,...t}=s,i=D(a);return e.jsx(va,{...i,...t,ref:n})});ms.displayName=lt;var rt="ContextMenuItem",xs=m.forwardRef((s,n)=>{const{__scopeContextMenu:a,...t}=s,i=D(a);return e.jsx(fa,{...i,...t,ref:n})});xs.displayName=rt;var ot="ContextMenuCheckboxItem",hs=m.forwardRef((s,n)=>{const{__scopeContextMenu:a,...t}=s,i=D(a);return e.jsx(Na,{...i,...t,ref:n})});hs.displayName=ot;var dt="ContextMenuRadioGroup",ct=m.forwardRef((s,n)=>{const{__scopeContextMenu:a,...t}=s,i=D(a);return e.jsx(ba,{...i,...t,ref:n})});ct.displayName=dt;var mt="ContextMenuRadioItem",us=m.forwardRef((s,n)=>{const{__scopeContextMenu:a,...t}=s,i=D(a);return e.jsx(Ca,{...i,...t,ref:n})});us.displayName=mt;var xt="ContextMenuItemIndicator",ps=m.forwardRef((s,n)=>{const{__scopeContextMenu:a,...t}=s,i=D(a);return e.jsx(ya,{...i,...t,ref:n})});ps.displayName=xt;var ht="ContextMenuSeparator",js=m.forwardRef((s,n)=>{const{__scopeContextMenu:a,...t}=s,i=D(a);return e.jsx(Sa,{...i,...t,ref:n})});js.displayName=ht;var ut="ContextMenuArrow",pt=m.forwardRef((s,n)=>{const{__scopeContextMenu:a,...t}=s,i=D(a);return e.jsx(wa,{...i,...t,ref:n})});pt.displayName=ut;var jt="ContextMenuSubTrigger",fs=m.forwardRef((s,n)=>{const{__scopeContextMenu:a,...t}=s,i=D(a);return e.jsx(Ma,{...i,...t,ref:n})});fs.displayName=jt;var ft="ContextMenuSubContent",gs=m.forwardRef((s,n)=>{const{__scopeContextMenu:a,...t}=s,i=D(a);return e.jsx(Ta,{...i,...t,ref:n,style:{...s.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});gs.displayName=ft;function ie(s){return n=>n.pointerType!=="mouse"?s(n):void 0}var gt=is,vt=rs,Nt=os,vs=cs,Ns=ms,bs=xs,Cs=hs,ys=us,Ss=ps,ws=js,Ms=fs,Ts=gs;const bt=gt,Ct=vt,yt=m.forwardRef(({className:s,inset:n,children:a,...t},i)=>e.jsxs(Ms,{ref:i,className:y("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",n&&"pl-8",s),...t,children:[a,e.jsx(ka,{className:"ml-auto h-4 w-4"})]}));yt.displayName=Ms.displayName;const St=m.forwardRef(({className:s,...n},a)=>e.jsx(Ts,{ref:a,className:y("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]",s),...n}));St.displayName=Ts.displayName;const ks=m.forwardRef(({className:s,...n},a)=>e.jsx(Nt,{children:e.jsx(vs,{ref:a,className:y("z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]",s),...n})}));ks.displayName=vs.displayName;const pe=m.forwardRef(({className:s,inset:n,...a},t)=>e.jsx(bs,{ref:t,className:y("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",s),...a}));pe.displayName=bs.displayName;const wt=m.forwardRef(({className:s,children:n,checked:a,...t},i)=>e.jsxs(Cs,{ref:i,className:y("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:a,...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ss,{children:e.jsx(X,{className:"h-4 w-4"})})}),n]}));wt.displayName=Cs.displayName;const Mt=m.forwardRef(({className:s,children:n,...a},t)=>e.jsxs(ys,{ref:t,className:y("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ss,{children:e.jsx(Pa,{className:"h-4 w-4 fill-current"})})}),n]}));Mt.displayName=ys.displayName;const Tt=m.forwardRef(({className:s,inset:n,...a},t)=>e.jsx(Ns,{ref:t,className:y("px-2 py-1.5 text-sm font-semibold text-foreground",n&&"pl-8",s),...a}));Tt.displayName=Ns.displayName;const kt=m.forwardRef(({className:s,...n},a)=>e.jsx(ws,{ref:a,className:y("-mx-1 my-1 h-px bg-border",s),...n}));kt.displayName=ws.displayName;const je=({className:s,...n})=>e.jsx("span",{className:y("ml-auto text-xs tracking-widest text-muted-foreground",s),...n});je.displayName="ContextMenuShortcut";function Pt(){const{currentRow:s,setCurrentRow:n,list:a,setList:t,containerName:i}=et();return e.jsx(e.Fragment,{children:e.jsxs(Ge,{defaultValue:"account",className:"w-full",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ke,{className:"flex overflow-x-auto scrollbar-hide space-x-1",style:{scrollBehavior:"smooth",justifyContent:"flex-start"},ref:o=>{if(o){o.scrollLeft=0;const c=()=>{const{scrollLeft:r,scrollWidth:d,clientWidth:h}=o};return o.addEventListener("scroll",c),()=>o.removeEventListener("scroll",c)}},children:a.length>0?a.map((o,c)=>e.jsxs(bt,{children:[e.jsx(Ct,{className:"flex h-[150px] w-[300px] items-center justify-center rounded-md border border-dashed text-sm",children:e.jsx(F,{value:`tab-${c}`,className:"relative group whitespace-nowrap min-w-[120px] flex-shrink-0",children:e.jsx("span",{className:"pr-4",children:i||`Terminal ${a.length} - ${c+1}`})},c)}),e.jsxs(ks,{className:"w-64",children:[e.jsxs(pe,{inset:!0,onClick:r=>{const d=[...a];d.splice(r,1),t(d),n(d[0])},children:["关闭",e.jsx(je,{children:"⌘["})]}),e.jsxs(pe,{inset:!0,onClick:r=>{const d=[...a.filter((h,f)=>f!==r)];t(d),n(d[0])},children:["关闭其他",e.jsx(je,{children:"⌘["})]})]})]},c)):e.jsxs(e.Fragment,{children:[e.jsx(F,{value:"account",className:"whitespace-nowrap flex-shrink-0",children:"Account"}),e.jsx(F,{value:"password",className:"whitespace-nowrap flex-shrink-0",children:"Password"})]})}),e.jsx("div",{className:"absolute inset-y-0 right-0 w-6 bg-gradient-to-l from-background to-transparent pointer-events-none"})]}),a.length>0?a.map((o,c)=>e.jsx($,{value:`tab-${c}`,children:e.jsxs(S,{className:"h-full flex flex-col",children:[e.jsxs(M,{children:[e.jsx(T,{children:i||`Terminal ${c+1}`}),e.jsxs(k,{children:[o.kind==="log"?"日志终端":"交互终端",e.jsx(b,{variant:"outline",onClick:r=>{r.stopPropagation();const d={kind:"log",data:{name:"Demo1",namespace:"default",container:"demo",image:"nginx",command:"nginx",args:["-g","daemon off;"],env:[{name:"ENV1",value:"VALUE1"},{name:"ENV2",value:"VALUE2"}],url:"http://localhost:8080"}};a.push(d),t([...a]),n(d),w({title:"请求接口出错",description:e.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:e.jsx("code",{className:"text-white",children:"关闭tabs"})})})},children:"×111111"})]})]}),e.jsx(P,{className:"flex-1 overflow-auto p-0",children:e.jsx("div",{className:"h-full bg-black text-white p-4",children:e.jsx("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(o.data,null,2)})})})]})},`tab-${c}`)):e.jsxs(e.Fragment,{children:[e.jsx($,{value:"account",children:e.jsxs(S,{children:[e.jsxs(M,{children:[e.jsx(T,{children:"Account"}),e.jsx(k,{children:"Make changes to your account here. Click save when you're done."})]}),e.jsxs(P,{className:"space-y-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(b,{variant:"ghost",onClick:o=>{o.stopPropagation();const c={kind:"log",data:{name:"Demo1",namespace:"default",container:"demo",image:"nginx",command:"nginx",args:["-g","daemon off;"],env:[{name:"ENV1",value:"VALUE1"},{name:"ENV2",value:"VALUE2"}],url:"http://localhost:8080"}};a.push(c),t([...a]),n(c),w({title:"请求接口出错",description:e.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:e.jsx("code",{className:"text-white",children:"关闭tabs"})})})},children:"222222×"}),e.jsx(W,{htmlFor:"name",children:"Name"}),e.jsx(G,{id:"name",defaultValue:"Pedro Duarte"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(W,{htmlFor:"username",children:"Username"}),e.jsx(G,{id:"username",defaultValue:"@peduarte"})]})]}),e.jsx(K,{children:e.jsx(b,{children:"Save changes"})})]})}),e.jsx($,{value:"password",children:e.jsxs(S,{children:[e.jsxs(M,{children:[e.jsx(T,{children:"Password"}),e.jsx(k,{children:"Change your password here. After saving, you'll be logged out."})]}),e.jsxs(P,{className:"space-y-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(W,{htmlFor:"current",children:"Current password"}),e.jsx(G,{id:"current",type:"password"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(W,{htmlFor:"new",children:"New password"}),e.jsx(G,{id:"new",type:"password"})]})]}),e.jsx(K,{children:e.jsx(b,{children:"Save password"})})]})})]})]})})}function It(){return e.jsx(Rn,{children:e.jsx(S,{className:"m-0 p-0 border-none shadow-none",children:e.jsx(P,{className:"p-1",children:e.jsx(Pt,{})})})})}function Dt(){const[s,n]=m.useState([]),a=async()=>{try{const t=await He.post("/api/gvr/list",{group:"",version:"v1",resource:"pods",fast:!0});n(t.data)}catch(t){w({title:"请求接口出错",description:e.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:e.jsx("code",{className:"text-white",children:JSON.stringify(t,null,2)})})})}};return m.useEffect(()=>{a()},[]),e.jsxs(kn,{children:[e.jsxs(Ia,{fixed:!0,children:[e.jsx(Da,{}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(Oa,{}),e.jsx(_a,{})]})]}),e.jsxs(jn,{direction:"vertical",className:"min-h-[100vh]",children:[e.jsx(_e,{defaultSize:78,minSize:30,children:e.jsx(Aa,{className:"h-full overflow-hidden",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-x-4 space-y-2",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Pods"}),e.jsx("p",{className:"text-muted-foreground",children:"Pods是Kubernetes中最小的可部署单元，它封装了一个或多个容器，提供了网络和存储的抽象。"})]})}),e.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-x-12 lg:space-y-0 mr-[1px]",children:e.jsx(Fn,{data:s,columns:Dn,fetchData:a})})]})})}),e.jsx(fn,{withHandle:!0}),e.jsx(_e,{defaultSize:22,minSize:10,children:e.jsx(It,{className:"h-full overflow-auto border-t"})})]}),e.jsx(Zn,{})]})}const qt=Ea("/_authenticated/pods/")({component:Dt});export{qt as Route};
