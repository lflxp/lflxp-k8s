import{b3 as i,b4 as r,a5 as s,b5 as o}from"./index-DIKYiZQ1.js";const a=i.create({baseURL:"",timeout:1e4,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{const t=r.getState().auth.accessToken;return t&&(e.headers.Authorization=`Bearer ${t}`,e.headers.Cookie=`token=${t}`),e},e=>Promise.reject(e));a.interceptors.response.use(e=>e.data,e=>{if(e.response){const{status:t}=e.response;t===401&&(r.getState().auth.reset(),window.location.href="/sign-in"),t>=500&&s({variant:"destructive",title:"服务器错误",description:"请稍后再试或联系管理员"}),o(e)}else e.request&&s({variant:"destructive",title:"网络错误",description:"无法连接服务器，请检查网络连接"});return Promise.reject(e)});export{a as r};
