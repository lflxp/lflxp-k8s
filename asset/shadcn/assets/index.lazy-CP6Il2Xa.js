import{j as t,d as te,Q as We,R as bt,B as U,V as qe,W as oe,X as Pe,Y as l,r as z,z as r,aj as on,ak as ln,al as cn,am as un,an as dn,Z as fn,_ as Ie,D as mn,E as pn,J as hn,K as gn,ag as xn,ah as wn,ai as vn,s as jn,a9 as bn,aa as yn,ab as Sn,ac as Cn,ad as ot,ae as lt,af as Nn,I as Ye,b as yt,t as St,$ as Dn,a0 as Tn,a1 as Rn,a2 as En,a3 as kn,F as Ct,e as Se,f as G,g as J,h as ee,i as Ce,a4 as In,a8 as Pn,a5 as pe,ax as Mn,ay as On,az as An,aA as $n,aB as Fn,aC as Hn,aD as Vn,aE as _n,ao as Ln,ap as Un,aq as zn,ar as Bn,as as Wn,at as qn,au as Yn,aF as Kn,aG as Nt,aH as Xn,H as Gn,p as Jn,T as Qn,q as Zn,M as ea,c as ta}from"./index-Dj6RBREG.js";import{C as ct}from"./checkbox-DPLbbwZt.js";import{I as na,a as aa,d as ra,c as sa,b as ia,e as oa}from"./IconStopwatch-DQ3M_YiS.js";import{A as ut,a as dt,C as la,E as ca,D as ua,b as da,c as fa,d as ma,e as pa,M as ha,P as ga,f as xa,g as wa}from"./react-icons.esm-CElOiUzb.js";import{u as va,I as ja,a as ba,T as ya,b as Sa,c as He,d as Ca,f as ft,e as Na,g as mt,h as Da,i as Ta,j as Ra,k as Ea,l as ka,m as Ia,S as Pa,C as Ma}from"./table-CQkWKkDD.js";import{S as Oa,a as Aa,b as $a,c as Fa,d as Ha}from"./select-DOGxDUhu.js";import{P as Va,a as _a,b as La}from"./popover-DHP5RGfX.js";import{R as pt,a as me}from"./radio-group-DWmRmGu8.js";import{I as Ua}from"./IconPlus-nQhWGMIR.js";import"./index-6XztGHGs.js";const za=[{value:"Running",label:"Running"},{value:"Succeeded",label:"Succeeded"},{value:"Unknown",label:"Unknown"},{value:"Failed",label:"Failed"},{value:"Pending",label:"Pending"}],Dt=[{value:"Running",label:"Running",icon:na},{value:"Succeeded",label:"Succeeded",icon:aa},{value:"Unknown",label:"Unknown",icon:ra},{value:"Failed",label:"Failed",icon:sa},{value:"Pending",label:"Pending",icon:ia}],Ba=new Map([["Running","bg-teal-100/30 text-teal-900 dark:text-teal-200 border-teal-200"],["Failed","bg-neutral-300/40 border-neutral-300"],["Unknown","bg-sky-200/40 text-sky-900 dark:text-sky-100 border-sky-300"],["Successed","bg-destructive/10 dark:bg-destructive/50 text-destructive dark:text-primary border-destructive/10"],["Pending","bg-purple-200/40 text-purple-900 dark:text-purple-100 border-purple-300"]]);function Z({column:e,title:n,className:a}){return e.getCanSort()?t.jsx("div",{className:te("flex items-center space-x-2",a),children:t.jsxs(We,{children:[t.jsx(bt,{asChild:!0,children:t.jsxs(U,{variant:"ghost",size:"sm",className:"-ml-3 h-8 data-[state=open]:bg-accent",children:[t.jsx("span",{children:n}),e.getIsSorted()==="desc"?t.jsx(ut,{className:"ml-2 h-4 w-4"}):e.getIsSorted()==="asc"?t.jsx(dt,{className:"ml-2 h-4 w-4"}):t.jsx(la,{className:"ml-2 h-4 w-4"})]})}),t.jsxs(qe,{align:"start",children:[t.jsxs(oe,{onClick:()=>e.toggleSorting(!1),children:[t.jsx(dt,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Asc"]}),t.jsxs(oe,{onClick:()=>e.toggleSorting(!0),children:[t.jsx(ut,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Desc"]}),e.getCanHide()&&t.jsxs(t.Fragment,{children:[t.jsx(Pe,{}),t.jsxs(oe,{onClick:()=>e.toggleVisibility(!1),children:[t.jsx(ca,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Hide"]})]})]})]})}):t.jsx("div",{className:te(a),children:n})}const Tt=l.createContext(null);function Wa({children:e}){const[n,a]=va(null),[i,o]=z.useState(null);return t.jsx(Tt,{value:{open:n,setOpen:a,currentRow:i,setCurrentRow:o},children:e})}const Ke=()=>{const e=l.useContext(Tt);if(!e)throw new Error("useTasks has to be used within <PodsContext>");return e};r.object({apiVersion:r.string(),kind:r.string().regex(/^Pod$/),metadata:r.object({name:r.string(),namespace:r.string().optional(),labels:r.record(r.string(),r.string()).optional(),annotations:r.record(r.string(),r.string()).optional(),uid:r.string(),creationTimestamp:r.string().optional()}),spec:r.object({containers:r.array(r.object({name:r.string(),image:r.string(),ports:r.array(r.object({containerPort:r.number()})).optional()})),restartPolicy:r.enum(["Always","OnFailure","Never"]).optional(),terminationGracePeriodSeconds:r.number().optional()}),status:r.object({phase:r.enum(["Pending","Running","Succeeded","Failed","Unknown"]).optional(),conditions:r.array(r.object({type:r.string(),status:r.string(),lastProbeTime:r.string().nullable().optional(),lastTransitionTime:r.string().optional(),reason:r.string().optional()})).optional(),hostIP:r.string().optional(),podIP:r.string().optional(),startTime:r.string().optional(),containerStatuses:r.array(r.object({name:r.string(),state:r.object({running:r.object({startedAt:r.string().optional()}).optional(),waiting:r.object({reason:r.string().optional(),message:r.string().optional()}).optional(),terminated:r.object({exitCode:r.number(),reason:r.string().optional(),message:r.string().optional(),startedAt:r.string().optional(),finishedAt:r.string().optional()}).optional()}).optional(),lastState:r.object({running:r.object({startedAt:r.string().optional()}).optional(),waiting:r.object({reason:r.string().optional(),message:r.string().optional()}).optional(),terminated:r.object({exitCode:r.number(),reason:r.string().optional(),message:r.string().optional(),startedAt:r.string().optional(),finishedAt:r.string().optional()}).optional()}).optional(),ready:r.boolean(),restartCount:r.number(),image:r.string(),imageID:r.string(),containerID:r.string().optional()})).optional()}).optional()});const qa=r.object({id:r.number(),hostip:r.string(),name:r.string(),namespace:r.string(),podip:r.string(),restart:r.number(),status:r.string(),createtime:r.string(),containerStatuses:r.array(r.object({name:r.string(),state:r.object({running:r.object({startedAt:r.string().optional()}).optional(),waiting:r.object({reason:r.string().optional(),message:r.string().optional()}).optional(),terminated:r.object({exitCode:r.number(),reason:r.string().optional(),message:r.string().optional(),finishedAt:r.string().optional()}).optional()}).optional(),ready:r.boolean(),restartCount:r.number(),image:r.string(),imageID:r.string(),containerID:r.string().optional()})).optional()});function Ya({row:e}){const n=qa.parse(e.original),{setOpen:a,setCurrentRow:i}=Ke();return t.jsxs(We,{modal:!1,children:[t.jsx(bt,{asChild:!0,children:t.jsxs(U,{variant:"ghost",className:"flex h-8 w-8 p-0 data-[state=open]:bg-muted",children:[t.jsx(ua,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Open menu"})]})}),t.jsxs(qe,{align:"end",className:"w-[160px]",children:[t.jsx(oe,{onClick:()=>{i(n),a("update")},children:"Edit"}),t.jsx(oe,{onClick:()=>{i(n),a("terminal")},children:"打开终端"}),t.jsx(oe,{disabled:!0,children:"Make a copy"}),t.jsx(oe,{disabled:!0,children:"Favorite"}),t.jsx(Pe,{}),t.jsxs(on,{children:[t.jsx(ln,{children:"Labels"}),t.jsx(cn,{children:t.jsx(un,{value:n.name,children:za.map(o=>t.jsx(dn,{value:o.value,children:o.label},o.value))})})]}),t.jsx(Pe,{}),t.jsxs(oe,{onClick:()=>{i(n),a("delete")},children:["Delete",t.jsx(fn,{children:t.jsx(ja,{size:16})})]})]})]})}const Ka=[{id:"select",header:({table:e})=>t.jsx(ct,{checked:e.getIsAllPageRowsSelected()||e.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:n=>e.toggleAllPageRowsSelected(!!n),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:e})=>t.jsx(ct,{checked:e.getIsSelected(),onCheckedChange:n=>e.toggleSelected(!!n),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"id",header:({column:e})=>t.jsx(Z,{column:e,title:"Id"}),cell:({row:e})=>t.jsx("div",{className:"w-fit",children:e.getValue("id")}),enableSorting:!0,enableHiding:!0},{accessorKey:"status",header:({column:e})=>t.jsx(Z,{column:e,title:"状态"}),cell:({row:e})=>{if(!Dt.find(i=>i.value===e.getValue("status")))return null;const a=Ba.get(e.getValue("status"));return t.jsx("div",{className:"flex space-x-2",children:t.jsx(Ie,{variant:"outline",className:te("capitalize",a),children:e.getValue("status")})})},filterFn:(e,n,a)=>a.includes(e.getValue(n))},{accessorKey:"name",header:({column:e})=>t.jsx(Z,{column:e,title:"名称"}),cell:({row:e})=>t.jsx("div",{className:"w-48 overflow-hidden text-ellipsis whitespace-nowrap hover:overflow-visible ",children:e.getValue("name")}),enableSorting:!1,enableHiding:!1},{accessorKey:"namespace",header:({column:e})=>t.jsx(Z,{column:e,title:"命名空间"}),cell:({row:e})=>t.jsx("div",{className:"w-fit",children:e.getValue("namespace")})},{id:"images",header:({column:e})=>t.jsx(Z,{column:e,title:"镜像"}),cell:({row:e})=>{const a=(e.original.containerStatuses||[]).map(i=>i.image);return a.length===0?t.jsx("div",{children:"-"}):t.jsxs("div",{className:"flex items-center",children:[t.jsx(mn,{children:t.jsxs(pn,{children:[t.jsx(hn,{children:t.jsx("div",{className:"max-w-[200px] truncate",children:a[0]})}),t.jsx(gn,{className:"max-w-[400px] whitespace-pre-wrap",children:a.map((i,o)=>t.jsx("div",{children:i},o))})]})}),a.length>1&&t.jsxs("span",{className:"ml-1 text-xs text-muted-foreground",children:["+",a.length-1," more"]})]})}},{accessorKey:"ready",header:({column:e})=>t.jsx(Z,{column:e,title:"就绪容器"}),cell:({row:e})=>{var i,o;const n=(i=e.original.containerStatuses)==null?void 0:i.length,a=(o=e.original.containerStatuses)==null?void 0:o.filter(s=>s.ready).length;return t.jsxs("div",{className:"w-fit",children:[a,"/",n]})}},{accessorKey:"restart",header:({column:e})=>t.jsx(Z,{column:e,title:"重启次数"}),cell:({row:e})=>t.jsx("div",{className:"w-fit",children:e.getValue("restart")})},{accessorKey:"podip",header:({column:e})=>t.jsx(Z,{column:e,title:"容器IP"}),cell:({row:e})=>t.jsx("div",{className:"w-fit",children:e.getValue("podip")})},{accessorKey:"hostip",header:({column:e})=>t.jsx(Z,{column:e,title:"主机IP"}),cell:({row:e})=>t.jsx("div",{className:"w-fit",children:e.getValue("hostip")})},{accessorKey:"createtime",header:({column:e})=>t.jsx(Z,{column:e,title:"运行时间"}),cell:({row:e})=>{const n=S=>{const m=Date.now()-S,u=24*3600*1e3,b=3600*1e3,A=60*1e3,R=Math.floor(m/u),$=m%u,v=Math.floor($/b),P=$%b,M=Math.floor(P/A),g=P%A,q=Math.round(g/1e3);return{days:R,hours:v,minutes:M,seconds:q}},a=(S,h,m,u)=>{let b="";return S>0&&(b+=`${S} 天 `),h>0&&(b+=`${h} 小时 `),m>0&&(b+=`${m} 分钟 `),u>0&&(b+=`${u} 秒`),b},i=new Date(e.getValue("createtime")).getTime(),{days:o,hours:s,minutes:c,seconds:d}=n(i),j=a(o,s,c,d);return t.jsx("div",{className:"w-fit",children:j})}},{id:"actions",cell:({row:e})=>t.jsx(Ya,{row:e})}];function Xa({table:e}){return t.jsxs("div",{className:"flex items-center justify-between overflow-clip px-2",style:{overflowClipMargin:1},children:[t.jsxs("div",{className:"hidden flex-1 text-sm text-muted-foreground sm:block",children:[e.getFilteredSelectedRowModel().rows.length," of"," ",e.getFilteredRowModel().rows.length," row(s) selected."]}),t.jsxs("div",{className:"flex items-center sm:space-x-6 lg:space-x-8",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("p",{className:"hidden text-sm font-medium sm:block",children:"Rows per page"}),t.jsxs(Oa,{value:`${e.getState().pagination.pageSize}`,onValueChange:n=>{e.setPageSize(Number(n))},children:[t.jsx(Aa,{className:"h-8 w-[70px]",children:t.jsx($a,{placeholder:e.getState().pagination.pageSize})}),t.jsx(Fa,{side:"top",children:[10,20,30,40,50].map(n=>t.jsx(Ha,{value:`${n}`,children:n},n))})]})]}),t.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",e.getState().pagination.pageIndex+1," of"," ",e.getPageCount()]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(U,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>e.setPageIndex(0),disabled:!e.getCanPreviousPage(),children:[t.jsx("span",{className:"sr-only",children:"Go to first page"}),t.jsx(da,{className:"h-4 w-4"})]}),t.jsxs(U,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>e.previousPage(),disabled:!e.getCanPreviousPage(),children:[t.jsx("span",{className:"sr-only",children:"Go to previous page"}),t.jsx(fa,{className:"h-4 w-4"})]}),t.jsxs(U,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>e.nextPage(),disabled:!e.getCanNextPage(),children:[t.jsx("span",{className:"sr-only",children:"Go to next page"}),t.jsx(ma,{className:"h-4 w-4"})]}),t.jsxs(U,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>e.setPageIndex(e.getPageCount()-1),disabled:!e.getCanNextPage(),children:[t.jsx("span",{className:"sr-only",children:"Go to last page"}),t.jsx(pa,{className:"h-4 w-4"})]})]})]})]})}function Ga({table:e}){return t.jsxs(We,{modal:!1,children:[t.jsx(xn,{asChild:!0,children:t.jsxs(U,{variant:"outline",size:"sm",className:"ml-auto hidden h-8 lg:flex",children:[t.jsx(ha,{className:"mr-2 h-4 w-4"}),"View"]})}),t.jsxs(qe,{align:"end",className:"w-[150px]",children:[t.jsx(wn,{children:"Toggle columns"}),t.jsx(Pe,{}),e.getAllColumns().filter(n=>typeof n.accessorFn<"u"&&n.getCanHide()).map(n=>t.jsx(vn,{className:"capitalize",checked:n.getIsVisible(),onCheckedChange:a=>n.toggleVisibility(!!a),children:n.id},n.id))]})]})}function ht({column:e,title:n,options:a}){const i=e==null?void 0:e.getFacetedUniqueValues(),o=new Set(e==null?void 0:e.getFilterValue());return t.jsxs(Va,{children:[t.jsx(_a,{asChild:!0,children:t.jsxs(U,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:[t.jsx(ga,{className:"mr-2 h-4 w-4"}),n,(o==null?void 0:o.size)>0&&t.jsxs(t.Fragment,{children:[t.jsx(jn,{orientation:"vertical",className:"mx-2 h-4"}),t.jsx(Ie,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:o.size}),t.jsx("div",{className:"hidden space-x-1 lg:flex",children:o.size>2?t.jsxs(Ie,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[o.size," selected"]}):a.filter(s=>o.has(s.value)).map(s=>t.jsx(Ie,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:s.label},s.value))})]})]})}),t.jsx(La,{className:"w-[200px] p-0",align:"start",children:t.jsxs(bn,{children:[t.jsx(yn,{placeholder:n}),t.jsxs(Sn,{children:[t.jsx(Cn,{children:"No results found."}),t.jsx(ot,{children:a.map(s=>{const c=o.has(s.value);return t.jsxs(lt,{onSelect:()=>{c?o.delete(s.value):o.add(s.value);const d=Array.from(o);e==null||e.setFilterValue(d.length?d:void 0)},children:[t.jsx("div",{className:te("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",c?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:t.jsx(xa,{className:te("h-4 w-4")})}),s.icon&&t.jsx(s.icon,{className:"mr-2 h-4 w-4 text-muted-foreground"}),t.jsx("span",{children:s.label}),(i==null?void 0:i.get(s.value))&&t.jsx("span",{className:"ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs",children:i.get(s.value)})]},s.value)})}),o.size>0&&t.jsxs(t.Fragment,{children:[t.jsx(Nn,{}),t.jsx(ot,{children:t.jsx(lt,{onSelect:()=>e==null?void 0:e.setFilterValue(void 0),className:"justify-center text-center",children:"Clear filters"})})]})]})]})})]})}function Ja({table:e,originalData:n}){var o;const a=e.getState().columnFilters.length>0,i=[...new Set(n.map(s=>s.namespace))].map(s=>({value:s,label:s}));return t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex flex-1 flex-col-reverse items-start gap-y-2 sm:flex-row sm:items-center sm:space-x-2",children:[t.jsx(Ye,{placeholder:"Filter tasks...",value:((o=e.getColumn("name"))==null?void 0:o.getFilterValue())??"",onChange:s=>{var c;return(c=e.getColumn("name"))==null?void 0:c.setFilterValue(s.target.value)},className:"h-8 w-[150px] lg:w-[250px]"}),t.jsxs("div",{className:"flex gap-x-2",children:[e.getColumn("status")&&t.jsx(ht,{column:e.getColumn("status"),title:"Status",options:Dt}),e.getColumn("namespace")&&t.jsx(ht,{column:e.getColumn("namespace"),title:"Namespace",options:i})]}),a&&t.jsxs(U,{variant:"ghost",onClick:()=>e.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Reset",t.jsx(wa,{className:"ml-2 h-4 w-4"})]})]}),t.jsx(Ga,{table:e})]})}function Qa({columns:e,data:n}){var m;const[a,i]=z.useState({}),[o,s]=z.useState({}),[c,d]=z.useState([]),[j,S]=z.useState([]),h=ba({data:n,columns:e,state:{sorting:j,columnVisibility:o,rowSelection:a,columnFilters:c},enableRowSelection:!0,onRowSelectionChange:i,onSortingChange:S,onColumnFiltersChange:d,onColumnVisibilityChange:s,getCoreRowModel:Da(),getFilteredRowModel:Ta(),getPaginationRowModel:Ra(),getSortedRowModel:Ea(),getFacetedRowModel:ka(),getFacetedUniqueValues:Ia()});return t.jsxs("div",{className:"space-y-4",children:[t.jsx(Ja,{table:h,originalData:n}),t.jsx("div",{className:"rounded-md border",children:t.jsxs(ya,{children:[t.jsx(Sa,{children:h.getHeaderGroups().map(u=>t.jsx(He,{children:u.headers.map(b=>t.jsx(Ca,{colSpan:b.colSpan,children:b.isPlaceholder?null:ft(b.column.columnDef.header,b.getContext())},b.id))},u.id))}),t.jsx(Na,{children:(m=h.getRowModel().rows)!=null&&m.length?h.getRowModel().rows.map(u=>t.jsx(He,{"data-state":u.getIsSelected()&&"selected",children:u.getVisibleCells().map(b=>t.jsx(mt,{children:ft(b.column.columnDef.cell,b.getContext())},b.id))},u.id)):t.jsx(He,{children:t.jsx(mt,{colSpan:e.length,className:"h-24 text-center",children:"No results."})})})]})}),t.jsx(Xa,{table:h})]})}const Za=r.object({file:r.instanceof(FileList).refine(e=>e.length>0,{message:"Please upload a file"}).refine(e=>{var n;return["text/csv"].includes((n=e==null?void 0:e[0])==null?void 0:n.type)},"Please upload csv format.")});function er({open:e,onOpenChange:n}){const a=yt({resolver:St(Za),defaultValues:{file:void 0}}),i=a.register("file"),o=()=>{const s=a.getValues("file");if(s&&s[0]){const c={name:s[0].name,size:s[0].size,type:s[0].type};pe({title:"You have imported the following file:",description:t.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:t.jsx("code",{className:"text-white",children:JSON.stringify(c,null,2)})})})}n(!1)};return t.jsx(Dn,{open:e,onOpenChange:s=>{n(s),a.reset()},children:t.jsxs(Tn,{className:"gap-2 sm:max-w-sm",children:[t.jsxs(Rn,{className:"text-left",children:[t.jsx(En,{children:"Import Tasks"}),t.jsx(kn,{children:"Import tasks quickly from a CSV file."})]}),t.jsx(Ct,{...a,children:t.jsx("form",{id:"task-import-form",onSubmit:a.handleSubmit(o),children:t.jsx(Se,{control:a.control,name:"file",render:()=>t.jsxs(G,{className:"mb-2 space-y-1",children:[t.jsx(J,{children:"File"}),t.jsx(ee,{children:t.jsx(Ye,{type:"file",...i,className:"h-8"})}),t.jsx(Ce,{})]})})})}),t.jsxs(In,{className:"gap-2 sm:gap-0",children:[t.jsx(Pn,{asChild:!0,children:t.jsx(U,{variant:"outline",children:"Close"})}),t.jsx(U,{type:"submit",form:"task-import-form",children:"Import"})]})]})})}function tr(e){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",n.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}const Rt=l.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),he=()=>{const e=l.useContext(Rt);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};tr(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function nr(){const e=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))}function ar(){return Xe(/^Mac/)}function rr(){return Xe(/^iPhone/)}function gt(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function sr(){return Xe(/^iPad/)||ar()&&navigator.maxTouchPoints>1}function Et(){return rr()||sr()}function Xe(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const ir=24,or=typeof window<"u"?z.useLayoutEffect:z.useEffect;function xt(...e){return(...n)=>{for(let a of e)typeof a=="function"&&a(...n)}}const Ve=typeof document<"u"&&window.visualViewport;function wt(e){let n=window.getComputedStyle(e);return/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY)}function kt(e){for(wt(e)&&(e=e.parentElement);e&&!wt(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const lr=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Re=0,_e;function cr(e={}){let{isDisabled:n}=e;or(()=>{if(!n)return Re++,Re===1&&Et()&&(_e=ur()),()=>{Re--,Re===0&&(_e==null||_e())}},[n])}function ur(){let e,n=0,a=m=>{e=kt(m.target),!(e===document.documentElement&&e===document.body)&&(n=m.changedTouches[0].pageY)},i=m=>{if(!e||e===document.documentElement||e===document.body){m.preventDefault();return}let u=m.changedTouches[0].pageY,b=e.scrollTop,A=e.scrollHeight-e.clientHeight;A!==0&&((b<=0&&u>n||b>=A&&u<n)&&m.preventDefault(),n=u)},o=m=>{let u=m.target;ze(u)&&u!==document.activeElement&&(m.preventDefault(),u.style.transform="translateY(-2000px)",u.focus(),requestAnimationFrame(()=>{u.style.transform=""}))},s=m=>{let u=m.target;ze(u)&&(u.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{u.style.transform="",Ve&&(Ve.height<window.innerHeight?requestAnimationFrame(()=>{vt(u)}):Ve.addEventListener("resize",()=>vt(u),{once:!0}))}))},c=()=>{window.scrollTo(0,0)},d=window.pageXOffset,j=window.pageYOffset,S=xt(dr(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let h=xt(be(document,"touchstart",a,{passive:!1,capture:!0}),be(document,"touchmove",i,{passive:!1,capture:!0}),be(document,"touchend",o,{passive:!1,capture:!0}),be(document,"focus",s,!0),be(window,"scroll",c));return()=>{S(),h(),window.scrollTo(d,j)}}function dr(e,n,a){let i=e.style[n];return e.style[n]=a,()=>{e.style[n]=i}}function be(e,n,a,i){return e.addEventListener(n,a,i),()=>{e.removeEventListener(n,a,i)}}function vt(e){let n=document.scrollingElement||document.documentElement;for(;e&&e!==n;){let a=kt(e);if(a!==document.documentElement&&a!==document.body&&a!==e){let i=a.getBoundingClientRect().top,o=e.getBoundingClientRect().top,s=e.getBoundingClientRect().bottom;const c=a.getBoundingClientRect().bottom+ir;s>c&&(a.scrollTop+=o-i)}e=a.parentElement}}function ze(e){return e instanceof HTMLInputElement&&!lr.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function fr(e,n){typeof e=="function"?e(n):e!=null&&(e.current=n)}function mr(...e){return n=>e.forEach(a=>fr(a,n))}function It(...e){return z.useCallback(mr(...e),e)}const Pt=new WeakMap;function O(e,n,a=!1){if(!e||!(e instanceof HTMLElement))return;let i={};Object.entries(n).forEach(([o,s])=>{if(o.startsWith("--")){e.style.setProperty(o,s);return}i[o]=e.style[o],e.style[o]=s}),!a&&Pt.set(e,i)}function pr(e,n){if(!e||!(e instanceof HTMLElement))return;let a=Pt.get(e);a&&(e.style[n]=a[n])}const I=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function Ee(e,n){if(!e)return null;const a=window.getComputedStyle(e),i=a.transform||a.webkitTransform||a.mozTransform;let o=i.match(/^matrix3d\((.+)\)$/);return o?parseFloat(o[1].split(", ")[I(n)?13:12]):(o=i.match(/^matrix\((.+)\)$/),o?parseFloat(o[1].split(", ")[I(n)?5:4]):null)}function hr(e){return 8*(Math.log(e+1)-2)}function Le(e,n){if(!e)return()=>{};const a=e.style.cssText;return Object.assign(e.style,n),()=>{e.style.cssText=a}}function gr(...e){return(...n)=>{for(const a of e)typeof a=="function"&&a(...n)}}const E={DURATION:.5,EASE:[.32,.72,0,1]},Mt=.4,xr=.25,wr=100,Ot=8,ke=16,Be=26,Ue="vaul-dragging";function At(e){const n=l.useRef(e);return l.useEffect(()=>{n.current=e}),l.useMemo(()=>(...a)=>n.current==null?void 0:n.current.call(n,...a),[])}function vr({defaultProp:e,onChange:n}){const a=l.useState(e),[i]=a,o=l.useRef(i),s=At(n);return l.useEffect(()=>{o.current!==i&&(s(i),o.current=i)},[i,o,s]),a}function $t({prop:e,defaultProp:n,onChange:a=()=>{}}){const[i,o]=vr({defaultProp:n,onChange:a}),s=e!==void 0,c=s?e:i,d=At(a),j=l.useCallback(S=>{if(s){const m=typeof S=="function"?S(e):S;m!==e&&d(m)}else o(S)},[s,e,o,d]);return[c,j]}function jr({activeSnapPointProp:e,setActiveSnapPointProp:n,snapPoints:a,drawerRef:i,overlayRef:o,fadeFromIndex:s,onSnapPointChange:c,direction:d="bottom",container:j,snapToSequentialPoint:S}){const[h,m]=$t({prop:e,defaultProp:a==null?void 0:a[0],onChange:n}),[u,b]=l.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);l.useEffect(()=>{function x(){b({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const A=l.useMemo(()=>h===(a==null?void 0:a[a.length-1])||null,[a,h]),R=l.useMemo(()=>{var x;return(x=a==null?void 0:a.findIndex(N=>N===h))!=null?x:null},[a,h]),$=a&&a.length>0&&(s||s===0)&&!Number.isNaN(s)&&a[s]===h||!a,v=l.useMemo(()=>{const x=j?{width:j.getBoundingClientRect().width,height:j.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var N;return(N=a==null?void 0:a.map(C=>{const V=typeof C=="string";let F=0;if(V&&(F=parseInt(C,10)),I(d)){const p=V?F:u?C*x.height:0;return u?d==="bottom"?x.height-p:-x.height+p:p}const Y=V?F:u?C*x.width:0;return u?d==="right"?x.width-Y:-x.width+Y:Y}))!=null?N:[]},[a,u,j]),P=l.useMemo(()=>R!==null?v==null?void 0:v[R]:null,[v,R]),M=l.useCallback(x=>{var N;const C=(N=v==null?void 0:v.findIndex(V=>V===x))!=null?N:null;c(C),O(i.current,{transition:`transform ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`,transform:I(d)?`translate3d(0, ${x}px, 0)`:`translate3d(${x}px, 0, 0)`}),v&&C!==v.length-1&&s!==void 0&&C!==s&&C<s?O(o.current,{transition:`opacity ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`,opacity:"0"}):O(o.current,{transition:`opacity ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`,opacity:"1"}),m(a==null?void 0:a[Math.max(C,0)])},[i.current,a,v,s,o,m]);l.useEffect(()=>{if(h||e){var x;const N=(x=a==null?void 0:a.findIndex(C=>C===e||C===h))!=null?x:-1;v&&N!==-1&&typeof v[N]=="number"&&M(v[N])}},[h,e,a,v,M]);function g({draggedDistance:x,closeDrawer:N,velocity:C,dismissible:V}){if(s===void 0)return;const F=d==="bottom"||d==="right"?(P??0)-x:(P??0)+x,Y=R===s-1,p=R===0,W=x>0;if(Y&&O(o.current,{transition:`opacity ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`}),!S&&C>2&&!W){V?N():M(v[0]);return}if(!S&&C>2&&W&&v&&a){M(v[a.length-1]);return}const _=v==null?void 0:v.reduce((H,ne)=>typeof H!="number"||typeof ne!="number"?H:Math.abs(ne-F)<Math.abs(H-F)?ne:H),K=I(d)?window.innerHeight:window.innerWidth;if(C>Mt&&Math.abs(x)<K*.4){const H=W?1:-1;if(H>0&&A&&a){M(v[a.length-1]);return}if(p&&H<0&&V&&N(),R===null)return;M(v[R+H]);return}M(_)}function q({draggedDistance:x}){if(P===null)return;const N=d==="bottom"||d==="right"?P-x:P+x;(d==="bottom"||d==="right")&&N<v[v.length-1]||(d==="top"||d==="left")&&N>v[v.length-1]||O(i.current,{transform:I(d)?`translate3d(0, ${N}px, 0)`:`translate3d(${N}px, 0, 0)`})}function le(x,N){if(!a||typeof R!="number"||!v||s===void 0)return null;const C=R===s-1;if(R>=s&&N)return 0;if(C&&!N)return 1;if(!$&&!C)return null;const F=C?R+1:R-1,Y=C?v[F]-v[F-1]:v[F+1]-v[F],p=x/Math.abs(Y);return C?1-p:p}return{isLastSnapPoint:A,activeSnapPoint:h,shouldFade:$,getPercentageDragged:le,setActiveSnapPoint:m,activeSnapPointIndex:R,onRelease:g,onDrag:q,snapPointsOffset:v}}const br=()=>()=>{};function yr(){const{direction:e,isOpen:n,shouldScaleBackground:a,setBackgroundColorOnScale:i,noBodyStyles:o}=he(),s=l.useRef(null),c=z.useMemo(()=>document.body.style.backgroundColor,[]);function d(){return(window.innerWidth-Be)/window.innerWidth}l.useEffect(()=>{if(n&&a){s.current&&clearTimeout(s.current);const j=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!j)return;gr(i&&!o?Le(document.body,{background:"black"}):br,Le(j,{transformOrigin:I(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${E.DURATION}s`,transitionTimingFunction:`cubic-bezier(${E.EASE.join(",")})`}));const S=Le(j,{borderRadius:`${Ot}px`,overflow:"hidden",...I(e)?{transform:`scale(${d()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${d()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{S(),s.current=window.setTimeout(()=>{c?document.body.style.background=c:document.body.style.removeProperty("background")},E.DURATION*1e3)}}},[n,a,c])}let ye=null;function Sr({isOpen:e,modal:n,nested:a,hasBeenOpened:i,preventScrollRestoration:o,noBodyStyles:s}){const[c,d]=l.useState(()=>typeof window<"u"?window.location.href:""),j=l.useRef(0),S=l.useCallback(()=>{if(gt()&&ye===null&&e&&!s){ye={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:m,innerHeight:u}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-j.current}px`,left:`${-m}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const b=u-window.innerHeight;b&&j.current>=u&&(document.body.style.top=`${-(j.current+b)}px`)}),300)}},[e]),h=l.useCallback(()=>{if(gt()&&ye!==null&&!s){const m=-parseInt(document.body.style.top,10),u=-parseInt(document.body.style.left,10);Object.assign(document.body.style,ye),window.requestAnimationFrame(()=>{if(o&&c!==window.location.href){d(window.location.href);return}window.scrollTo(u,m)}),ye=null}},[c]);return l.useEffect(()=>{function m(){j.current=window.scrollY}return m(),window.addEventListener("scroll",m),()=>{window.removeEventListener("scroll",m)}},[]),l.useEffect(()=>{if(n)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||h()}},[n,h]),l.useEffect(()=>{a||!i||(e?(!window.matchMedia("(display-mode: standalone)").matches&&S(),n||window.setTimeout(()=>{h()},500)):h())},[e,i,c,n,a,S,h]),{restorePositionSetting:h}}function Ft({open:e,onOpenChange:n,children:a,onDrag:i,onRelease:o,snapPoints:s,shouldScaleBackground:c=!1,setBackgroundColorOnScale:d=!0,closeThreshold:j=xr,scrollLockTimeout:S=wr,dismissible:h=!0,handleOnly:m=!1,fadeFromIndex:u=s&&s.length-1,activeSnapPoint:b,setActiveSnapPoint:A,fixed:R,modal:$=!0,onClose:v,nested:P,noBodyStyles:M=!1,direction:g="bottom",defaultOpen:q=!1,disablePreventScroll:le=!0,snapToSequentialPoint:x=!1,preventScrollRestoration:N=!1,repositionInputs:C=!0,onAnimationEnd:V,container:F,autoFocus:Y=!1}){var p,W;const[_=!1,K]=$t({defaultProp:q,prop:e,onChange:f=>{n==null||n(f),!f&&!P&&Qt(),setTimeout(()=>{V==null||V(f)},E.DURATION*1e3),f&&!$&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),f||(document.body.style.pointerEvents="auto")}}),[H,ne]=l.useState(!1),[re,ge]=l.useState(!1),[qt,Je]=l.useState(!1),ue=l.useRef(null),Ne=l.useRef(null),Me=l.useRef(null),Oe=l.useRef(null),xe=l.useRef(null),we=l.useRef(!1),Ae=l.useRef(null),$e=l.useRef(0),de=l.useRef(!1),Qe=l.useRef(!q),Ze=l.useRef(0),w=l.useRef(null),et=l.useRef(((p=w.current)==null?void 0:p.getBoundingClientRect().height)||0),tt=l.useRef(((W=w.current)==null?void 0:W.getBoundingClientRect().width)||0),Fe=l.useRef(0),Yt=l.useCallback(f=>{s&&f===ve.length-1&&(Ne.current=new Date)},[]),{activeSnapPoint:Kt,activeSnapPointIndex:fe,setActiveSnapPoint:nt,onRelease:Xt,snapPointsOffset:ve,onDrag:Gt,shouldFade:at,getPercentageDragged:Jt}=jr({snapPoints:s,activeSnapPointProp:b,setActiveSnapPointProp:A,drawerRef:w,fadeFromIndex:u,overlayRef:ue,onSnapPointChange:Yt,direction:g,container:F,snapToSequentialPoint:x});cr({isDisabled:!_||re||!$||qt||!H||!C||!le});const{restorePositionSetting:Qt}=Sr({isOpen:_,modal:$,nested:P??!1,hasBeenOpened:H,preventScrollRestoration:N,noBodyStyles:M});function De(){return(window.innerWidth-Be)/window.innerWidth}function Zt(f){var D,T;!h&&!s||w.current&&!w.current.contains(f.target)||(et.current=((D=w.current)==null?void 0:D.getBoundingClientRect().height)||0,tt.current=((T=w.current)==null?void 0:T.getBoundingClientRect().width)||0,ge(!0),Me.current=new Date,Et()&&window.addEventListener("touchend",()=>we.current=!1,{once:!0}),f.target.setPointerCapture(f.pointerId),$e.current=I(g)?f.pageY:f.pageX)}function rt(f,D){var T;let y=f;const k=(T=window.getSelection())==null?void 0:T.toString(),B=w.current?Ee(w.current,g):null,L=new Date;if(y.tagName==="SELECT"||y.hasAttribute("data-vaul-no-drag")||y.closest("[data-vaul-no-drag]"))return!1;if(g==="right"||g==="left")return!0;if(Ne.current&&L.getTime()-Ne.current.getTime()<500)return!1;if(B!==null&&(g==="bottom"?B>0:B<0))return!0;if(k&&k.length>0)return!1;if(xe.current&&L.getTime()-xe.current.getTime()<S&&B===0||D)return xe.current=L,!1;for(;y;){if(y.scrollHeight>y.clientHeight){if(y.scrollTop!==0)return xe.current=new Date,!1;if(y.getAttribute("role")==="dialog")return!0}y=y.parentNode}return!0}function en(f){if(w.current&&re){const D=g==="bottom"||g==="right"?1:-1,T=($e.current-(I(g)?f.pageY:f.pageX))*D,y=T>0,k=s&&!h&&!y;if(k&&fe===0)return;const B=Math.abs(T),L=document.querySelector("[data-vaul-drawer-wrapper]"),se=g==="bottom"||g==="top"?et.current:tt.current;let X=B/se;const ce=Jt(B,y);if(ce!==null&&(X=ce),k&&X>=1||!we.current&&!rt(f.target,y))return;if(w.current.classList.add(Ue),we.current=!0,O(w.current,{transition:"none"}),O(ue.current,{transition:"none"}),s&&Gt({draggedDistance:T}),y&&!s){const Q=hr(T),Te=Math.min(Q*-1,0)*D;O(w.current,{transform:I(g)?`translate3d(0, ${Te}px, 0)`:`translate3d(${Te}px, 0, 0)`});return}const ie=1-X;if((at||u&&fe===u-1)&&(i==null||i(f,X),O(ue.current,{opacity:`${ie}`,transition:"none"},!0)),L&&ue.current&&c){const Q=Math.min(De()+X*(1-De()),1),Te=8-X*8,it=Math.max(0,14-X*14);O(L,{borderRadius:`${Te}px`,transform:I(g)?`scale(${Q}) translate3d(0, ${it}px, 0)`:`scale(${Q}) translate3d(${it}px, 0, 0)`,transition:"none"},!0)}if(!s){const Q=B*D;O(w.current,{transform:I(g)?`translate3d(0, ${Q}px, 0)`:`translate3d(${Q}px, 0, 0)`})}}}l.useEffect(()=>{window.requestAnimationFrame(()=>{Qe.current=!0})},[]),l.useEffect(()=>{var f;function D(){if(!w.current||!C)return;const T=document.activeElement;if(ze(T)||de.current){var y;const k=((y=window.visualViewport)==null?void 0:y.height)||0,B=window.innerHeight;let L=B-k;const se=w.current.getBoundingClientRect().height||0,X=se>B*.8;Fe.current||(Fe.current=se);const ce=w.current.getBoundingClientRect().top;if(Math.abs(Ze.current-L)>60&&(de.current=!de.current),s&&s.length>0&&ve&&fe){const ie=ve[fe]||0;L+=ie}if(Ze.current=L,se>k||de.current){const ie=w.current.getBoundingClientRect().height;let Q=ie;ie>k&&(Q=k-(X?ce:Be)),R?w.current.style.height=`${ie-Math.max(L,0)}px`:w.current.style.height=`${Math.max(Q,k-ce)}px`}else nr()||(w.current.style.height=`${Fe.current}px`);s&&s.length>0&&!de.current?w.current.style.bottom="0px":w.current.style.bottom=`${Math.max(L,0)}px`}}return(f=window.visualViewport)==null||f.addEventListener("resize",D),()=>{var T;return(T=window.visualViewport)==null?void 0:T.removeEventListener("resize",D)}},[fe,s,ve]);function je(f){tn(),v==null||v(),f||K(!1),setTimeout(()=>{s&&nt(s[0])},E.DURATION*1e3)}function st(){if(!w.current)return;const f=document.querySelector("[data-vaul-drawer-wrapper]"),D=Ee(w.current,g);O(w.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`}),O(ue.current,{transition:`opacity ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`,opacity:"1"}),c&&D&&D>0&&_&&O(f,{borderRadius:`${Ot}px`,overflow:"hidden",...I(g)?{transform:`scale(${De()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${De()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${E.DURATION}s`,transitionTimingFunction:`cubic-bezier(${E.EASE.join(",")})`},!0)}function tn(){!re||!w.current||(w.current.classList.remove(Ue),we.current=!1,ge(!1),Oe.current=new Date)}function nn(f){if(!re||!w.current)return;w.current.classList.remove(Ue),we.current=!1,ge(!1),Oe.current=new Date;const D=Ee(w.current,g);if(!f||!rt(f.target,!1)||!D||Number.isNaN(D)||Me.current===null)return;const T=Oe.current.getTime()-Me.current.getTime(),y=$e.current-(I(g)?f.pageY:f.pageX),k=Math.abs(y)/T;if(k>.05&&(Je(!0),setTimeout(()=>{Je(!1)},200)),s){Xt({draggedDistance:y*(g==="bottom"||g==="right"?1:-1),closeDrawer:je,velocity:k,dismissible:h}),o==null||o(f,!0);return}if(g==="bottom"||g==="right"?y>0:y<0){st(),o==null||o(f,!0);return}if(k>Mt){je(),o==null||o(f,!1);return}var B;const L=Math.min((B=w.current.getBoundingClientRect().height)!=null?B:0,window.innerHeight);var se;const X=Math.min((se=w.current.getBoundingClientRect().width)!=null?se:0,window.innerWidth),ce=g==="left"||g==="right";if(Math.abs(D)>=(ce?X:L)*j){je(),o==null||o(f,!1);return}o==null||o(f,!0),st()}l.useEffect(()=>(_&&(O(document.documentElement,{scrollBehavior:"auto"}),Ne.current=new Date),()=>{pr(document.documentElement,"scrollBehavior")}),[_]);function an(f){const D=f?(window.innerWidth-ke)/window.innerWidth:1,T=f?-16:0;Ae.current&&window.clearTimeout(Ae.current),O(w.current,{transition:`transform ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`,transform:I(g)?`scale(${D}) translate3d(0, ${T}px, 0)`:`scale(${D}) translate3d(${T}px, 0, 0)`}),!f&&w.current&&(Ae.current=setTimeout(()=>{const y=Ee(w.current,g);O(w.current,{transition:"none",transform:I(g)?`translate3d(0, ${y}px, 0)`:`translate3d(${y}px, 0, 0)`})},500))}function rn(f,D){if(D<0)return;const T=(window.innerWidth-ke)/window.innerWidth,y=T+D*(1-T),k=-16+D*ke;O(w.current,{transform:I(g)?`scale(${y}) translate3d(0, ${k}px, 0)`:`scale(${y}) translate3d(${k}px, 0, 0)`,transition:"none"})}function sn(f,D){const T=I(g)?window.innerHeight:window.innerWidth,y=D?(T-ke)/T:1,k=D?-16:0;D&&O(w.current,{transition:`transform ${E.DURATION}s cubic-bezier(${E.EASE.join(",")})`,transform:I(g)?`scale(${y}) translate3d(0, ${k}px, 0)`:`scale(${y}) translate3d(${k}px, 0, 0)`})}return l.useEffect(()=>{$||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[$]),l.createElement(Vn,{defaultOpen:q,onOpenChange:f=>{!h&&!f||(f?ne(!0):je(!0),K(f))},open:_},l.createElement(Rt.Provider,{value:{activeSnapPoint:Kt,snapPoints:s,setActiveSnapPoint:nt,drawerRef:w,overlayRef:ue,onOpenChange:n,onPress:Zt,onRelease:nn,onDrag:en,dismissible:h,shouldAnimate:Qe,handleOnly:m,isOpen:_,isDragging:re,shouldFade:at,closeDrawer:je,onNestedDrag:rn,onNestedOpenChange:an,onNestedRelease:sn,keyboardIsOpen:de,modal:$,snapPointsOffset:ve,activeSnapPointIndex:fe,direction:g,shouldScaleBackground:c,setBackgroundColorOnScale:d,noBodyStyles:M,container:F,autoFocus:Y}},a))}const Ht=l.forwardRef(function({...e},n){const{overlayRef:a,snapPoints:i,onRelease:o,shouldFade:s,isOpen:c,modal:d,shouldAnimate:j}=he(),S=It(n,a),h=i&&i.length>0;if(!d)return null;const m=l.useCallback(u=>o(u),[o]);return l.createElement(Mn,{onMouseUp:m,ref:S,"data-vaul-overlay":"","data-vaul-snap-points":c&&h?"true":"false","data-vaul-snap-points-overlay":c&&s?"true":"false","data-vaul-animate":j!=null&&j.current?"true":"false",...e})});Ht.displayName="Drawer.Overlay";const Vt=l.forwardRef(function({onPointerDownOutside:e,style:n,onOpenAutoFocus:a,...i},o){const{drawerRef:s,onPress:c,onRelease:d,onDrag:j,keyboardIsOpen:S,snapPointsOffset:h,activeSnapPointIndex:m,modal:u,isOpen:b,direction:A,snapPoints:R,container:$,handleOnly:v,shouldAnimate:P,autoFocus:M}=he(),[g,q]=l.useState(!1),le=It(o,s),x=l.useRef(null),N=l.useRef(null),C=l.useRef(!1),V=R&&R.length>0;yr();const F=(p,W,_=0)=>{if(C.current)return!0;const K=Math.abs(p.y),H=Math.abs(p.x),ne=H>K,re=["bottom","right"].includes(W)?1:-1;if(W==="left"||W==="right"){if(!(p.x*re<0)&&H>=0&&H<=_)return ne}else if(!(p.y*re<0)&&K>=0&&K<=_)return!ne;return C.current=!0,!0};l.useEffect(()=>{V&&window.requestAnimationFrame(()=>{q(!0)})},[]);function Y(p){x.current=null,C.current=!1,d(p)}return l.createElement(On,{"data-vaul-drawer-direction":A,"data-vaul-drawer":"","data-vaul-delayed-snap-points":g?"true":"false","data-vaul-snap-points":b&&V?"true":"false","data-vaul-custom-container":$?"true":"false","data-vaul-animate":P!=null&&P.current?"true":"false",...i,ref:le,style:h&&h.length>0?{"--snap-point-height":`${h[m??0]}px`,...n}:n,onPointerDown:p=>{v||(i.onPointerDown==null||i.onPointerDown.call(i,p),x.current={x:p.pageX,y:p.pageY},c(p))},onOpenAutoFocus:p=>{a==null||a(p),M||p.preventDefault()},onPointerDownOutside:p=>{if(e==null||e(p),!u||p.defaultPrevented){p.preventDefault();return}S.current&&(S.current=!1)},onFocusOutside:p=>{if(!u){p.preventDefault();return}},onPointerMove:p=>{if(N.current=p,v||(i.onPointerMove==null||i.onPointerMove.call(i,p),!x.current))return;const W=p.pageY-x.current.y,_=p.pageX-x.current.x,K=p.pointerType==="touch"?10:2;F({x:_,y:W},A,K)?j(p):(Math.abs(_)>K||Math.abs(W)>K)&&(x.current=null)},onPointerUp:p=>{i.onPointerUp==null||i.onPointerUp.call(i,p),x.current=null,C.current=!1,d(p)},onPointerOut:p=>{i.onPointerOut==null||i.onPointerOut.call(i,p),Y(N.current)},onContextMenu:p=>{i.onContextMenu==null||i.onContextMenu.call(i,p),N.current&&Y(N.current)}})});Vt.displayName="Drawer.Content";const Cr=250,Nr=120,_t=l.forwardRef(function({preventCycle:e=!1,children:n,...a},i){const{closeDrawer:o,isDragging:s,snapPoints:c,activeSnapPoint:d,setActiveSnapPoint:j,dismissible:S,handleOnly:h,isOpen:m,onPress:u,onDrag:b}=he(),A=l.useRef(null),R=l.useRef(!1);function $(){if(R.current){M();return}window.setTimeout(()=>{v()},Nr)}function v(){if(s||e||R.current){M();return}if(M(),!c||c.length===0){S||o();return}if(d===c[c.length-1]&&S){o();return}const q=c.findIndex(x=>x===d);if(q===-1)return;const le=c[q+1];j(le)}function P(){A.current=window.setTimeout(()=>{R.current=!0},Cr)}function M(){A.current&&window.clearTimeout(A.current),R.current=!1}return l.createElement("div",{onClick:$,onPointerCancel:M,onPointerDown:g=>{h&&u(g),P()},onPointerMove:g=>{h&&b(g)},ref:i,"data-vaul-drawer-visible":m?"true":"false","data-vaul-handle":"","aria-hidden":"true",...a},l.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},n))});_t.displayName="Drawer.Handle";function Dr({onDrag:e,onOpenChange:n,open:a,...i}){const{onNestedDrag:o,onNestedOpenChange:s,onNestedRelease:c}=he();if(!o)throw new Error("Drawer.NestedRoot must be placed in another drawer");return l.createElement(Ft,{nested:!0,open:a,onClose:()=>{s(!1)},onDrag:(d,j)=>{o(d,j),e==null||e(d,j)},onOpenChange:d=>{d&&s(d),n==null||n(d)},onRelease:c,...i})}function Tr(e){const n=he(),{container:a=n.container,...i}=e;return l.createElement(_n,{container:a,...i})}const ae={Root:Ft,NestedRoot:Dr,Content:Vt,Overlay:Ht,Trigger:An,Portal:Tr,Handle:_t,Close:$n,Title:Fn,Description:Hn},Lt=({shouldScaleBackground:e=!0,...n})=>t.jsx(ae.Root,{shouldScaleBackground:e,...n});Lt.displayName="Drawer";const Rr=ae.Portal,Ut=z.forwardRef(({className:e,...n},a)=>t.jsx(ae.Overlay,{ref:a,className:te("fixed inset-0 z-50 bg-black/80",e),...n}));Ut.displayName=ae.Overlay.displayName;const zt=z.forwardRef(({className:e,children:n,...a},i)=>t.jsxs(Rr,{children:[t.jsx(Ut,{}),t.jsxs(ae.Content,{ref:i,className:te("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",e),...a,children:[t.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),n]})]}));zt.displayName="DrawerContent";const Bt=({className:e,...n})=>t.jsx("div",{className:te("grid gap-1.5 p-4 text-center sm:text-left",e),...n});Bt.displayName="DrawerHeader";const Wt=z.forwardRef(({className:e,...n},a)=>t.jsx(ae.Title,{ref:a,className:te("text-lg font-semibold leading-none tracking-tight",e),...n}));Wt.displayName=ae.Title.displayName;const Er=z.forwardRef(({className:e,...n},a)=>t.jsx(ae.Description,{ref:a,className:te("text-sm text-muted-foreground",e),...n}));Er.displayName=ae.Description.displayName;const kr=r.object({id:r.number(),hostip:r.string(),name:r.string(),namespace:r.string(),podip:r.string(),restart:r.number(),status:r.string(),createtime:r.string(),containerStatuses:r.array(r.object({name:r.string(),state:r.object({running:r.object({startedAt:r.string().optional()}).optional(),waiting:r.object({reason:r.string().optional(),message:r.string().optional()}).optional(),terminated:r.object({exitCode:r.number(),reason:r.string().optional(),message:r.string().optional(),finishedAt:r.string().optional()}).optional()}).optional(),ready:r.boolean(),restartCount:r.number(),image:r.string(),imageID:r.string(),containerID:r.string().optional()})).optional()});function jt({open:e,onOpenChange:n,currentRow:a}){const i=!!a,o=yt({resolver:St(kr),defaultValues:a??{id:0,hostip:"",name:"",namespace:"",podip:"",restart:0,status:"",createtime:"",containerStatuses:[]}}),s=c=>{n(!1),o.reset(),pe({title:"You submitted the following values:",description:t.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:t.jsx("code",{className:"text-white",children:JSON.stringify(c,null,2)})})})};return t.jsx(Ln,{open:e,onOpenChange:c=>{n(c),o.reset()},children:t.jsxs(Un,{className:"flex flex-col",children:[t.jsxs(zn,{className:"text-left",children:[t.jsxs(Bn,{children:[i?"Update":"Create"," Task"]}),t.jsxs(Wn,{children:[i?"Update the task by providing necessary info.":"Add a new task by providing necessary info.","Click save when you're done."]})]}),t.jsx(Ct,{...o,children:t.jsxs("form",{id:"tasks-form",onSubmit:o.handleSubmit(s),className:"flex-1 space-y-5",children:[t.jsx(Se,{control:o.control,name:"name",render:({field:c})=>t.jsxs(G,{className:"space-y-1",children:[t.jsx(J,{children:"Title"}),t.jsx(ee,{children:t.jsx(Ye,{...c,placeholder:"Enter a title"})}),t.jsx(Ce,{})]})}),t.jsx(Se,{control:o.control,name:"status",render:({field:c})=>t.jsxs(G,{className:"space-y-1",children:[t.jsx(J,{children:"Status"}),t.jsx(Pa,{defaultValue:c.value,onValueChange:c.onChange,placeholder:"Select dropdown",items:[{label:"Running",value:"Running"},{label:"Succeeded",value:"Succeeded"},{label:"Unknown",value:"Unknown"},{label:"Failed",value:"Failed"}]}),t.jsx(Ce,{})]})}),t.jsx(Se,{control:o.control,name:"namespace",render:({field:c})=>t.jsxs(G,{className:"relative space-y-3",children:[t.jsx(J,{children:"Label"}),t.jsx(ee,{children:t.jsxs(pt,{onValueChange:c.onChange,defaultValue:c.value,className:"flex flex-col space-y-1",children:[t.jsxs(G,{className:"flex items-center space-x-3 space-y-0",children:[t.jsx(ee,{children:t.jsx(me,{value:"documentation"})}),t.jsx(J,{className:"font-normal",children:"Documentation"})]}),t.jsxs(G,{className:"flex items-center space-x-3 space-y-0",children:[t.jsx(ee,{children:t.jsx(me,{value:"feature"})}),t.jsx(J,{className:"font-normal",children:"Feature"})]}),t.jsxs(G,{className:"flex items-center space-x-3 space-y-0",children:[t.jsx(ee,{children:t.jsx(me,{value:"bug"})}),t.jsx(J,{className:"font-normal",children:"Bug"})]})]})}),t.jsx(Ce,{})]})}),t.jsx(Se,{control:o.control,name:"namespace",render:({field:c})=>t.jsxs(G,{className:"relative space-y-3",children:[t.jsx(J,{children:"Priority"}),t.jsx(ee,{children:t.jsxs(pt,{onValueChange:c.onChange,defaultValue:c.value,className:"flex flex-col space-y-1",children:[t.jsxs(G,{className:"flex items-center space-x-3 space-y-0",children:[t.jsx(ee,{children:t.jsx(me,{value:"high"})}),t.jsx(J,{className:"font-normal",children:"High"})]}),t.jsxs(G,{className:"flex items-center space-x-3 space-y-0",children:[t.jsx(ee,{children:t.jsx(me,{value:"medium"})}),t.jsx(J,{className:"font-normal",children:"Medium"})]}),t.jsxs(G,{className:"flex items-center space-x-3 space-y-0",children:[t.jsx(ee,{children:t.jsx(me,{value:"low"})}),t.jsx(J,{className:"font-normal",children:"Low"})]})]})}),t.jsx(Ce,{})]})})]})}),t.jsxs(qn,{className:"gap-2",children:[t.jsx(Yn,{asChild:!0,children:t.jsx(U,{variant:"outline",children:"Close"})}),t.jsx(U,{form:"tasks-form",type:"submit",children:"Save changes"})]})]})})}function Ir({open:e,onOpenChange:n,podName:a,namespace:i,containerName:o}){const s=`/ws/logs/html/${i}/${a}/${o}`;return t.jsx(Lt,{open:e,onOpenChange:n,children:t.jsxs(zt,{className:"h-[80vh]",children:[t.jsx(Bt,{children:t.jsxs(Wt,{children:["Terminal: ",a," Url: ",s]})}),t.jsx("div",{className:"p-4 h-full",children:t.jsx("iframe",{src:s,className:"w-full h-full rounded-md border",style:{minHeight:"500px"}})})]})})}function Pr(){var o,s;const{open:e,setOpen:n,currentRow:a,setCurrentRow:i}=Ke();return t.jsxs(t.Fragment,{children:[t.jsx(jt,{open:e==="create",onOpenChange:()=>n("create")},"task-create"),t.jsx(er,{open:e==="import",onOpenChange:()=>n("import")},"tasks-import"),a&&t.jsxs(t.Fragment,{children:[t.jsx(jt,{open:e==="update",onOpenChange:()=>{n("update"),setTimeout(()=>{i(null)},500)},currentRow:a},`task-update-${a.id}`),t.jsx(Ir,{open:e==="terminal",onOpenChange:()=>{n(null),setTimeout(()=>{i(null)},500)},podName:a.name,namespace:a.namespace,containerName:(s=(o=a.containerStatuses)==null?void 0:o[0])==null?void 0:s.name},`pod-terminal-${a.name}`),t.jsx(Ma,{destructive:!0,open:e==="delete",onOpenChange:()=>{n("delete"),setTimeout(()=>{i(null)},500)},handleConfirm:()=>{n(null),setTimeout(()=>{i(null)},500),pe({title:"The following task has been deleted:",description:t.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:t.jsx("code",{className:"text-white",children:JSON.stringify(a,null,2)})})})},className:"max-w-md",title:`Delete this task: ${a.id} ?`,desc:t.jsxs(t.Fragment,{children:["You are about to delete a task with the ID"," ",t.jsx("strong",{children:a.id}),". ",t.jsx("br",{}),"This action cannot be undone."]}),confirmText:"Delete"},"task-delete")]})]})}function Mr(){const{setOpen:e}=Ke();return t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(U,{variant:"outline",className:"space-x-1",onClick:()=>e("import"),children:[t.jsx("span",{children:"Import"})," ",t.jsx(oa,{size:18})]}),t.jsxs(U,{className:"space-x-1",onClick:()=>e("create"),children:[t.jsx("span",{children:"Create"})," ",t.jsx(Ua,{size:18})]})]})}const Ge=Kn.create({baseURL:"",timeout:1e4,headers:{"Content-Type":"application/json"}});Ge.interceptors.request.use(e=>{const n=Nt.getState().auth.accessToken;return n&&(e.headers.Authorization=`Bearer ${n}`,e.headers.Cookie=`token=${n}`),e},e=>Promise.reject(e));Ge.interceptors.response.use(e=>e.data,e=>{if(e.response){const{status:n}=e.response;n===401&&(Nt.getState().auth.reset(),window.location.href="/sign-in"),n>=500&&pe({variant:"destructive",title:"服务器错误",description:"请稍后再试或联系管理员"}),Xn(e)}else e.request&&pe({variant:"destructive",title:"网络错误",description:"无法连接服务器，请检查网络连接"});return Promise.reject(e)});function Or(){const[e,n]=z.useState([]);return z.useEffect(()=>{(async()=>{try{const i=await Ge.post("/api/gvr/list",{group:"",version:"v1",resource:"pods",fast:!0});n(i.data)}catch(i){pe({title:"请求接口出错",description:t.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:t.jsx("code",{className:"text-white",children:JSON.stringify(i,null,2)})})})}})()},[]),t.jsxs(Wa,{children:[t.jsxs(Gn,{fixed:!0,children:[t.jsx(Jn,{}),t.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[t.jsx(Qn,{}),t.jsx(Zn,{})]})]}),t.jsxs(ea,{children:[t.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-x-4 space-y-2",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Pods"}),t.jsx("p",{className:"text-muted-foreground",children:"Here's a list of your tasks for this month!"})]}),t.jsx(Mr,{})]}),t.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-x-12 lg:space-y-0",children:t.jsx(Qa,{data:e,columns:Ka})})]}),t.jsx(Pr,{})]})}const Wr=ta("/_authenticated/pods/")({component:Or});export{Wr as Route};
