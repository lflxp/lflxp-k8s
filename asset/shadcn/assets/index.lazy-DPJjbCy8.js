import{j as e,d as E,Q as $,R as de,B as f,V as _,W,X as ce,r as v,Y as re,z as g,Z as be,D as Ce,E as Ve,J as ye,K as Te,ag as Fe,ah as ke,ai as De,s as Ue,_ as K,a9 as Me,aa as Je,ab as Oe,ac as We,ad as R,ae as ee,af as Ee,I as Z,b as Ze,t as Ie,$ as Qe,a0 as ze,a1 as Pe,a2 as Be,a3 as He,F as Ye,e as Xe,f as Ke,g as Ge,h as Ae,i as Le,a4 as $e,a8 as _e,a5 as N,ao as oe,ap as me,aq as he,ar as xe,as as pe,at as je,au as ge,aD as qe,a7 as ae,aE as k,C as I,ax as Q,ay as z,az as P,aA as B,aG as we,aH as Re,aI as J,aJ as G,aK as A,aL as O,H as ea,p as aa,T as sa,q as ta,M as la,c as na}from"./index-CvXrYaDH.js";import{C as se}from"./checkbox-DpYZ_Z3b.js";import{A as te,a as le,C as ia,E as da,D as ca,b as ra,c as oa,d as ma,e as ha,M as xa,P as pa,f as ja,g as ga}from"./react-icons.esm-NWiDlN0C.js";import{u as fa,I as Na,C as va}from"./confirm-dialog-DOwksJWV.js";import{u as Sa,T as H,a as Y,b as F,c as D,f as ne,d as X,e as b,g as ua,h as ba,i as Ca,j as Va,k as ya,l as Ta,m as Fa}from"./table-CKI2YZRe.js";import{S as ka,a as Da,b as Ua,c as Ma,d as Ja}from"./select-COFzs1gu.js";import{P as Oa,a as Wa,b as Ea}from"./popover-gjX1J700.js";import{I as Za}from"./IconDownload-hr3i2vgI.js";import{I as Ia}from"./IconPlus-Br3gedjY.js";import{T as L}from"./textarea-Dl8YPE0_.js";import{D as q,a as w}from"./drawer-BVQgAKlG.js";import"./chart-D_NbUctX.js";import{J as fe}from"./main-CKo3mhGq.js";import"./index-BIjRnDqE.js";function U({column:a,title:l,className:s}){return a.getCanSort()?e.jsx("div",{className:E("flex items-center space-x-2",s),children:e.jsxs($,{children:[e.jsx(de,{asChild:!0,children:e.jsxs(f,{variant:"ghost",size:"sm",className:"-ml-3 h-8 data-[state=open]:bg-accent",children:[e.jsx("span",{children:l}),a.getIsSorted()==="desc"?e.jsx(te,{className:"ml-2 h-4 w-4"}):a.getIsSorted()==="asc"?e.jsx(le,{className:"ml-2 h-4 w-4"}):e.jsx(ia,{className:"ml-2 h-4 w-4"})]})}),e.jsxs(_,{align:"start",children:[e.jsxs(W,{onClick:()=>a.toggleSorting(!1),children:[e.jsx(le,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Asc"]}),e.jsxs(W,{onClick:()=>a.toggleSorting(!0),children:[e.jsx(te,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Desc"]}),a.getCanHide()&&e.jsxs(e.Fragment,{children:[e.jsx(ce,{}),e.jsxs(W,{onClick:()=>a.toggleVisibility(!1),children:[e.jsx(da,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Hide"]})]})]})]})}):e.jsx("div",{className:E(s),children:l})}const Ne=re.createContext(null);function Qa({children:a}){const[l,s]=fa(null),[t,i]=v.useState(null),[n,d]=v.useState(void 0);return e.jsx(Ne,{value:{open:l,setOpen:s,currentRow:t,setCurrentRow:i,containerName:n,setContainerName:d},children:a})}const M=()=>{const a=re.useContext(Ne);if(!a)throw new Error("useTasks has to be used within <PodsContext>");return a},za=g.object({apiVersion:g.string(),kind:g.string(),metadata:g.object({name:g.string(),namespace:g.string().optional(),labels:g.record(g.string(),g.string()).optional(),annotations:g.record(g.string(),g.string()).optional(),creationTimestamp:g.string().optional(),resourceVersion:g.string().optional(),uid:g.string().optional()}).optional(),data:g.record(g.string(),g.string()).optional(),stringData:g.record(g.string(),g.string()).optional(),immutable:g.boolean().optional()}),Pa=g.object({name:g.string(),namespace:g.string(),crd:za});function Ba({row:a}){const l=Pa.parse(a.original),{setOpen:s,setCurrentRow:t}=M();return e.jsxs($,{modal:!1,children:[e.jsx(de,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"flex h-8 w-8 p-0 data-[state=open]:bg-muted",children:[e.jsx(ca,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsx(_,{align:"end",className:"w-[160px]",children:e.jsxs(W,{onClick:()=>{t(l),s("delete")},children:["刪除",e.jsx(be,{children:e.jsx(Na,{size:16})})]})})]})}const Ha=[{id:"select",header:({table:a})=>e.jsx(se,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:l=>a.toggleAllPageRowsSelected(!!l),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:a})=>e.jsx(se,{checked:a.getIsSelected(),onCheckedChange:l=>a.toggleSelected(!!l),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:({column:a})=>e.jsx(U,{column:a,title:"名称"}),cell:({row:a})=>{var i;const{setOpen:l,setCurrentRow:s}=M(),t=()=>{l("detail"),s(a.original)};return e.jsx("div",{children:e.jsx("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap hover:overflow-visible hover:text-blue-600 cursor-pointer",onClick:t,children:(i=a.original)==null?void 0:i.name})})},enableSorting:!1,enableHiding:!1},{accessorKey:"namespace",header:({column:a})=>e.jsx(U,{column:a,title:"命名空间"}),cell:({row:a})=>{var l;return e.jsx("div",{className:"w-fit",children:(l=a.original)==null?void 0:l.namespace})}},{accessorKey:"data",header:({column:a})=>e.jsx(U,{column:a,title:"Data"}),cell:({row:a})=>{var l,s;return e.jsx("div",{className:"w-fit",children:(s=(l=a.original)==null?void 0:l.crd)!=null&&s.data?Object.keys(a.original.crd.data).length:"0"})}},{accessorKey:"capatibility",header:({column:a})=>e.jsx(U,{column:a,title:"大小"}),cell:({row:a})=>{var l,s;return e.jsx("div",{className:"w-fit",children:(s=(l=a.original)==null?void 0:l.crd)!=null&&s.data?(()=>{const t=Object.values(a.original.crd.data).reduce((i,n)=>i+((n==null?void 0:n.length)||0),0);return t>=1024*1024?(t/(1024*1024)).toFixed(2)+" MB":t>=1024?(t/1024).toFixed(2)+" KB":t+" bytes"})():"0 bytes"})}},{accessorKey:"owner",header:({column:a})=>e.jsx(U,{column:a,title:"OwnerReferences"}),cell:({row:a})=>{var s,t,i;const l=(i=(t=(s=a.original)==null?void 0:s.crd)==null?void 0:t.metadata)==null?void 0:i.ownerReferences;return!l||l.length===0?"-":e.jsx(Ce,{children:e.jsxs(Ve,{children:[e.jsx(ye,{className:"w-fit",children:l.map((n,d)=>e.jsx("div",{className:"text-ellipsis overflow-hidden whitespace-nowrap hover:overflow-visible hover:text-blue-600 cursor-pointer",children:`${n.kind}/${n.name}`},d))}),e.jsx(Te,{children:l.map((n,d)=>e.jsx("div",{children:`${n.kind}/${n.name}`},d))})]})})}},{accessorKey:"createtime",header:({column:a})=>e.jsx(U,{column:a,title:"运行时间"}),cell:({row:a})=>{var h;const l=c=>{const r=Date.now()-c,j=24*3600*1e3,p=3600*1e3,S=60*1e3,C=Math.floor(r/j),u=r%j,V=Math.floor(u/p),T=u%p,ve=Math.floor(T/S),Se=T%S,ue=Math.round(Se/1e3);return{days:C,hours:V,minutes:ve,seconds:ue}},s=(c,x,r,j)=>{let p="";return c>0&&(p+=`${c}d `),x>0&&(p+=`${x}h `),r>0&&(p+=`${r}m `),j>0&&(p+=`${j}s`),p},t=new Date(((h=a.original.crd.metadata)==null?void 0:h.creationTimestamp)||"").getTime(),{days:i,hours:n,minutes:d,seconds:o}=l(t),m=s(i,n,d,o);return e.jsx("div",{className:"w-fit",children:m})}},{id:"actions",cell:({row:a})=>e.jsx(Ba,{row:a})}];function Ya({table:a}){return e.jsxs("div",{className:"flex items-center justify-between overflow-clip px-2",style:{overflowClipMargin:1},children:[e.jsxs("div",{className:"hidden flex-1 text-sm text-muted-foreground sm:block",children:[a.getFilteredSelectedRowModel().rows.length," of"," ",a.getFilteredRowModel().rows.length," row(s) selected."]}),e.jsxs("div",{className:"flex items-center sm:space-x-6 lg:space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"hidden text-sm font-medium sm:block",children:"Rows per page"}),e.jsxs(ka,{value:`${a.getState().pagination.pageSize}`,onValueChange:l=>{a.setPageSize(Number(l))},children:[e.jsx(Da,{className:"h-8 w-[70px]",children:e.jsx(Ua,{placeholder:a.getState().pagination.pageSize})}),e.jsx(Ma,{side:"top",children:[5,10,20,30,40,50].map(l=>e.jsx(Ja,{value:`${l}`,children:l},l))})]})]}),e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",a.getState().pagination.pageIndex+1," of"," ",a.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(f,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>a.setPageIndex(0),disabled:!a.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(ra,{className:"h-4 w-4"})]}),e.jsxs(f,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>a.previousPage(),disabled:!a.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(oa,{className:"h-4 w-4"})]}),e.jsxs(f,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>a.nextPage(),disabled:!a.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(ma,{className:"h-4 w-4"})]}),e.jsxs(f,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>a.setPageIndex(a.getPageCount()-1),disabled:!a.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(ha,{className:"h-4 w-4"})]})]})]})]})}function Xa({table:a}){return e.jsxs($,{modal:!1,children:[e.jsx(Fe,{asChild:!0,children:e.jsxs(f,{variant:"outline",size:"sm",className:"ml-auto hidden h-8 lg:flex",children:[e.jsx(xa,{className:"mr-2 h-4 w-4"}),"View"]})}),e.jsxs(_,{align:"end",className:"w-[150px]",children:[e.jsx(ke,{children:"Toggle columns"}),e.jsx(ce,{}),a.getAllColumns().filter(l=>typeof l.accessorFn<"u"&&l.getCanHide()).map(l=>e.jsx(De,{className:"capitalize",checked:l.getIsVisible(),onCheckedChange:s=>l.toggleVisibility(!!s),children:l.id},l.id))]})]})}function Ka({column:a,title:l,options:s}){const t=a==null?void 0:a.getFacetedUniqueValues(),i=new Set(a==null?void 0:a.getFilterValue());return e.jsxs(Oa,{children:[e.jsx(Wa,{asChild:!0,children:e.jsxs(f,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:[e.jsx(pa,{className:"mr-2 h-4 w-4"}),l,(i==null?void 0:i.size)>0&&e.jsxs(e.Fragment,{children:[e.jsx(Ue,{orientation:"vertical",className:"mx-2 h-4"}),e.jsx(K,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:i.size}),e.jsx("div",{className:"hidden space-x-1 lg:flex",children:i.size>2?e.jsxs(K,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[i.size," selected"]}):s.filter(n=>i.has(n.value)).map(n=>e.jsx(K,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:n.label},n.value))})]})]})}),e.jsx(Ea,{className:"w-[200px] p-0",align:"start",children:e.jsxs(Me,{children:[e.jsx(Je,{placeholder:l}),e.jsxs(Oe,{children:[e.jsx(We,{children:"No results found."}),e.jsx(R,{children:s.map(n=>{const d=i.has(n.value);return e.jsxs(ee,{onSelect:()=>{d?i.delete(n.value):i.add(n.value);const o=Array.from(i);a==null||a.setFilterValue(o.length?o:void 0)},children:[e.jsx("div",{className:E("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",d?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(ja,{className:E("h-4 w-4")})}),n.icon&&e.jsx(n.icon,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:n.label}),(t==null?void 0:t.get(n.value))&&e.jsx("span",{className:"ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs",children:t.get(n.value)})]},n.value)})}),i.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(Ee,{}),e.jsx(R,{children:e.jsx(ee,{onSelect:()=>a==null?void 0:a.setFilterValue(void 0),className:"justify-center text-center",children:"Clear filters"})})]})]})]})})]})}const Ga=({fetchData:a})=>{const{setOpen:l}=M();return e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{variant:"outline",className:"space-x-1",onClick:()=>l("import"),children:[e.jsx("span",{children:"Import"})," ",e.jsx(Za,{size:18})]}),e.jsxs(f,{className:"space-x-1",variant:"outline",onClick:()=>l("create"),children:[e.jsx("span",{children:"Create"})," ",e.jsx(Ia,{size:18})]}),e.jsx(f,{onClick:a,variant:"outline",children:"刷新"})]})};function Aa({table:a,originalData:l,fetchData:s}){var n;const t=a.getState().columnFilters.length>0,i=[...new Set(l.map(d=>{var o;return(o=d.crd)==null?void 0:o.metadata.namespace}))].map(d=>({value:d,label:d}));return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-1 flex-col-reverse items-start gap-y-2 sm:flex-row sm:items-center sm:space-x-2",children:[e.jsx(Z,{placeholder:"Filter tasks...",value:((n=a.getColumn("name"))==null?void 0:n.getFilterValue())??"",onChange:d=>{var o;return(o=a.getColumn("name"))==null?void 0:o.setFilterValue(d.target.value)},className:"h-8 w-[150px] lg:w-[250px]"}),e.jsx("div",{className:"flex gap-x-2",children:a.getColumn("namespace")&&e.jsx(Ka,{column:a.getColumn("namespace"),title:"命名空间筛选",options:i})}),t&&e.jsxs(f,{variant:"ghost",onClick:()=>a.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Reset",e.jsx(ga,{className:"ml-2 h-4 w-4"})]})]}),e.jsx(Xa,{table:a}),e.jsx(Ga,{fetchData:s})]})}function La({columns:a,data:l,fetchData:s}){var r;const[t,i]=v.useState({}),[n,d]=v.useState({}),[o,m]=v.useState([]),[h,c]=v.useState([]),x=Sa({data:l,columns:a,state:{sorting:h,columnVisibility:n,rowSelection:t,columnFilters:o},enableRowSelection:!0,onRowSelectionChange:i,onSortingChange:c,onColumnFiltersChange:m,onColumnVisibilityChange:d,getCoreRowModel:Ta(),getFilteredRowModel:ya(),getPaginationRowModel:Va(),getSortedRowModel:Ca(),getFacetedRowModel:ba(),getFacetedUniqueValues:ua()});return e.jsxs("div",{className:"space-y-4",children:[e.jsx(Aa,{table:x,originalData:l,fetchData:s}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(H,{children:[e.jsx(Y,{children:x.getHeaderGroups().map(j=>e.jsx(F,{children:j.headers.map(p=>e.jsx(D,{colSpan:p.colSpan,children:p.isPlaceholder?null:ne(p.column.columnDef.header,p.getContext())},p.id))},j.id))}),e.jsx(X,{children:(r=x.getRowModel().rows)!=null&&r.length?x.getRowModel().rows.map(j=>e.jsx(F,{"data-state":j.getIsSelected()&&"selected",children:j.getVisibleCells().map(p=>e.jsx(b,{children:ne(p.column.columnDef.cell,p.getContext())},p.id))},j.id)):e.jsx(F,{children:e.jsx(b,{colSpan:a.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsx(Ya,{table:x})]})}const $a=g.object({file:g.instanceof(FileList).refine(a=>a.length>0,{message:"Please upload a file"}).refine(a=>{var l;return["text/csv"].includes((l=a==null?void 0:a[0])==null?void 0:l.type)},"Please upload csv format.")});function _a({open:a,onOpenChange:l}){const s=Ze({resolver:Ie($a),defaultValues:{file:void 0}}),t=s.register("file"),i=()=>{const n=s.getValues("file");if(n&&n[0]){const d={name:n[0].name,size:n[0].size,type:n[0].type};N({title:"You have imported the following file:",description:e.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:e.jsx("code",{className:"text-white",children:JSON.stringify(d,null,2)})})})}l(!1)};return e.jsx(Qe,{open:a,onOpenChange:n=>{l(n),s.reset()},children:e.jsxs(ze,{className:"gap-2 sm:max-w-sm",children:[e.jsxs(Pe,{className:"text-left",children:[e.jsx(Be,{children:"Import Tasks"}),e.jsx(He,{children:"Import tasks quickly from a CSV file."})]}),e.jsx(Ye,{...s,children:e.jsx("form",{id:"task-import-form",onSubmit:s.handleSubmit(i),children:e.jsx(Xe,{control:s.control,name:"file",render:()=>e.jsxs(Ke,{className:"mb-2 space-y-1",children:[e.jsx(Ge,{children:"File"}),e.jsx(Ae,{children:e.jsx(Z,{type:"file",...t,className:"h-8"})}),e.jsx(Le,{})]})})})}),e.jsxs($e,{className:"gap-2 sm:gap-0",children:[e.jsx(_e,{asChild:!0,children:e.jsx(f,{variant:"outline",children:"Close"})}),e.jsx(f,{type:"submit",form:"task-import-form",children:"Import"})]})]})})}const qa={apiVersion:"v1",kind:"Secret",metadata:{annotations:{"cni.projectcalico.org/containerID":"6952a74e0b1c95f958e0e40eb2c8a8d93430112f2fc1860f2e81aa4d439d48e2","cni.projectcalico.org/podIP":"10.42.153.106/32","cni.projectcalico.org/podIPs":"10.42.153.106/32"},creationTimestamp:"2025-03-25T14:09:59Z",generateName:"demo-7fdf7d479b-",labels:{aa:"bbcd","app.kubernetes.io/instance":"demo","app.kubernetes.io/managed-by":"Helm","app.kubernetes.io/name":"demo","app.kubernetes.io/version":"1.16.0","helm.sh/chart":"demo-0.1.0","pod-template-hash":"7fdf7d479b"},name:"demo-7fdf7d479b-g52kv",namespace:"default"},data:{"ca.crt":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUU5RENDQXR5Z0F3SUJBZ0lVS3NVcjFOM2R0WFVwTjhoSVF0Y2dtNEN2azdNd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0l6RWhNQjhHQTFVRUF3d1lURzlqWVd3Z1JXTnNhWEJ6WlNCRGFHVWdVMmxuYm1WeU1CNFhEVEkwTVRBeQpNVEV6TXpZd05sb1hEVEkzTURneE1URXpNell3Tmxvd0l6RWhNQjhHQTFVRUF3d1lURzlqWVd3Z1JXTnNhWEJ6ClpTQkRhR1VnVTJsbmJtVnlNSUlDSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQWc4QU1JSUNDZ0tDQWdFQXJMK0EKazF6a1pFbGFUdmo2OVhoeDFPQ2RHeVJDcGJjZUljVElIOWQyY0RMVC9FZmJxVUpLY09JRnFZcDBRdEs5aVhheAoxQW00aEpvZm9CNG8rYjUwZ0k3Y0F2MTEwMzYvdWNoOGNHMlUwOEVobVJ4VzVpRGgwZXV2Q0NiQ0FtWFlsWFFZCkFtV05QNFQ5MWU3d2l5ZDdYV1gydTlJM2FuVWk4Nk9tMkxCaEJhZUZIODcwYXpaWmluWVBFRnVlNUE2ZHA2b2oKLzIvZ1pMYy82RTNNWjNRRzJoSnc5bExSakhTUlNTS0Z3ckdpZDJmRmx0SzV3Rmp3a1lRSWE0ZnBaSW9NbUxCdApTYWs4dGpKVHgvem42amllWUc3S2RWa2RZOWVwTjBKbkJKdUFKc0xlaEFVQm8vekVzaFdtclQ2VlpucGd4aGxKCmNaNFBDM0FsMDliRGxDVEVwMDAySkY1dnZCVy9zZmtpUmVRR3NoQ2JkUURONmJETFNXN3ExT3V0RHJKU1R5U3cKZ0Eydjk1dmJoWU90SEY0bG5QOWhiUytpQ1hwMmc2aFgrb3p0M0JrWVVBcURqRFNtK1pONGsxNXR4RnNnakVVVApDSk84QnVKSkloQVFQYnFKdkFWQ2lmaXgwTHVOL2RLR09hNWlmL2o0WmRTVnI5QzVja09XZlVpL2JFUVF1MzFWClFtZGZ6RENwQm1IYXRDU0N3THAvb2xLOWdzZWRsTHhpMXNmY0F4UzdXbWJXaXowUXJnSy9xVVRPWU5EOHNNTXcKNzhBUDFmMmVMNnlxK253VWh5NWJzSlBZYTFLYjMyMCtCTER5V1MwbWs5TUtiOGVlU2orSUR0MTByeFk2Q1MxMApEWjBFbGdLL3dIdzdhVGdCVU5WUnVLZXhLYU9Hb0l3b2dUbHh6V1VDQXdFQUFhTWdNQjR3RHdZRFZSMFRBUUgvCkJBVXdBd0VCL3pBTEJnTlZIUThFQkFNQ0FZWXdEUVlKS29aSWh2Y05BUUVMQlFBRGdnSUJBRWNqa0plOGxKNTkKR3B0U1VxVWJ3Q01VWVQvdnBsazJvdHlQZmZmWko2YUxSNG5KWHpwdVZQVy9NNTllblFxV0Vscjk0WG12dXdudAp2M01veDBXSWpKZGR1aHMvNmtVNloyMDcrd1RSMURYcUJ3SmZCYmxpVTV6dHFaMC8zUVpOSVJuaDU1UW8yQmRrCm9jdkdsTlNCcE1zVkF1RUxjRS9UalZFY0FmSElSNmN2bmdBOUtML0xCRndzZitNZC9VeTAvSCtKTUQyb2QzS3MKTHRjTHVBc1R0UnE5VFlGVzVzcy9XU2wrL3hVdlRMSkpTZGM3RDVQS2l1UWYxS0VwSFM4eXNHaWJsVU5DWnBmbAoyNlNxY2hidzhHcHZkb0xlSzExeGVOMzh4UUZKdzBVY2hyU3o2VmtTNzFkMUMyOTkrbE1wUFlJQUE0aVo5emdpCmdldmIvQVgzSGhhbDVkaHB3QkZWcTVEeGVFVDFTMnR2Y01xRXl4dXJXNG9VY3Q3cGpNeUd3WE84d1g0bnVWREQKanltQUUvZ1dWUkJMRVovalo4OENhbVYwUjZWT3RwRzRaRWVBT0g0R0VMc21ENW1HUnR2WkVQVWVadWNzbkFMaQpPdzZuSjRBZ0FSeThxZnJUSmJJMXd2RjZuSFIrZGxrOVI2SnlBVnp3WXNhSUVhcFM3Y01DWUJTR3hBeWlBc2ZhCnd2dUcrR1dqQ1hSbHRoTEJnQ2tzZEhwUXlJTjg3ZzVXTkFBSVpiMDE0U2hqb1BXdTBPOXlZV2tDV1BMNWVYYkIKNEZERFQ3YjY3ZXErT3pQTXlDam9BUUg5azZYSnNhNnM2b1d2RmpSb1Y3NGU4Q09wM1pBTk1Yd3FlZEpLVGRuRwo1MEtBeWFnZjJkdWJZejlBRTJjSjZhbkVDYVFSaUJtWQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="}};function ie({open:a,onOpenChange:l,currentRow:s}){const t=!!s,[i,n]=v.useState(""),[d,o]=v.useState(""),[m,h]=v.useState(!1);v.useEffect(()=>{s!=null&&s.raw&&n(JSON.stringify(s.raw,null,2)),o(JSON.stringify(qa,null,2))},[s]);const c=()=>{try{if(!(s!=null&&s.namespace)||!(s!=null&&s.name)){N({title:"更新失败",description:"缺少必要的Pod信息",variant:"destructive"});return}const r={group:"",version:"v1",resource:"secrets",namespace:s.namespace,name:s.name,data:JSON.parse(i)};fetch("/api/gvr",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(j=>{if(!j.ok)throw new Error("更新失败");return j.json()}).then(j=>{N({title:"更新成功",description:`Secret ${s==null?void 0:s.name} 已更新`}),l(!1)}).catch(j=>{N({title:"更新失败",description:"请检查网络连接或联系管理员",variant:"destructive"})})}catch{N({title:"JSON格式错误",description:"请检查JSON格式是否正确",variant:"destructive"})}},x=()=>{try{const r=JSON.parse(d);r.metadata.name===""&&N({title:"缺少必要条件",description:"metdata.name 不能为空"});const j={group:"",version:"v1",resource:"secrets",namespace:r.metadata.namespace===""?"default":r.metadata.namespace,name:r.metadata.name,data:r};fetch("/api/gvr",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)}).then(p=>{if(!p.ok)throw new Error("新增失败");return p.json()}).then(p=>{N({title:"新增成功",description:`Secret ${r.metadata.name} 已创建`}),l(!1)}).catch(p=>{N({title:"新增失败",description:"请检查网络连接或联系管理员",variant:"destructive"})})}catch{N({title:"JSON格式错误",description:"请检查JSON格式是否正确",variant:"destructive"})}};return e.jsx(oe,{open:a,onOpenChange:r=>{l(r)},children:e.jsxs(me,{side:"right",className:"w-[50%] sm:max-w-[90%] flex flex-col overflow-y-auto",children:[e.jsxs(he,{className:"text-left",children:[e.jsxs(xe,{children:[t?"更新":"创建"," Pod"]}),e.jsx(pe,{children:t?"更新Pod配置信息":"创建新的Pod配置"})]}),t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(f,{variant:"outline",onClick:()=>h(!m),children:m?"切换到视图模式":"切换到编辑模式"})}),m?e.jsx(L,{value:i,onChange:r=>n(r.target.value),className:"flex-1 font-mono resize-none",placeholder:"请输入JSON数据..."}):e.jsx(fe,{src:(s==null?void 0:s.raw)||{},enableClipboard:!0,displayDataTypes:!1,name:!1})]}):e.jsx(L,{value:d,onChange:r=>{o(r.target.value)},className:"flex-1 font-mono resize-none",placeholder:"请输入Pod配置..."}),e.jsxs(je,{className:"gap-2 mt-4",children:[e.jsx(ge,{asChild:!0,children:e.jsx(f,{variant:"outline",children:"关闭"})}),t?m&&e.jsx(f,{form:"tasks-form",onClick:c,children:"更新配置"}):e.jsx(f,{form:"tasks-form",onClick:x,children:"新建"})]})]})})}function wa({open:a,onOpenChange:l,podName:s,namespace:t,containerName:i}){const n=`/ws/logs/html/${t}/${s}/${i}`;return e.jsx(q,{open:a,onOpenChange:l,children:e.jsx(w,{className:"h-[80vh] mt-0",children:e.jsx("div",{className:"w-full h-full",children:e.jsx("iframe",{src:n,className:"w-full h-full rounded-md border",style:{minHeight:"500px"}})})})})}function Ra({open:a,onOpenChange:l,podName:s,namespace:t,containerName:i}){const n=`/ws/ssh/html/${t}/${s}/${i}`;return e.jsx(q,{open:a,onOpenChange:l,children:e.jsx(w,{className:"h-[80vh] mt-0",children:e.jsx("div",{className:"w-full h-full",children:e.jsx("iframe",{src:n,className:"w-full h-full rounded-md",style:{minHeight:"500px"}})})})})}function y({types:a,kind:l,name:s,namespace:t,keys:i,values:n}){const{currentRow:d,setCurrentRow:o}=M(),[m,h]=v.useState(""),[c,x]=v.useState(""),r=async()=>{if(!c||!m){N({title:"键或值不能为空",description:e.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:e.jsx("code",{className:"text-white",children:JSON.stringify({key:c,value:m},null,2)})})});return}try{if(l==="label"){const S=await k.patch("/api/gvr/patchstrate",{group:"",version:"v1",resource:"secrets",name:s,namespace:t,patchdatastrate:{metadata:{labels:{[c]:m}}}}),C={...d,crd:S.data};o(C)}else if(l==="annotation"){const S=await k.patch("/api/gvr/patchstrate",{group:"",version:"v1",resource:"secrets",name:s,namespace:t,patchdatastrate:{metadata:{annotations:{[c]:m}}}}),C={...d,crd:S.data};o(C)}else if(l==="data"){const S={...d};S.data&&delete S.data[c];const C=await k.patch("/api/gvr/patchstrate",{group:"",version:"v1",resource:"secrets",name:s,namespace:t,patchdatastrate:{data:{[c]:btoa(m)}}}),u={...d,crd:C.data};o(u)}N({title:"请求成功",description:e.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:e.jsx("code",{className:"text-white",children:JSON.stringify({key:c,value:m},null,2)})})})}catch(S){N({title:"请求接口出错",description:e.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:e.jsx("code",{className:"text-white",children:JSON.stringify(S,null,2)})})})}},j=async()=>{var S,C;if(!c){N({title:"键不能为空",description:e.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:e.jsx("code",{className:"text-white",children:JSON.stringify({key:c},null,2)})})});return}if(window.confirm(`确定要删除键 ${c} 吗？`))try{if(l==="label"){const u={...d};(S=u.metadata)!=null&&S.labels&&delete u.metadata.labels[c];const V=await k.patch("/api/gvr/patchstrate",{group:"",version:"v1",resource:"secrets",name:s,namespace:t,patchdatastrate:{metadata:{labels:{[c]:null}}}}),T={...d,crd:V.data};o(T)}else if(l==="annotation"){const u={...d};(C=u.metadata)!=null&&C.annotations&&delete u.metadata.annotations[c];const V=await k.patch("/api/gvr/patchstrate",{group:"",version:"v1",resource:"secrets",name:s,namespace:t,patchdatastrate:{metadata:{annotations:{[c]:null}}}}),T={...d,crd:V.data};o(T)}else if(l==="data"){const u={...d};u.data&&delete u.data[c];const V=await k.patch("/api/gvr/patchstrate",{group:"",version:"v1",resource:"secrets",name:s,namespace:t,patchdatastrate:{data:{[c]:null}}}),T={...d,crd:V.data};o(T)}N({title:"删除成功",description:e.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:e.jsx("code",{className:"text-white",children:JSON.stringify({key:c,value:m},null,2)})})})}catch(u){N({title:"请求接口出错",description:e.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:e.jsx("code",{className:"text-white",children:JSON.stringify(u,null,2)})})})}};v.useEffect(()=>{h(n),x(i)},[n,i]);const p=()=>{a==="add"||a==="edit"?r():a==="delete"&&j()};return e.jsxs(oe,{children:[e.jsx(qe,{asChild:!0,children:a==="edit"?e.jsx(f,{size:"sm",variant:"link",className:"w-20 text-blue-300 hover:text-blue-500",onClick:r,children:"编辑"}):a==="delete"?e.jsx(f,{size:"sm",variant:"link",className:"w-20 text-red-300 hover:text-red-500",onClick:j,children:"删除"}):a==="add"?e.jsx(f,{size:"sm",variant:"link",className:"w-20 text-green-300 hover:text-green-500",onClick:r,children:"添加"}):null}),e.jsxs(me,{side:"top",children:[e.jsxs(he,{children:[e.jsxs(xe,{children:[a==="edit"?"编辑":a==="add"?"添加":a==="delete"?"删除":null," 节点 ",s," ",l==="label"?"标签":l==="annotation"?"注释":""]}),e.jsxs(pe,{children:["新增节点 ",s," ",l==="label"?"标签":l==="annotation"?"注释":"","，请填写相关信息。",a==="edit"?"编辑节点":a==="add"?"添加节点":a==="delete"?"删除节点":null," ",s," ",l==="label"?"标签":l==="annotation"?"注释":"","，请填写相关信息。"]})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(ae,{htmlFor:"name",className:"text-right",children:"键"}),e.jsx(Z,{id:"name",value:c,disabled:a!=="add",onChange:S=>x(S.target.value),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(ae,{htmlFor:"username",className:"text-right",children:"值"}),e.jsx(Z,{id:"username",value:m,onChange:S=>h(S.target.value),className:"col-span-3"})]})]}),e.jsx(je,{children:e.jsx(ge,{asChild:!0,children:e.jsx(f,{type:"submit",onClick:p,children:"提交"})})})]})]})}function es({currentRow:a}){const l=v.useMemo(()=>!a||!a.crd||!a.crd.data?[]:Object.entries(a.crd.data).map(([t,i])=>{var n,d,o,m,h,c,x,r;return e.jsxs(F,{children:[e.jsx(b,{className:"font-medium",children:t}),e.jsx(b,{className:"w-[80vh] font-medium break-words",children:i}),e.jsx(b,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y,{types:"edit",kind:"data",name:((d=(n=a==null?void 0:a.crd)==null?void 0:n.metadata)==null?void 0:d.name)||"",namespace:((m=(o=a==null?void 0:a.crd)==null?void 0:o.metadata)==null?void 0:m.namespace)||"",keys:t,values:typeof i=="string"?i:""}),e.jsx(y,{types:"delete",kind:"data",name:((c=(h=a==null?void 0:a.crd)==null?void 0:h.metadata)==null?void 0:c.name)||"",namespace:((r=(x=a==null?void 0:a.crd)==null?void 0:x.metadata)==null?void 0:r.namespace)||"",keys:t,values:typeof i=="string"?i:""})]})})]},`${t}`)}),[a]),s=v.useMemo(()=>!a||!a.crd||!a.crd.stringData?[]:Object.entries(a.crd.stringData).map(([t,i])=>{var n,d,o,m,h,c,x,r;return e.jsxs(F,{children:[e.jsx(b,{className:"font-medium",children:t}),e.jsx(b,{className:"w-[80vh] font-medium break-words",children:i}),e.jsx(b,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y,{types:"edit",kind:"data",name:((d=(n=a==null?void 0:a.crd)==null?void 0:n.metadata)==null?void 0:d.name)||"",namespace:((m=(o=a==null?void 0:a.crd)==null?void 0:o.metadata)==null?void 0:m.namespace)||"",keys:t,values:typeof i=="string"?i:""}),e.jsx(y,{types:"delete",kind:"data",name:((c=(h=a==null?void 0:a.crd)==null?void 0:h.metadata)==null?void 0:c.name)||"",namespace:((r=(x=a==null?void 0:a.crd)==null?void 0:x.metadata)==null?void 0:r.namespace)||"",keys:t,values:typeof i=="string"?i:""})]})})]},`${t}`)}),[a]);return e.jsxs(I,{children:[e.jsxs(Q,{children:[e.jsxs(z,{children:[a==null?void 0:a.crd.metadata.name,e.jsx(y,{types:"add",kind:"data",name:a?a.crd.metadata.name:"",namespace:a?a.crd.metadata.namespace:"",keys:"",values:""})]}),e.jsxs(P,{children:["命名空间：",a==null?void 0:a.crd.metadata.namespace]})]}),e.jsx(B,{className:"space-y-2",children:e.jsxs(H,{children:[e.jsx(Fa,{children:"容器详情"}),e.jsx(Y,{children:e.jsxs(F,{children:[e.jsx(D,{children:"Name"}),e.jsx(D,{children:"Data"})]})}),e.jsxs(X,{children:[l,s]})]})})]})}function as({currentRow:a}){const l=v.useMemo(()=>!a||!a.crd||!a.crd.metadata.labels?[]:Object.entries(a.crd.metadata.labels).map(([s,t])=>{var i,n,d,o,m,h,c,x;return e.jsxs(F,{children:[e.jsx(b,{className:"font-medium",children:s}),e.jsx(b,{children:t}),e.jsx(b,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y,{types:"edit",kind:"label",name:((n=(i=a==null?void 0:a.crd)==null?void 0:i.metadata)==null?void 0:n.name)||"",namespace:((o=(d=a==null?void 0:a.crd)==null?void 0:d.metadata)==null?void 0:o.namespace)||"",keys:s,values:typeof t=="string"?t:""}),e.jsx(y,{types:"delete",kind:"label",name:((h=(m=a==null?void 0:a.crd)==null?void 0:m.metadata)==null?void 0:h.name)||"",namespace:((x=(c=a==null?void 0:a.crd)==null?void 0:c.metadata)==null?void 0:x.namespace)||"",keys:s,values:typeof t=="string"?t:""})]})})]},s)}),[a]);return e.jsxs(I,{children:[e.jsxs(Q,{children:[e.jsxs(z,{children:[a==null?void 0:a.crd.metadata.name,e.jsx(y,{types:"add",kind:"label",name:a?a.crd.metadata.name:"",namespace:a?a.crd.metadata.namespace:"",keys:"",values:""})]}),e.jsxs(P,{children:["命名空间：",a==null?void 0:a.crd.metadata.namespace]})]}),e.jsx(B,{className:"space-y-2",children:e.jsxs(H,{children:[e.jsx(Y,{children:e.jsxs(F,{children:[e.jsx(D,{className:"w-[50%]",children:"键"}),e.jsx(D,{className:"w-[50%]",children:"值"})]})}),e.jsx(X,{children:l})]})})]})}function ss({currentRow:a}){const l=v.useMemo(()=>!a||!a.crd||!a.crd.metadata.annotations?[]:Object.entries(a.crd.metadata.annotations).map(([s,t])=>{var i,n,d,o,m,h,c,x;return e.jsxs(F,{children:[e.jsx(b,{className:"font-medium",children:s}),e.jsx(b,{children:t}),e.jsx(b,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y,{types:"edit",kind:"annotation",name:((n=(i=a==null?void 0:a.crd)==null?void 0:i.metadata)==null?void 0:n.name)||"",namespace:((o=(d=a==null?void 0:a.crd)==null?void 0:d.metadata)==null?void 0:o.namespace)||"",keys:s,values:typeof t=="string"?t:""}),e.jsx(y,{types:"delete",kind:"annotation",name:((h=(m=a==null?void 0:a.crd)==null?void 0:m.metadata)==null?void 0:h.name)||"",namespace:((x=(c=a==null?void 0:a.crd)==null?void 0:c.metadata)==null?void 0:x.namespace)||"",keys:s,values:typeof t=="string"?t:""})]})})]},s)}),[a]);return e.jsxs(I,{children:[e.jsxs(Q,{children:[e.jsxs(z,{children:[a==null?void 0:a.crd.metadata.name,e.jsx(y,{types:"add",kind:"annotation",name:a?a.crd.metadata.name:"",namespace:a?a.crd.metadata.namespace:"",keys:"",values:""})]}),e.jsxs(P,{children:["命名空间：",a==null?void 0:a.crd.metadata.namespace]})]}),e.jsx(B,{className:"space-y-2",children:e.jsxs(H,{children:[e.jsx(Y,{children:e.jsxs(F,{children:[e.jsx(D,{className:"w-[50%]",children:"键"}),e.jsx(D,{className:"w-[50%]",children:"值"})]})}),e.jsx(X,{children:l})]})})]})}function ts({open:a,onOpenChange:l,currentRow:s}){var h,c,x,r;const[t,i]=v.useState(!1),[n,d]=v.useState(""),{setCurrentRow:o}=M();v.useEffect(()=>{s!=null&&s.crd&&d(JSON.stringify(s.crd,null,2))},[s]);const m=()=>{var j,p,S,C;try{const u={group:"",version:"v1",resource:"secrets",namespace:(p=(j=s==null?void 0:s.crd)==null?void 0:j.metadata)==null?void 0:p.namespace,name:(C=(S=s==null?void 0:s.crd)==null?void 0:S.metadata)==null?void 0:C.name,data:t?JSON.parse(n):s==null?void 0:s.crd};fetch("/api/gvr",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then(V=>V.json()).then(V=>{const T={...s,crd:V.data};o(T),N({title:"更新成功",description:`Secret ${s==null?void 0:s.crd.metadata.name}已更新`})}).catch(V=>{N({title:"更新失败",description:"请检查网络连接或联系管理员",variant:"destructive"})})}catch{N({title:"JSON格式错误",description:"请检查JSON格式是否正确",variant:"destructive"})}};return e.jsx(q,{open:a,onOpenChange:l,children:e.jsx(w,{children:e.jsxs(we,{defaultValue:"container",className:"w-full",children:[e.jsxs(Re,{className:"grid w-full grid-cols-4 gap-2",children:[e.jsxs(J,{value:"container",children:["配置",e.jsx(G,{className:"h-5 w-5 ml-1",children:e.jsx(A,{className:"text-xs",children:Object.keys(s.crd.data||{}).length})})]}),e.jsxs(J,{value:"label",children:["标签",e.jsx(G,{className:"h-5 w-5 ml-1",children:e.jsx(A,{className:"text-xs",children:(c=(h=s==null?void 0:s.crd)==null?void 0:h.metadata)!=null&&c.labels?Object.keys(s.crd.metadata.labels).length:0})})]}),e.jsxs(J,{value:"annotation",children:["注释",e.jsx(G,{className:"h-5 w-5 ml-1",children:e.jsx(A,{className:"text-xs",children:(r=(x=s==null?void 0:s.crd)==null?void 0:x.metadata)!=null&&r.annotations?Object.keys(s.crd.metadata.annotations).length:0})})]}),e.jsx(J,{value:"jsondata",children:"查看或编辑"})]}),e.jsx(O,{value:"label",className:"h-[80vh] overflow-y-auto",children:e.jsx(as,{currentRow:s})}),e.jsx(O,{value:"annotation",className:"h-[80vh] overflow-y-auto",children:e.jsx(ss,{currentRow:s})}),e.jsx(O,{value:"container",className:"h-[80vh] overflow-y-auto",children:e.jsx(es,{currentRow:s})}),e.jsx(O,{value:"jsondata",className:"h-[80vh] overflow-y-auto",children:e.jsxs(I,{children:[e.jsxs(Q,{children:[e.jsx(z,{children:s==null?void 0:s.crd.metadata.name}),e.jsxs(P,{children:["命名空间：",s==null?void 0:s.crd.metadata.namespace]})]}),e.jsxs(B,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-end mb-4",children:[t&&e.jsx(f,{variant:"ghost",onClick:m,children:"更新"}),e.jsx(f,{variant:"outline",onClick:()=>i(!t),children:t?"切换到视图模式":"切换到编辑模式"})]}),t?e.jsx(L,{value:n,onChange:j=>d(j.target.value),className:"min-h-[500px] font-mono",placeholder:"请输入JSON数据..."}):e.jsx(fe,{src:(s==null?void 0:s.crd)||{},enableClipboard:!0,displayDataTypes:!1,name:!1})]})]})})]})})})}function ls({fetchData:a}){const{open:l,setOpen:s,currentRow:t,setCurrentRow:i,containerName:n,setContainerName:d}=M(),o=()=>{try{if(!(t!=null&&t.namespace)||!(t!=null&&t.name)){N({title:"更新失败",description:"缺少必要的Pod信息",variant:"destructive"});return}const m={group:"",version:"v1",resource:"secrets",namespace:t==null?void 0:t.namespace,name:t==null?void 0:t.name};fetch("/api/gvr",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}).then(h=>{if(!h.ok)throw new Error("刪除失败");return h.json()}).then(h=>{a(),N({title:"刪除成功",description:`Secret ${t==null?void 0:t.name}已刪除`})}).catch(h=>{N({title:"刪除失败",description:"请检查网络连接或联系管理员",variant:"destructive"})})}catch{N({title:"JSON格式错误",description:"请检查JSON格式是否正确",variant:"destructive"})}};return e.jsxs(e.Fragment,{children:[e.jsx(ie,{open:l==="create",onOpenChange:()=>s("create")},"task-create"),e.jsx(_a,{open:l==="import",onOpenChange:()=>s("import")},"tasks-import"),t&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{open:l==="update",onOpenChange:()=>{s("update"),setTimeout(()=>{i(null)},500)},currentRow:t},`task-update-${t.id}`),e.jsx(wa,{open:l==="terminal",onOpenChange:()=>{s(null),d(void 0),setTimeout(()=>{i(null)},500)},podName:t.name,namespace:t.namespace,containerName:n},`pod-terminal-${t.name}`),e.jsx(ts,{open:l==="detail",onOpenChange:()=>{s(null),setTimeout(()=>{i(null)},500)},currentRow:t},`pod-detail-${t.name}`),e.jsx(Ra,{open:l==="ssh",onOpenChange:()=>{s(null),d(void 0),setTimeout(()=>{i(null)},500)},podName:t.name,namespace:t.namespace,containerName:n},`pod-ssh-${t.name}`),e.jsx(va,{destructive:!0,open:l==="delete",onOpenChange:()=>{s("delete"),setTimeout(()=>{i(null)},500)},handleConfirm:()=>{s(null),setTimeout(()=>{i(null)},500),o()},name:t.name,namespace:t.namespace,className:"max-w-md",title:`Delete Secret: ${t.namespace}/${t.name} ?`,desc:e.jsxs(e.Fragment,{children:["You are about to delete a Secret with the Name"," ",e.jsxs("strong",{children:[t.namespace,"/",t.name]}),". ",e.jsx("br",{}),"This action cannot be undone."]}),confirmText:"Delete"},"task-delete")]})]})}function ns(){const[a,l]=v.useState([]),s=async()=>{try{const t=await k.post("/api/gvr/list",{group:"",version:"v1",resource:"secrets",fast:!0});l(t.data)}catch(t){N({title:"请求接口出错",description:e.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:e.jsx("code",{className:"text-white",children:JSON.stringify(t,null,2)})})})}};return v.useEffect(()=>{s()},[]),e.jsxs(Qa,{children:[e.jsxs(ea,{fixed:!0,children:[e.jsx(aa,{}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(sa,{}),e.jsx(ta,{})]})]}),e.jsx(la,{children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-x-4 space-y-2",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Secret"}),e.jsx("p",{className:"text-muted-foreground",children:"Secrets是Kubernetes中用于存储敏感信息的对象，例如密码、OAuth令牌和SSH密钥。与ConfigMap类似，Secrets也可以存储配置信息，但它们的内容是经过编码的，并且在Kubernetes API中以更安全的方式处理。Secrets可以被挂载为卷或作为环境变量传递给容器。"})]})}),e.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-x-12 lg:space-y-0 mr-[1px]",children:e.jsx(La,{data:a,columns:Ha,fetchData:s})})]})}),e.jsx(ls,{fetchData:s})]})}const Ss=na("/_authenticated/secrets/")({component:ns});export{Ss as Route};
